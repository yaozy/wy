var flyingon;!function(n){"function"==typeof require&&"object"==typeof module&&module?n(module.exports=flyingon={}):"function"==typeof define&&define.amd?(flyingon={},define(function(t,e,i){n(i.exports=flyingon)})):n(flyingon=window.flyingon||(window.flyingon={}))}(function(r){function e(){}r.version="1.0.1",r.create=Object.create||function(t){return t?(e.prototype=t,new e):{}},r.extend=function t(e,i,n){var s,r=arguments.length-1;for(e=e||{},!0===arguments[r]&&(n=!0,r--);0<r&&(s=arguments[r--]);)if(n)for(var o in s){var a=s[o];e[o]=a&&"object"==typeof a?t(e[o],a,!0):a}else for(var o in s)e[o]=s[o];return e},r.each=function(t,e,i){if(t){"string"==typeof t&&(t=t.match(/\w+/g));for(var n=0,s=t.length;n<s;n++)e.call(i||r,t[n],n)}}}),function(f){var c,u=f.create,n=(f.extend,[].slice),d=f.components||(f.components=u(null)),_=1,a=u(null),l=[],s=f.fragments||(f.fragments=u(null)),r="class name can use only letters and numbers and begin with a upper letter!",o="class fn must be a function!";function h(t){var e,i,n,s=a;if(i=s[t])return i;if(e=t.match(/\w+/g)){i=l[l.length-1]||s;for(var r=0,o=e.length;r<o;r++)(n=i[t=e[r]])?i=n:(i=s[n=(n=i.moduleName)?n+"."+t:t]=i[t]=u(null)).moduleName=n;return i}throw"module name can use only letters and numbers!"}function g(t,e){try{l.push(c=t),e.call(t,t,f)}finally{f.endModule()}}function p(t,e,i,n){var s,r,o,a,l,h;function s(){var t=this.init;t&&t.apply(this,arguments)}return h=!((o=u(r=e.prototype||Object.prototype)).base=r).__flyingon_class,(n||null==n&&h||r.__defaults)&&(o.__defaults=u(r.__defaults||null),o.__properties=u(r.__properties||null),h&&(o.defineProperty=x,o.storage=b,o.get=k,o.set=C,o.defaultValue=T,o.properties=P,o.getOwnPropertyNames=j,o.notify=N,o.watch=L,o.unwatch=B)),h&&(o.__flyingon_class=!0,o.on=S,o.once=z,o.off=O,o.trigger=A,o.is=m,o.toString=w,o.dispose=W),a=c||f,o[l=t?a.moduleName+"-"+t:"anonymous-type-"+_++]=!0,o.Class=o.constructor=s,s.__class_fn=i,o.init=v,t&&(a[s.typeName=t]=d[l]=s),s.fullName=l,s.prototype=o,s.module=a,s.superclass=e,s.statics=M,s.register=e.register||R,s.init=y,s.extend=Object.extend,s}function v(){var t;this.Class.init(),(t=this.init)&&t.apply(this,arguments)}function y(){var t,e=this.prototype,i=e.base;return(t=this.superclass)&&t.__class_fn&&t.init(),(t=this.__class_fn)&&(t.call(e,i,e),(t=e.__class_init)&&t.call(e,this,i,e),delete this.__class_fn,e.init===v&&delete e.init),this}function m(t){return t&&(this instanceof t||(t=t.fullName)&&this[t])}function w(){return"[object "+this.fullName+"]"}function x(t,e,i,n){var s,r,o,a,l,h,f;if(!1!==n&&!/^[a-z][\w$]*$/.test(t))throw'property name "'+t+'" is not legal!';return i?i.name=t:i={name:t},i.defaultValue="function"==typeof e?(i.fn=e,e=null):e,(this.__defaults||(this.__defaults=u(null)))[t]=e,(r=((this.__properties||(this.__properties=u(null)))[t]=i).dataType)||(r=i.dataType=typeof e),this[t]=s=i.fn||(o=t,a=r,l=i.check,h=i.set,function(t){var e=this.__storage,i=o,n=(e||this.__defaults)[i];if(void 0===t)return n;switch(a){case"boolean":t=!!t&&"false"!==t;break;case"int":t|=0;break;case"number":t=+t||0;break;case"string":t=""+t;break;case"date":t=t?Date.create(t):null}return l&&(t=l.call(this,t)),n!==t&&((e||(this.__storage=u(this.__defaults)))[i]=t,h&&h.call(this,i,t,n),(e=this.__watches)&&(e[i]||e["*"])&&this.notify(i,t,n)),this}),s.property=!0,(r=this.__selector_extend)&&((r.prototype||r)[t]=(f=t,function(t){var e,i,n=0,s=f;if(void 0===t)for(;e=this[n++];)if(i=e[s])return i.call(e);for(;e=this[n++];)(i=e[s])&&i.apply(e,arguments);return this})),s}function b(){return this.__storage||(this.__storage=u(this.__defaults))}function k(t){var e;return void 0!==(e=(this.__storage||this.__defaults)[t])?e:(e=this.__custom_get)?e.call(this,t):void 0}function C(t,e){var i;return(i=this[t])&&i.property?i.call(this,e):(i=this.__custom_set)?i.call(this,t,e):this[t]=e,this}function T(t,e){var i=this.__defaults;return void 0===e?i[t]:(i[t]=e,((i=this.__properties)[t]=f.extend({},i[t])).defaultValue=e,this)}function P(t,e){var i,n=this.__properties,s=[];for(var r in"function"==typeof t&&(e=t),t=!1===t?this.base.__properties:null,n)!(i=n[r])||t&&t[r]===i||e&&!e(i)||s.push(i);return s}function N(t,e,i){var n,s=this.__watches;return s&&((n=s[t])&&H.call(this,n,t,e,i),"*"!==t&&(n=s["*"])&&H.call(this,n,"*",e,i)),this}function H(t,e,i,n){var s=t[0],r=1;for(s&&this.pushBack(s,i);s=t[r++];)s.call(this,e,i,n)}function L(t,e){if("function"==typeof t)e=t,t="*";else if("function"!=typeof e)return;var i=this.__watches||(this.__watches={}),n=i[t];return n?n.push(e):i[t]=["",e],this}function B(t,e){"function"==typeof t&&(e=t,t="*");var i,n=this.__watches;if(n&&(i=n[t])){if(e)for(var s=i.length-1;1<=s;s--)i[s]===e&&i.splice(s,1);else i.splice(s,1);1!==i.length||i[0]||delete n[t]}return this}function S(t,e){if(t&&"function"==typeof e){var i=this.__events||(this.__events=u(null));(i[t]||(i[t]=[])).push(e),(e=this.__event_on)&&e.apply(this,t)}return this}function z(e,i){var n=this;return this.on(e,function t(){i.apply(n,arguments),n.off(e,t)})}function O(t,e){var i,n=this.__events;if(n){if(t)if(e){if(i=n[t]){for(var s=i.length-1;0<=s;s--)i[s]===e&&i.splice(s,1);i.length||(n[t]=null)}}else n[t]&&(n[t]=null);else{for(var t in n)this.off(t);this.__events=null}(e=this.__event_off)&&e.call(this,t)}return this}function A(t){var e,i,n,s,r,o=t.type||(t=new f.Event(t)).type,a=1;for(t.target=this;e=arguments[a++];)t[e]=arguments[a++];e=i=f;do{if((n=i.__events)&&(n=n[o])&&(s=n.length)){a=0;do{if((r=n[a++])&&!r.disabled&&(!1===r.call(i,t)&&(t.defaultPrevented=!0),t.cancelBubble))return!t.defaultPrevented}while(a<s)}if(e!==i)i=(r=i.eventBubble)&&i[r];else{if(e===this)break;i=this}}while(i);return!t.defaultPrevented}function j(){var t,e,i=this.__storage;if(i){if(e=Object.getOwnPropertyNames)return e(i);for(var n in t=this.__defaults,e=[],i)i[n]!==t[n]&&e.push(n);return e}return[]}function W(){return this.__events&&this.off(),this}function M(t){if(t)if("function"==typeof t)t.call(this,this);else for(var e in t)this[e]=t[e];return this}function R(t,e){if(t||(t=this.typeName)){if(!e&&d[t])throw'component "'+t+'" has exist';return d[this.nickName=t]=this}return this}f.moduleName="flyingon",f.className="f",(a.flyingon=f).use=function(t){switch(typeof t){case"string":return h(t);case"object":return t||f}return f},f.defineModule=function(t,e){var i,n;switch(typeof t){case"string":i=h(t);break;case"function":i=c||f,e=t;break;case"object":i=t||f;default:i=f}return"function"==typeof e?(n=f.require)&&(n=n.callback)&&n(g,[i,e])||g(i,e):l.push(c=i),i},f.endModule=function(){var t=l;return t.pop(),c=t[t.length-1]||f},f.fragment=function(t,e){var i;"function"==typeof e?s[t]=e:(i=s[t])&&i.apply(e,n.call(arguments,2))},f.defineClass=function(t,e,i,n){if("string"!=typeof t)n=i,i=e,e=t,t=null;else if(!/^[A-Z]\w*$/.test(t))throw r;if("function"!=typeof i){if("function"!=typeof e)throw o;n=i,i=e,e=Object}else e&&"function"==typeof e||(e=Object);return p(t,e,i,n)},Object.extend=function(t,e,i){if("string"!=typeof t)i=e,e=t,t=null;else if(!/^[A-Z]\w*$/.test(t))throw r;if("function"!=typeof e)throw o;return p(t,this,e,i)},Object.extend._=function(t,e){function i(){}e||(e=t,t=Object);var n=t.prototype,s=i.prototype=u(n);return s.Class=i,e.call(s,n,s),i},f.defaultValue=function(t,e,i){var n,s=(t=t.prototype||t).__properties;if(s&&(n=s[e])){if(void 0===i)return n.defaultValue;if(typeof i!==n.dataType)throw"type is defferent!";n.defaultValue=t.__defaults[e]=i}},f.on=S,f.once=z,f.off=O,f.trigger=A}(flyingon),Object.extend("Event",function(){this.init=function(t){this.type=t},this.type=null,this.target=null,this.cancelBubble=!1,this.defaultPrevented=!1,this.stop=function(t){return this.cancelBubble=!0,t&&(this.defaultPrevented=!0),!1!==arguments[1]&&this.original_event&&flyingon.dom_stop(this.original_event,t),this},this.prevent=function(){return!(this.defaultPrevented=!0)!==arguments[0]&&this.original_event&&flyingon.dom_prevent(this.original_event),this}},!1),function(){var e=flyingon.create(null),n=flyingon.create(null),s=flyingon.create(null),r=Math.round;e["&"]="&amp;",e["<"]="&lt;",e[">"]="&gt;",e["'"]="&apos;",e['"']="&quot;",n.amp="&",n.lt="<",n.gt=">",n.apos="'",n.quot='"',flyingon.round=function(t,e,i){if(0<e){var n=s[e]||(s[e]=Math.pow(10,0|e));return t=r(t*n+.1)/n,i?t.toFixed(e):t}return t=r(t+.1),i?""+t:t},flyingon.encode=function t(e){if(!e)return"";var i,n,s=[],r=encodeURIComponent;for(var o in e)if(i=e[o],o=r(o),null!==i)switch(typeof i){case"undefined":s.push(o,"=&");break;case"boolean":case"number":s.push(o,"=",i,"&");break;case"string":case"function":s.push(o,"=",r(i),"&");break;default:if(i instanceof Array)for(var a=0,l=i.length;a<l;a++)void 0===(n=i[a])?s.push(o,"=&"):s.push(o,"=",r(n),"&");else s.push(o,"=",t(i),"&")}else s.push(o,"=null","&");return s.pop(),s.join("")},flyingon.html_encode=function(t){if(t&&"string"==typeof t){var i=e;return t.replace(/([&<>'"])/g,function(t,e){return i[e]})}return""+t},flyingon.html_decode=function(t){var i=n;return t&&t.replace(/&(\w+);/g,function(t,e){return i[e]||e})},flyingon.parseJSON="undefined"!=typeof JSON?function(t){return JSON.parse(t)}:function(t){if("string"!=typeof t)return t;if(/[a-zA-Z_$]/.test(t.replace(/"(?:\\"|[^"])*?"|null|true|false|\d+[Ee][-+]?\d+/g,"")))throw"json parse error!";return new Function("return "+t)()}}(),flyingon.Stream=Object.extend(function(){var o=this.Class;o.ctor=function(t){0<arguments.length&&("function"==typeof t?t(this):this.__cache=[t])},o.fromPromise=function(t){var e=new o;return"function"==typeof t&&(t=t()),t.then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e},o.fromEvent=function(t,e,i){var n=new o;return t.addEventListener(e,function(t){n.resolve(t)},i||!1),n},o.interval=function(e){var i=new o,n=0;return function t(){setTimeout(function(){i.resolve(n++),t()},0|e)}(),i},o.all=function(){for(var i,n=new o,s=[],t=0,r=0;i=arguments[t];)r++,function(t,e){i.then(function(t){s[e]=t,--r||n.resolve(s)}).catch(function(t){n.reject(t)})}(0,t++);return n},this.registry=function(t){var e=this.__next=new o,i=this.__cache;if(this.__fn=t,i){for(;0<i.length;)try{t.call(this,i.shift(),e)}catch(t){this.reject(t)}this.__cache=null}return e},this.resolve=function(t){var e,i=this.__next;if(i){if(e=this.__fn)try{e.call(this,t,i)}catch(t){this.reject(t)}}else(e=this.__cache)?e.push(t):this.__cache=[t]},this.reject=function(t){for(var e,i,n=this;(i=n.__error)&&(i(t),e=!0),n=n.__next;);if(!e)throw t},this.then=function(n){return this.registry(function(t,e){if(n){var i=n(t);void 0!==i&&(t=i)}e.resolve(t)})},this.combine=function(t){return this.registry(function(e,i){t.then(function(t){t=e instanceof Array?[e,t]:(e.push(t),e),i.resolve(t)}).catch(function(t){i.reject(t)})})},this.map=function(i){return this.registry(function(t,e){e.resolve(i(t))})},this.json=function(i){return this.registry(function(t,e){"string"==typeof t&&(t=t?JSON.parse(t):null),i&&(t=i(t)),e.resolve(t)})},this.catch=function(t){return this.__error=t,this.__next=new o},this.wait=function(i){var n,s=[];return this.registry(function(t,e){n?s.push(t):n=setTimeout(function(){e.resolve(s),n=0,s=[]},0|i)})},this.delay=function(i){return this.registry(function(t,e){setTimeout(function(){e.resolve(t)},0|i)})},this.debounce=function(i){var n;return this.registry(function(t,e){n&&clearTimeout(n),n=setTimeout(function(){e.resolve(t),n=0},0|i)})},this.throttle=function(i){var n;return this.registry(function(t,e){n||(e.resolve(t),n=setTimeout(function(){n=0},0|i))})}}),function(){this.pair=function(t){var e=flyingon.create(null);void 0===t&&(t=!0);for(var i=0,n=this.length;i<n;i++)e[this[i]]=t;return e},this.indexOf||(this.indexOf=function(t,e){if((e|=0)<0)return-1;for(var i=this.length;e<i;){if(this[e]===t)return e;e++}return-1}),this.lastIndexOf||(this.lastIndexOf=function(t,e){if(0<(e|=0))return-1;if(!e){if(1<arguments.length)return-1;e=-1}for(e+=this.length;0<=e;){if(this[e]===t)return e;e--}return-1}),this.forEach||(this.forEach=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)}),this.map||(this.map=function(t){for(var e=arguments[1],i=this.length,n=new Array(i),s=0;s<i;s++)n[s]=t.call(e,this[s],s,this);return n}),this.filter||(this.filter=function(t){for(var e=arguments[1],i=[],n=0,s=this.length;n<s;n++)t.call(e,this[n],n,this)&&i.push(this[n]);return i}),this.some||(this.some=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)if(t.call(e,this[i],i,this))return!0;return!1}),this.every||(this.every=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)if(!t.call(e,this[i],i,this))return!1;return!0}),this.reduce||(this.reduce=function(t){var e=arguments[1],i=0,n=this.length;for(void 0===e&&(e=this[0],i=1);i<n;)e=t(e,this[i],i++,this);return e}),this.reduceRight||(this.reduceRight=function(t){var e=arguments[1],i=this.length-1;for(void 0===e&&(e=this[i--]);0<=i;)e=t(e,this[i],i--,this);return e})}.call(Array.prototype),Function.prototype.bind||(Function.prototype.bind=function(e){var i=this;if(1<arguments.length){var n=[].slice.call(arguments,1),s=n.push;return function(){var t=n.slice(0);return 0<arguments.length&&s.apply(t,arguments),i.apply(e||this,t)}}return function(){return i.apply(e||this,arguments)}}),function(){var e=/([yMdhmsSq]+)/g,i={GMT:"toGMTString",ISO:"toISOString",UTC:"toUTCString",date:"toDateString",time:"toTimeString",locale:"toLocaleString","locale-date":"toLocaleDateString","locale-time":"toLocaleTimeString"},s={y:"getFullYear",d:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"};this.format=function(t){var n;return t?(n=i[t])?this[n]():(n=this,t.replace(e,function(t,e){var i=e.length;switch(e=e.charAt(0)){case"M":e=n.getMonth()+1;break;case"q":e=(n.getMonth()+3)/3|0;break;default:e=n[s[e]]()}return e=""+e,1===i||(i-=e.length)<=0?e:"0000".substring(0,i)+e})):this.toString()},this.addYear=function(t){return this.setFullYear(this.getFullYear()+(0|t)),this},this.addMonth=function(t){return this.setMonth(this.getMonth()+(0|t)),this},this.addDate=function(t){return this.setDate(this.getDate()+(0|t)),this},Date.create=function(t){if(t){var e=new Date(t),i=e.valueOf();if(i==i)return e;if("string"==typeof t&&(t=t.match(/\d+/g)))return i=0|t[1],new Date(t[0],0<i?i-1:0,0|t[2],0|t[3],0|t[4],0|t[5])}return null}}.call(Date.prototype),function(t){var s=t.round,i=(0).toFixed,n=new r(0);function r(t){var e,i;return t&&(t instanceof r?(i=t.d,e=t.v):(t=+t)===t&&(e=t===(0|t)?t:(i=(e=(""+t).split("."))[1])?(i=i.length,+(e[0]+e[1])):(i=0,t))),this.v=e||0,this.d=i||0,this}r.singleton=r.bind(new r(0));var e=(window.Decimal=r).prototype;e.clone=function(){var t=Object.create(e);return t.v=this.v,t.d=this.d,t},e.plus=function(t){var e,i;if(!t)return this;if(t instanceof r)i=t.d,t=t.v;else{if((t=+t)!==t)return this;t===(0|t)?i=0:(i=(t=(""+t).split("."))[1])?(i=i.length,t=+(t[0]+t[1])):i=0}return(e=this.d)>i?this.v+=t*("1e"+e)/("1e"+i):e<i?(this.d=i,this.v=this.v*("1e"+i)/("1e"+e)+t):this.v+=t,this},e.minus=function(t){return this.plus(-t)},e.mul=function(t){var e;if(!t)return this.v=this.d=0,this;if(!this.v)return this;if(t instanceof r)e=t.d,t=t.v;else{if((t=+t)!==t)return this;t===(0|t)?e=0:(e=(t=(""+t).split("."))[1])?(e=e.length,t=+(t[0]+t[1])):e=0}return t?(this.v*=t,this.d+=e):this.v=this.d=0,this},e.div=function(t){var e,i;if(!t)return this.v=this.d=0,this;if(!this.v)return this;if(t instanceof r)i=t.d,t=this.v/t.v;else{if((t=+t)!==t)return this.v=this.d=0,this;t===(0|t)?i=0:(i=(t=(""+t).split("."))[1])?(i=i.length,t=+(t[0]+t[1])):i=0}return t?(t=(e=this.d)!==i?i<e?this.v/(t*("1e"+(e-i))):this.v*("1e"+(i-e))/t:this.v/t,t=r.call(n,t),this.v=t.v,this.d=t.d):this.v=this.d=0,this},e.pow10=function(t){if(t|=0){if(!this.v)return this;if(0<t){var e=this.d;e<t?(this.d=0,this.v*="1e"+(t-e)):t===e?this.d=0:this.d-=t}else this.d-=t}return this},e.round=function(t){var e=this.d;return(t|=0)<e&&(this.v=s(this.v*("1e"+t)/("1e"+e)),this.d=t),this},e.toFixed=function(t){var e=this.d;return 0<(t|=0)?e?t<e?i.call(s(this.v*("1e"+t)/("1e"+e))/("1e"+t),t):i.call(this.v/("1e"+e),t):i.call(this.v,t):e?""+s(this.v/("1e"+e)):""+this.v},e.valueOf=function(){var t=this.d;return t?this.v/("1e"+t):this.v},e.toString=function(t){var e=this.d;return(e?this.v/("1e"+e):this.v).toString(t)},Object.defineProperty(e,"value",{get:function(){var t=this.d;return t?this.v/("1e"+t):this.v}});var o=Number.prototype;"1.11"===1.115.toFixed(2)&&(o.toFixed=function(t){return r.call(n,this).toFixed(t)}),o.round=function(t){var e=+this;if(e!=e)return 0;if(e===(0|e))return e;if(0<(t|=0)){var i=(""+e).split("."),n=i[1];return!n||n.length<=t?e:s(i[0]+n.slice(0,t)+"."+n[t])/("1e"+t)}return s(e)},t.round=function(t,e){return(+t).round(e)}}(Math),function(){var s=flyingon.create(null);function i(t,e){var i,n=s;if(t)for(i in t+=".",e)n[t+i]=e[i];else for(i in e)n[i]=e[i]}flyingon.i18ntext=function(t,e){return s[t]||(null!=e?e:t)},(flyingon.i18n=function(t,e){e&&"object"==typeof e?i(t,e):i(null,t)}).all=s,flyingon.i18n.set=function(t){s=flyingon.i18n.all=t||flyingon.create(null)}}(),flyingon.fragment("f-collection",function(){var n=Array.prototype;this.length=0,this.indexOf=this.lastIndexOf=[].indexOf,this.push=function(){return 0<arguments.length&&(this.__check_items(this.length,arguments,0),n.push.apply(this,arguments)),this.length},this.pop=function(){var t=n.pop.call(this);return t&&this.__remove_items(this.length-1,[t]),t},this.unshift=function(){return 0<arguments.length&&(this.__check_items(0,arguments,0),n.unshift.apply(this,arguments)),this.length},this.shift=function(){var t=n.shift.call(this);return t&&this.__remove_items(0,[t]),t},this.splice=function(t,e){var i=this.length;return 0<(i=2<arguments.length?((t|=0)<0&&(t+=i),t<0?t=0:i<t&&(t=i),this.__check_items(t,arguments,2),n.splice.apply(this,arguments)):n.splice.call(this,t,void 0===e?i:e)).length&&this.__remove_items(t,i),i},this.__check_items=function(t,e,i){},this.__remove_items=function(t,e){},this.children=function(){return n.slice.call(this,0)}}),flyingon.fragment("f-serialize",function(){this.deserialize_Class=!0,this.serialize=function(t){var e;(e=this.Class)&&(e=e.nickName||e.Class)&&t.writeProperty("Class",e),(e=this.__storage)&&t.writeProperties(e,this.getOwnPropertyNames(),this.__watches)},this.deserialize=function(t,e){var i,n,s=this.addBind;for(var r in e)void 0!==(i=e[r])&&(s&&"string"==typeof i&&"{"===i.charAt(0)&&(n=i.match(/^\{\{(\w+)\}\}$/))?this.addBind(r,n[1]):(n=this["deserialize_"+r])?!0!==n&&n.call(this,t,i):this.set(r,i))}}),flyingon.SerializeReader=Object.extend(function(){var s=flyingon.components,o=window.Array;function r(t,e){var i=this.callback;if((this.all||(this.all={}))[e]=t,i&&(i=i[e])){for(var n=0,s=i.length;n<s;n++)i[n](t);i[e]=t=null}}this.deserialize=function(t){return t&&("string"==typeof t&&(t=flyingon.parseJSON(t)),"object"==typeof t&&(t=t instanceof o?this.readArray(t):this.readObject(t),this.all=this.callback=null)),t},this.readArray=function(t,e){if(t){for(var i,n=[],s=0,r=t.length;s<r;s++)(i=t[s])&&"object"==typeof i&&(i=!e&&i instanceof o?this.readArray(i):this.readObject(i,e)),n.push(i);return n}return null},this.readObject=function(t,e){var i,n;return t?((n=t.Class)?((n=s[n])?i=new n:(i=new flyingon.HtmlElement).tagName=t.Class,i.deserialize(this,t),(n=t.id)&&r.call(this,i,n)):e?(i=new e).deserialize?(i.deserialize(this,t),(n=t.id)&&r.call(this,i,n)):this.readProperties(i,t):this.readProperties(i={},t),i):null},this.readProperties=function(t,e){var i;for(var n in e)(i=e[n])&&"object"==typeof i&&(i=i instanceof o?this.readArray(i):this.readObject(i)),t[n]=i},this.readReference=function(t,e){var i,n=this.all;n&&(i=n[t])?e(i):(i=this.callback)?(i[t]||(i[t]=[])).push(e):(this.callback={})[t]=[e]}},!1),flyingon.SerializeWriter=Object.extend(function(){var i=window.Array;this.serialize=function(t){if(t&&"object"==typeof t){var e=this.data=[];return t instanceof i?this.writeArray(t):this.writeObject(t),e.pop(),e.join("")}return""+t},this.write=function(t){if(null!=t)switch(typeof t){case"boolean":this.data.push(!!t,",");break;case"number":this.data.push(+t||0,",");break;case"string":this.data.push('"',t.replace(/"/g,'\\"'),'"',",");break;case"function":this.data.push('"',(""+t).replace(/"/g,'\\"'),'"',",");break;default:t instanceof i?this.writeArray(t):this.writeObject(t)}else this.data.push(null,",")},this.writeArray=function(t){var e,i=this.data;if(null!=t)if(0<(e=t.length)){i.push("[");for(var n=0;n<e;n++)this.write(t[n]);i.pop(),i.push("]",",")}else i.push("[]",",");else i.push(null,",")},this.writeObject=function(t){var e=this.data;if(null!=t){if(t instanceof Date)return void writer.push('"',t,'"',",");if(e.push("{"),t.serialize)t.serialize(this);else for(var i in t)e.push('"',i,'":'),this.write(t[i]);e.push(","===e.pop()?"}":"{}",",")}else e.push(null,",")},this.writeProperties=function(t,e,i){for(var n,s,r=this.data,o=0,a=e.length;o<a;o++)n=e[o],i&&(s=i[n])&&(s=s[0])?r.push('"',n,'":"{{',s.replace(/"/g,'\\"'),'}}"',","):(r.push('"',n,'":'),this.write(t[n]))},this.writeProperty=function(t,e,i){t&&(this.data.push('"',t,'":'),i?this.writeArray(e):this.write(e))},this.writeReference=function(t,e){if(t&&e){var i=e.id;i&&"function"==typeof i&&(i=i()),this.data.push('"',t,'":',i||"__auto_id_"+i++)}}},!1),flyingon.DataList=Object.extend(function(){var r=this.Class.all,o=this.Class.wait,n=Array.prototype;this.init=function(t,e){(this.valueField=t||"")?(this.displayField=e||t,this.keys=flyingon.create(null)):this.displayField=""},this.length=0,this.load=function(t,e){var i;return t&&0<t.length&&(n.push.apply(this,t),(i=this.keys)&&function t(e,i,n,s){for(var r=0,o=n.length;r<o;r++){var a,l=n[r];l&&null!=(a=l[i])&&(e[a]=l,s&&(a=l[s])&&0<a.length&&t(e,i,a,s))}}(i,this.valueField,t,e),this.trigger("load")),this},this.clear=function(){return this.keys&&(this.keys=flyingon.create(null)),n.splice.call(this,0),this},this.value=function(t){var e=this.valueField;return e?t?t[e]:"":t},this.text=function(t,e,i){var n=this.keys;if(n){var s,r=this.displayField;if(e){for(var o=0,a=(t=t?t.split(e):[t]).length;o<a;o++)t[o]=(s=n[t[o]])&&s[r]||"";return t.join(i||e)}if(s=n[t])return r?s[r]:s}return t},this.find=function(t){var e=this.keys;return e?e[t]:t},this.select=function(t,e){var i=this.keys;if(t=i?t.split(e||","):[t],i)for(var n=0,s=t.length;n<s;n++)t[n]=i[t[n]];return t},this.register=function(t,e){if(t){var i=r;if(!e&&i[t])throw'register name "'+t+'" has exist!';if(i[t]=this,i=o[t]){delete o[t];for(var n=0,s=i.length;n<s;n++)i[n++].call(i[n],this)}}return this},this.dispose=function(){this.keys=null,n.splice.call(this,0)}},!1).statics(function(s){var r=s.wait=flyingon.create(null),o=s.all=flyingon.create(null);s.create=function(t,e,i){var n;if(t)return t instanceof s?(e&&e.call(i,t),t):("string"==typeof t?(n=o[t])?e&&e.call(i,n):e&&(r[t]||(r[t]=[])).push(e,i):((n=(n=(t=t instanceof Array?t:null==t?[]:[t])[0])&&"object"==typeof n?function(t){var e=[];"value"in t&&(e.push("value"),"text"in t&&e.push("text"));for(var i in t)if(e.push(i),1<e.length)break;return new flyingon.DataList(i=e[0]||"value",e[1]||i)}(n):new flyingon.DataList).load(t),e&&e.call(i,n)),n)}}),flyingon.RowCollection=Object.extend._(function(){function f(t,e,i){for(var n in t.push("{"),i&&t.push(i),e)i?t.push(","):i=!0,t.push('"',n,'":'),s(t,e[n]);t.push("}")}function c(t,e){t.push("[");for(var i=0,n=e.length;i<n;i++)0<i&&t.push(","),s(t,e[i]);t.push("]")}function s(t,e){if(null!=e){var i=JSON.stringify;switch(typeof e){case"string":t.push(i(e));break;case"object":e instanceof Array?c(t,e):e instanceof Date?t.push('"',e,'"'):f(t,e);break;default:t.push(e)}}else t.push("null")}function u(t,e,i,n,s,r){var o,a,l=JSON.stringify;for(var h in t.push("{",r),e)if((o=e[h])!==(a=i[h])||n&&n.test(h)){if(null==o){t.push(',"',h,'":null');continue}switch(typeof o){case"string":t.push(',"',h,'":',l(o));break;case"object":s&&(a=s[h])?2<(a=a.toJSON(!0)).length&&t.push(',"',h,'":',a):(t.push(',"',h,'":'),o instanceof Array?c(t,o):o instanceof Date?t.push('"',o,'"'):f(t,o));break;default:t.push(',"',h,'":',o)}}t.push("}")}this.length=0,this.find=function(t){for(var e,i=new flyingon.RowCollection,n=0,s=this.length,r=0;r<s;r++)!(e=this[r])||t&&!t(e)||(i[n++]=e);return i.length=n,i},this.findAll=function(t){for(var e,i=arguments[1]||new flyingon.RowCollection,n=0,s=this.length;n<s;n++)!(e=this[n])||t&&!t(e)||(i[i.length++]=e),0<e.length&&e.findAll(t,i);return i},this.toJSON=function(t,e){var i,n,s,r,o,a=["["];t&&e&&("string"==typeof e&&(e=e.match(/\w+/g)),e=e&&0<e.length?new RegExp("^("+e.join("|")+")$","i"):null);for(var l=0,h=this.length;l<h;l++)if((i=this[l])&&(n=i.data)){switch(r?a.push(","):r=!0,i.state){case"add":s='"@":1';break;case"change":s='"@":2';break;default:s=""}t&&(o=i.originalData)?u(a,n,o,e,this.tables,s):f(a,n,s)}return a.push("]"),a.join("")}}),flyingon.fragment("f-dataset",function(){var n=Array.prototype.splice;this.load=function(t){if(0<this.length&&n.call(this,0),this.rejectChanges(),t&&0<t.length){var e=this.dataset,i=e?this:null;(e=e||this).__new_id=function t(e,i,n,s,r,o){var a,l,h=i||e,f=flyingon.DataRow,c=e.__keys1,u=e.__keys2,d=h.length,_=n.length;for(var g=0;g<_;g++)(l=new f).dataset=e,i&&(l.parent=i),l.data=a=n[g]||{},c[l.uniqueId=o++]=l,s&&(u[l.id=a[s]]=l),h[d++]=l,r&&(a=a[r])&&0<a.length&&(o=t(e,l,a,s,r,o));h.length=d;return o}(e,i,t,e.primaryKey,e.childrenName,e.__new_id++)}return this.dispatch("bind"),this},flyingon.fragment("f-collection",this),this.__check_items=function(t,e,i){var n,s,r,o,a,l,h=flyingon.DataRow,f=[],c=this.dataset,u=null;c?u=this:c=this,r=c.__new_id++,o=c.primaryKey,n=c.__keys1,s=o&&c.__keys2;for(var d=i,_=e.length;d<_;d++)(l=e[d])&&l.dataset?a=l:((a=e[d]=new h).dataset=c,a.parent=u,a.data=l=l||{}),a.state="add",n[a.uniqueId=r++]=a,o&&(s[a.id=l[o]]=a),c.__change_rows.push(a),f.push(a);c.__new_id=r,c.trigger("add","parent",u,"index",t,"rows",f)},this.__remove_items=function(t,e){var i,n,s=this.dataset,r=null;s?r=this:s=this,i=s.__keys1,s.primaryKey&&s.__keys2,s.trigger("remove","parent",r,"index",t,"rows",e);for(var o=0,a=e.length;o<a;o++)delete i[(n=e[o]).uniqueId],n.dataset=n.parent=null;n.uniqueId===s.__current_id&&s.moveTo(this[t]||this[--t])},this.removeProperty=function(t){if(t)for(var e,i,n=this.length-1;0<=n;n--)(e=this[n])&&(i=e.data)&&(delete i[t],(i=e.originalData)&&delete i[t],0<e.length&&e.removeProperty(t));return this}}),flyingon.DataRow=Object.extend._(flyingon.RowCollection,function(){var h=new flyingon.Event;this.dataset=null,this.parent=null,this.id=null,this.uniqueId=0,this.data=null,this.originalData=null,this.state="normal",this.get=function(t){var e;if(e=t&&this.data)return e[t]},this.originalValue=function(t){var e;if(t&&(e=this.originalData||this.data))return e[t]},this.set=function(t,e,i){var n,s;if(t&&void 0!==e&&(n=this.data)&&e!==(s=n[t])){var r,o,a,l=this.dataset;if(!1!==i){if((r=h).type="change",r.row=this,r.name=t,r.value=e,r.oldValue=s,!1===l.trigger(r))return this;(a=r.value)!==e&&void 0!==a&&(e=a)}if("normal"===this.state){for(o in this.originalData=a={},n)a[o]=n[o];this.state="change",l.__change_rows.push(this)}n[t]=e,l.dispatch("change",this,t)}return this},this.rollback=function(t){var e=t&&this.originalData;e&&(this.data[t]=e[t])},this.remove=function(){var t=this.parent||this.dataset;return t&&t.splice(t.indexOf(this),1),this},flyingon.fragment("f-dataset",this),this.level=function(){for(var t=0,e=this;e=e.parent;)t++;return t},this.total=function(){var t=this.length,e=t;if(0<t)for(var i=0;i<t;i++){var n=this[i];0<n.length&&(e+=n.count())}return e}}),flyingon.DataSet=flyingon.defineClass(flyingon.RowCollection,function(){this.init=function(t,e){this.primaryKey=t||"",this.childrenName=e||"",this.__new_id=1,this.__keys1=flyingon.create(null),this.__keys2=flyingon.create(null),this.__change_rows=[]},this.primaryKey="",this.childrenName="",flyingon.fragment("f-dataset",this),this.current=function(){var t=this.__current_id;return t&&this.__keys1[t]||this[0]||null},this.first=function(){var t=this[0];return t&&this.moveTo(t),this},this.previous=function(){var t=this.current(),e=t&&t.parent||this,i=t?e.indexOf(t)-1:0;return(t=e[i])&&this.moveTo(t),this},this.next=function(){var t=this.current(),e=t&&t.parent||this,i=t?e.indexOf(t)+1:0;return(t=e[i])&&this.moveTo(t),this},this.last=function(){var t=this[this.length-1];return t&&this.moveTo(t),this},this.moveTo=function(t){var e=this.__current_id,i=e&&this.__keys1[e]||null;return i!==t&&!1!==this.trigger("move","value",t,"oldValue",i)&&(this.__current_id=t&&t.uniqueId,this.dispatch("move",t)),this},this.id=function(t){return this.__keys2(t)||null},this.uniqueId=function(t){return this.__keys1[t]||null},this.getChanges=function(t){var e=new flyingon.RowCollection,i=this.__change_rows,n=i.length;if(0<n)if(t&&"string"==typeof t){for(var s,r=0,o=0;o<n;o++)(s=i[o])&&0<=t.indexOf(s.state)&&(e[r++]=s);e.length=r}else i.push.apply(e,i);return e},this.acceptChanges=function(){var t,e=this.__change_rows,i=e.length;if(0<i){for(var n=0;n<i;n++)(t=e[n])&&(t.originalData=null,t.state="normal");e.length=0}return this},this.rejectChanges=function(){var t,e,i,n=this.__change_rows,s=n.length;if(0<s){for(var r=s-1;0<=r;r--)if(t=n[r])if(i=t.originalData){for(var o in e=t.data,i)e[o]=i[o];t.originalData=null,t.state="normal",this.dispatch("change",t)}else t.remove();n.length=0}return this};var l={type:"",row:null,name:null,current:!(this.subscribe=function(t,e){if(t&&t.subscribeBind){var i,n=this.__subscribe;n?(i=n.indexOf(t),e?0<=i&&n.splice(i,1):i<0&&n.push(t)):e||(this.__subscribe=[]).push(t)}return this})};this.dispatch=function(t,e,i){var n;if(t&&(n=this.__subscribe)){var s,r=l;r.type=t,r.name=i||null,s=(r.row=e)?!!e&&e.uniqueId===this.__current_id:(r.row=this.current(),!0);for(var o=0,a=n.length;o<a;o++)(s||n[o].__subscribe_all)&&n[o].subscribeBind(this,r)}return this},this.bind=function(){var t;return!this.__current_id&&(t=this[0])&&(this.__current_id=t&&t.uniqueId),this.dispatch("bind"),this},this.expression=function(t,e,i){var n;return t&&"string"==typeof t&&("function"==typeof e?("function"!=typeof i&&(i=null),(n=this.__expression_keys||(this.__expression_keys=flyingon.create(null)))[t]=[e,i]):(n=this.__expression_keys)&&delete n[t]),this},this.getBindingValue=function(t,e){var i=this.__expression_keys;return i&&(i=i[t])?i[0].call(this,e.row):void 0!==(i=(i=e.row.data)&&i[t])?i:""},this.setBindingValue=function(t,e,i){var n=this.__expression_keys;return n&&(n=n[t])?(n=n[1])&&n.call(this,e,i||this.current()):(i||this.current()).set(t,e),this}},!1),flyingon.fragment("f-bindable",function(){this.defineProperty("dataset",null,{fn:function(t){var e=this.__dataset||null;return void 0===t?e:(e===t||this.__watch_list&&!1===flyingon.__do_watch(this,"dataset",t)||(this.__dataset=t,e&&e.subscribe(this,!0),t&&t.subscribe(this)),this)}}),this.addBind=function(t,e){if(t&&e){var i,n=this.__watches||(this.__watches={});(i=n[t])?i[0]=e:n[t]=[e]}return this},this.removeBind=function(t){var e,i=this.__watches;return i&&(e=i[t])&&e[0]&&(e[1]?e[0]="":delete i[t]),this},this.subscribeBind=function(t,e){var i=this.__watches;if(i){var n,s,r=e.name;for(var o in i)if((s=i[o])&&(n=s[0])&&(!r||n===r)){s[0]="";try{this.set(o,t.getBindingValue(n,e))}finally{s[0]=n}}}return this},this.pushBack=function(t,e){var i,n=this;do{if(i=n.__dataset)return i.setBindingValue(t,e),this}while(n=n.parent);return this}}),function(){var s=flyingon.components,r=new flyingon.SerializeReader;flyingon.__uniqueId||((flyingon.__uniqueId=flyingon.create(null)).id=1),flyingon.ui=function(t){var e,i,n=t.Class;return(i=n?s[n]:arguments[1])?e=new i:(e=new flyingon.HtmlElement).tagName=n,e.deserialize(r,t),e},flyingon.__find_id=function(t,e){for(var i,n,s=[],r=0;i=t[r++];)(n=i.__storage)&&n.id===e&&s.push(i);return s},flyingon.__find_type=function(t,e){var i,n=flyingon.components[e],s=[],r=0;if(n)for(;i=t[r++];)i instanceof n&&s.push(i);return s},flyingon.__find_class=function(t,e){for(var i,n,s=[],r=0;i=t[r++];)(n=i.__class_keys)&&n[e]&&s.push(i);return s}}(),flyingon.fragment("f-visual",function(){var e=flyingon.__uniqueId,s=flyingon.create(null);function r(t,e){for(var i,n=t.__class_keys={},s=0;i=e[s++];)n[i]=!0;t.className(e.join(" "))}function o(t,e){var i=[];for(var n in e)i.push(n);t.className(i.join(" "))}this.__selector_extend=flyingon.Query,this.eventBubble="parent",this.parent=null,this.__uniqueId=0,this.uniqueId=function(){var t=this.__uniqueId;return t||(e[this.__uniqueId=t=e.id++]=this,t)},this.__custom_get=function(t){var e,i;if(t&&0<(i=t.indexOf(":"))){if(!(e=this[t.substring(0,++i)]))throw'"'+t+'" is not a valid property!';e.call(this,t.substring(i))}return(this.__storage||this.__defaults)[t]},this.__custom_set=function(t,e){var i,n;if(t&&0<(n=t.indexOf(":"))){if(!(i=this[t.substring(0,++n)]))throw'"'+t+'" is not a valid property!';i.call(this,t.substring(n),e)}else this[t]=e,(!0===(n=s[t])||null==n&&(s[t]=flyingon.__check_attribute(t)))&&((n=this.__view_patch)?n[t]=e:this.renderer.patch(this,t,e))},this.remove=function(){var t,e=this.parent;e&&0<=(t=e.indexOf(this))&&e.splice(t,1)},this.alone=function(){var t,e=this.parent;e&&0<=(t=e.indexOf(this))&&(e.splice(t,1),this.autoDispose=!1)},this.defineProperty("id","",{set:function(t,e){var i;this.view&&((i=this.__view_patch)?i.id=e:this.renderer.patch(this,t,e))}}),this.__className="",this.class=this.defineProperty("className","",{set:function(t,e){var i;this.__className=e,this.view&&((i=this.__view_patch)?i[t]=e:this.renderer.patch(this,t,e))}}),this.hasClass=function(t){var e;return t&&(e=this.__class_keys)&&e[t]||!1},this.addClass=function(t){var e,i,n;if(t&&(e=t.match(/[\w-]+/g)))if(i=this.__class_keys){for(n=e.length;n--;)i[t=e[n]]?e.splice(n,1):i[t]=!0;0<e.length&&this.className(this.__storage.className+" "+e.join(" "))}else r(this,e);return this},this.removeClass=function(t){var e,i,n,s;if(t&&(i=this.__class_keys)&&(e=t.match(/[\w-]+/g))){for(n=e.length;n--;)i[t=e[n]]?(s=!0,delete i[t]):e.splice(n,1);s&&o(this,i)}return this},this.toggleClass=function(t){var e,i,n;if(t&&(e=t.match(/[\w-]+/g)))if(i=this.__class_keys){for(n=e.length;n--;)i[t=e[n]]?delete i[t]:i[t]=!0;o(this,i)}else r(this,e);return this},this["class:"]=function(t,e){e?this.addClass(t):this.removeClass(t)},this["#model"]=function(e,i){this.on("change",function(t){e.$set(i,t.value)})},this.__class_init=function(t,e){var i=t.module,n=t.typeName;this.renderer===e.renderer&&flyingon.renderer.bind(this,n),n&&(n=((i.className||i.moduleName)+"-"+n).toLowerCase(),(e=e.defaultClass)&&(n=e+" "+n),this.defaultClass=n)}}),flyingon.validator=function(){var n,i=flyingon.create(null),s=flyingon.i18ntext;return(flyingon.validate=function(t,e){var i,n=[];return t&&(i=t.__validate)&&i.call(t,n,e),n}).all=i,flyingon.validate.mouseover=function(t){var e=n||(n=new flyingon.ToolTip),i='<span class="f-validate-tip">'+this.__validate_text+"</span>";e.html(!0).text(i).show(this)},flyingon.validate.mouseout=function(){n&&n.close()},i.required=function(t){if(!t.length)return s("validator.required")},i.min=function(t,e){if(t<e)return s("validator.min")},i.max=function(t,e){if(e<t)return s("validator.max")},i.minLength=function(t,e){if(t.length<e)return s("validator.minLength")},i.maxLength=function(t,e){if(t.length>e)return s("validator.maxLength")},i.length=function(t,e,i){if(t.length<e||t.length>i)return s("validator.length")},i.email=function(t){if(!/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/.test(t))return s("validator.email")},i.url=function(t){if(!/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(t))return s("validator.url")},i.date=function(t){if(!/^\d{4}(\-|\/|\.)\d{1,2}\1\d{1,2}$/.test(t))return s("validator.date")},i.int=function(t){if((0|(t=+t))!==t)return s("validator.int")},i.number=function(t){if((t=+t)===t)return s("validator.number")},function(t,e){i[t]=e}}(),flyingon.fragment("f-validate",function(){var e=flyingon.validate,h=e.all,f=flyingon.i18ntext;function c(i,n,t,s){return{control:i,name:n||(n=s[0]),text:t.replace(/\{([^{}]*)\}/g,function(t,e){switch(e){case"name":return n;case"title":return(e=i.parent)?e.__error_title():t}return s&&s[e]||t})}}function u(t,e){var i=t.parent;i&&i.__validate_box?i.__set_validate(e,t):t.__set_validate(e)}this.defineProperty("required",!1,{set:function(t,e){var i=this.parent;this.__required=e,i&&i.__validate_box&&i.view&&(i=i.__find_title())&&i.renderer.patch(i,t,e)}}),this.defineProperty("validator","",{set:function(t,e){var i,n=[];if(e)for(var s=0,r=(e=e.split("|")).length;s<r;s++)(i=e[s])&&n.push(i.split(":"));this.__validator=0<n.length?n:null}}),this.__validate=function(t,e){var i=this.__required,n=this.__validator;if(i||n){var s,r,o=(this.value||this.text).call(this);if(i&&!o.length)return r=c(this,"required",f("validator.required")),!1!==e&&u(this,r),void t.push(r);if(n)for(var a=0,l=n.length;a<l;a++)if(s=n[a++],(r=h[s[0]])&&((s=s.slice(0))[0]=o,(r=r.apply(this,s))&&(r=f(r,null))))return r=c(this,"",r,s),!1!==e&&u(this,r),void t.push(r)}!1!==e&&u(this)},this.__set_validate=function(t){(this.__validate_text=t&&t.text)?(this.addClass("f-validate-error"),this.__validate_event||(this.__validate_event=!0,this.on("mouseover",e.mouseover),this.on("mouseout",e.mouseout))):this.__validate_event&&(this.removeClass("f-validate-error"),this.off("mouseover",e.mouseover),this.off("mouseout",e.mouseout))}}),flyingon.globalEval=function(t){window.execScript?window.execScript(t):window.eval(t)},flyingon.absoluteUrl=function(){var i,n=document.createElement("a"),s=location.href.replace(/[?#][\s\S]*/,"");return n.href="",n.href||(n=document.createElement("div"),i=/"/g),function(t,e){return t=t?i?(n.innerHTML='<a href="'+t.replace(i,"%22")+'"></a>',n.firstChild.href):(n.href=t,n.href):s,e?t.substring(0,t.lastIndexOf("/")+1):t}}(),flyingon.__script_src=function(){var e;if(e=document.currentScript)return e.src;try{e()}catch(t){if((e=t.fileName||t.sourceURL||t.stack||t.stacktrace)&&(e=/((?:http|https|file):\/\/.*?\/[^:]+)(?::\d+)?:\d+/.exec(e)))return e[1]}for(var t=(e=document.scripts).length-1;0<=t;t--)if("interactive"===e[t].readyState)return flyingon.absoluteUrl(e[t].src)},document.head||(document.head=document.getElementsByTagName("head")[0]),flyingon.script=-[1]&&9!==document.documentMode?function(t,e){var i=document.createElement("script");return i.onload=i.onerror=function(){i=i.onload=i.onerror=null,e&&(e.call(this),e=null)},i.async=!1,i.src=t,document.head.appendChild(i),i}:function(){var n=[],i=document.head;function s(){for(var t,e;(t=n[0])&&"loaded"===t.readyState;)n.shift(),t.onreadystatechange=null,i.insertBefore(t,i.lastChild||null),(e=n.shift())&&e.call(t)}return function(t,e){var i=document.createElement("script");return n.push(i,e),i.onreadystatechange=s,i.src=t,i}}(),flyingon.link=function(t,e,i){var n=document.createElement("link");return n.href=t,n.type=e||"text/css",n.rel=i||"stylesheet",document.head.appendChild(n),n},flyingon.style=function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e},function(o,r){var a="addEventListener";function l(t){var e,i=this.__events;if(i=i&&i[t.type]){t.target||(t.target=t.srcElement);for(var n=0,s=i.length;n<s&&(!(e=i[n])||e.disabled||(!1===e.call(this,t)&&!1!==t.returnValue&&r.dom_prevent(t),!t.cancelBubble));n++);}}function n(t){r.dom_stop(t)}o[a]||(a=!1),r.dom_prevent=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault()},r.dom_stop=function(t,e){e&&(t.returnValue=!1,t.preventDefault&&t.preventDefault()),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r.dom_once=function(e,i,n){r.dom_on(e,i,function t(){n.apply(this,arguments),r.dom_off(e,i,t)})},r.dom_on=function(t,e,i,n){if(t&&e&&i){var s,r=t.__events;if(r){if(s=r[e])return s.push(i),this}else r=t.__events={};r[e]=[i],a?t[a](e,l,n):t.attachEvent("on"+e,r.trigger||(r.trigger=function(t){function e(t){l.call(e.dom,t||o.event)}return e.dom=t,t=null,e}(t)))}},r.dom_suspend=function(t,e){var i=t&&t.__events;(i=i&&i[e])&&i.unshift(n)},r.dom_resume=function(t,e){var i=t&&t.__events;(i=i&&i[e])&&i[0]===n&&i.shift()},r.dom_off=function(t,e,i){var n,s=t&&t.__events;if(n=s&&s[e]){if(i){for(var r=n.length-1;0<=r;r--)n[r]===i&&n.splice(r,1);if(0<n.length)return}for(e in a?t.removeEventListener(e,l):t.detachEvent("on"+e,s.trigger),delete s[e],s)return;(i=s.trigger)&&(s.trigger=i.dom=null),t.__events=void 0}},r.dom_trigger=function(t,e){if(t&&e)return l.call(t,e.type?e:{type:e})}}(window,flyingon),function(f,t){var s=t.create(null),i=t.create(null),r=t.create(null);!function(t,e){var i,n,s,r=f.documentElement.style,o=[];for(var a in r)switch(a){case"cssFloat":case"styleFloat":o.push("float");break;case"cssText":break;default:o.push(a)}(a=(s=o.join(",")).match(/\b(webkit|ms|moz|o)[A-Z]/))?(a=a[1],i=(s=(s=s.replace(new RegExp("\\b"+a+"(?=[A-Z])","g"),"-"+a)).replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})).split(","),n=s.replace(new RegExp("-"+a+"-","g"),"").split(",")):i=n=o;for(var l=0,h=o.length;l<h;l++)t[s=n[l]]=o[l],e[s]=i[l]}(s,i),t.css_name=function(t,e){return(e?i:s)[t]||""},t.css_map=function(t){return t?i:s},t.css_value=function(t,e,i){var n;(n=s[e])?t.style[n]=i:(n=r[e])&&n(i,t)},t.css_fixed=function(t,e){t&&e&&!s[t]&&(r[t]=e)},t.css_fixed("user-select",function(){function i(){return!1}return function(t,e){e&&((e===f.body?f:e).onselectstart="none"===t?i:null)}}())}(document,flyingon),flyingon.__check_attribute=function(){var e=document.createElement("div");return function(t){try{return e.setAttribute(t,""),!0}catch(t){return!1}}}(),flyingon.ready=function(){var i;function n(){var t=i;if(t){t.ready=!0,flyingon.dom_off(document,"DOMContentLoaded",n),flyingon.dom_off(window,"load",n);for(var e=0;e<t.length;e++)t[e++].call(t[e]);i=null}}return"complete"!==document.readyState&&(i=[],flyingon.dom_on(document,"DOMContentLoaded",n),flyingon.dom_on(window,"load",n)),function(t,e){"function"==typeof t?i?i.push(t,e):t.call(e):i&&!i.ready&&n()}}(),flyingon.dom_id=function(t){if(t)return"#"===t.charAt(0)&&(t=t.substring(1)),document.getElementById(t)},flyingon.dom_test=function(){var i,n=document.createElement("div");return n.id="f-dom-test",n.style.cssText="position:absolute;overflow:hidden;margin:0;border:0;padding:0;left:-10px;top:0;width:0;height:0;",document.body?document.body.appendChild(n):(i=[],flyingon.ready(function(){var t,e=0;for(i=null,document.body.appendChild(n);t=this[e++];)t.call(this[e++],n)},i)),function(t,e){i?i.push(t,e):t.call(e,n)}}(),flyingon.dom_html=function(t,e,i){var n,s,r;if(t&&e)return i||(i=t.lastChild)&&(n=1)?(s=n?i:i.previousSibling,(r=i.insertAdjacentHTML)?r.call(i,n?"afterend":"beforebegin",e):(e=(r=document.createRange()).createContextualFragment(e),n?(r.setStartAfter(i),t.appendChild(e)):(r.setStartBefore(i),t.insertBefore(e,i))),s?s.nextSibling:t.firstChild):(t.innerHTML=e,t.firstChild)},flyingon.dom_drag=function(n,t,e,s,i,r,o){var a,l,h,f=t.dom||t.target||t.srcElement,c=flyingon.dom_on,u=flyingon.dom_off,d=t.clientX,_=t.clientY,g=0,p=0;function v(t){e&&(t.dom=f,e.call(n,t),f=t.dom),(a=f&&f.style)&&(l=f.offsetLeft,h=f.offsetTop),flyingon.dom_suspend(f,"click",!0),flyingon.css_value(document.body,"user-select","none"),f.setCapture&&f.setCapture(),v=null}function y(t){var e=t.clientX-d,i=t.clientY-_;(!v||(e<-2||2<e||i<-2||2<i)&&v(t))&&(s&&(t.dom=f,t.distanceX=e,t.distanceY=i,s.call(n,t),e=t.distanceX,i=t.distanceY),g=e,p=i,a&&!0!==r&&("x"!==r&&(a.left=l+e+"px"),"y"!==r&&(a.top=h+i+"px")),flyingon.dom_stop(t,!0))}function m(){flyingon.dom_resume(f,"click",!0)}c(document,"mousemove",y),c(document,"mouseup",function t(e){u(document,"mousemove",y),u(document,"mouseup",t),v||(flyingon.css_value(document.body,"user-select",""),f.setCapture&&f.releaseCapture(),setTimeout(m,0),i&&(e.dom=f,e.distanceX=g,e.distanceY=p,i.call(n,e)),n=f=null)}),!1===o&&(v(t),flyingon.dom_stop(t,!0))},flyingon.dom_align=function(t,e,i,n,s){var r=t.offsetWidth,o=t.offsetHeight,a=t.style,l=document.body.scrollLeft,h=document.body.scrollTop,f=l+e.left,c=h+e.top,u=l+e.right,d=h+e.bottom;if(!1!==s)switch(t=document.documentElement,l=window.innerWidth||t.offsetWidth||0,h=window.innerHeight||t.offsetHeight||0,i){case"left":f<r&&r<=l-u&&(i="right");break;case"top":c<o&&o<=h-d&&(i="bottom");break;case"right":r<=f&&l<u+r&&(i="left");break;default:o<=c&&h<d+o&&(i="top")}if("left"===i||"right"===i)switch(l="left"===i?f-r:u,n){case"middle":h=c+(d-c-o>>1);break;case"bottom":h=d-o;break;default:h=c}else{switch(n){case"center":l=f+(u-f-r>>1);break;case"right":l=u-r;break;default:l=f}h="top"===i?c-o:d}return a.left=l+"px",a.top=h+"px",{left:l,top:h}},flyingon.dom_overlay=function(){var n=[],s=document.createElement("div");return s.className="f-overlay",function(t,e){var i;if(t)if(!1===e){if(n[n.length-1]===t){for(t.flyingon_overlay=!1,n.pop();t=n[n.length-1];){if(s.style.zIndex=t.style.zIndex,i=t.parentNode)return void i.insertBefore(s,t);t.flyingon_overlay=!1,n.pop()}(i=s.parentNode)&&i.removeChild(s)}}else(i=t.parentNode)&&(s.style.zIndex=t.style.zIndex,i.insertBefore(s,t),t.flyingon_overlay=!0,n.push(t))}}(),function(t){var e=t.create,s=(t.pixel_unit=function(t,e){if(void 0===e)return s[t];if(s[t]!==e){var i=r;for(var n in s[t]=e,i)0<n.indexOf(t)&&(i[n]=void 0)}}).unit=e(null),r=(t.pixel=l).cache=e(null),o=e(null),n=(t.pixel_sides=function(t,e){var i=n[t];if(i)return i;if(i=a[t])return h(t,i);if((i=+t)==i||!(i=t.match(/[+-]?[\w%.]+/g)))return n[t]={left:i|=0,top:i,right:i,bottom:i};if(t.indexOf("%")<0)return n[t]=h(i,e);return h(a[t]=i,e)}).cache=e(null),a=e(null);function l(t,e){var i,n=r[t];if(void 0!==n)return n;if(n=o[t])return n*e/100+.5|0;if(n=t.match(/[+-]?\d+(.\d+)?|[\w%]+/g))if(i=n[1]){if("%"===i)return(o[t]=n[0])*e/100+.5|0;n=n[0]*(i[i.toLowerCase()]||1)+.5|0}else n=+n[0]+.5|0;else n=0;return r[t]=n}function h(t,e){var i={},n=l;switch(t.length){case 1:i.left=i.top=i.right=i.bottom=n(t[0],e);break;case 2:i.left=i.right=n(t[1],e),i.top=i.bottom=n(t[0],e);break;case 3:i.left=i.right=n(t[1],e),i.top=n(t[0],e),i.bottom=n(t[2],e);break;default:i.left=n(t[3],e),i.top=n(t[0],e),i.right=n(t[1],e),i.bottom=n(t[2],e)}return i}s.em=s.rem=12,s.ex=6,s.pc=16,s.px=1,s.pt=4/3,s.mm=(s.cm=96/2.54)/10,s.in=96}(flyingon),flyingon.dom_test(function(t){var e=flyingon.pixel_unit.unit;t.innerHTML='<div style="position:absolute;left:-10000in;"></div><div style="position:absolute;overflow:scroll;left:-10000em;top:-10000ex;width:100px;height:100px;"><div style="width:200px;height:200px;"></div></div>',e.px=1,e.pt=(e.pc=(e.in=-t.children[0].offsetLeft/1e4)/6)/12,e.mm=(e.cm=e.in/2.54)/10,t=t.children[1],e.em=e.rem=-t.offsetLeft/1e4,e.ex=-t.offsetTop/1e4,flyingon.vscroll_width=t.offsetWidth-t.clientWidth,flyingon.hscroll_height=t.offsetHeight-t.clientHeight}),flyingon.MouseEvent=flyingon.Event.extend(function(){this.init=function(t){this.original_event=t,this.type=t.type,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,(this.which=t.which)||(this.which=1&t.button?1:2&t.button?3:2),this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY}}),flyingon.KeyEvent=flyingon.Event.extend(function(){this.init=function(t){this.original_event=t,this.type=t.type,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.which=t.which||t.charCode||t.keyCode}}),flyingon.TouchEvent=flyingon.Event.extend(function(){this.init=function(t){this.original_event=t,this.type=t.type,this.touches=t.touches,this.targetTouches=t.targetTouches,this.changeTouches=t.changeTouches}}),function(c){var u=c.http=Object.create(null),d=null,_=null;function g(t){if(!t)return"";var e,i,n=[],s=encodeURIComponent;for(var r in t)if(e=t[r],r=s(r),null!==e)switch(typeof e){case"undefined":n.push(r,"=&");break;case"boolean":case"number":n.push(r,"=",e,"&");break;case"string":case"function":n.push(r,"=",s(e),"&");break;default:if(e instanceof Array)for(var o=0,a=e.length;o<a;o++)void 0===(i=e[o])?n.push(r,"=&"):n.push(r,"=",s(i),"&");else n.push(r,"=",g(e),"&")}else n.push(r,"=null","&");return n.pop(),n.join("")}function s(t,e,i,n){var s,r,o=new c.Stream,a=o.ajax=new XMLHttpRequest;if((n=n||{}).method=t,n.url=e,n.data=i,r=d){for(var l=0,h=r.length;l<h;l++)if(!1===r[l](a,n))return!1;e=n.url,i=n.data}if(/get|head|options/i.test(t)?i&&(e=e+(0<=e.indexOf("?")?"&":"?")+g(i),i=null):"application/x-www-form-urlencoded"===(s=n.dataType)&&(i=g(i)),n.CORS&&("withCredentials"in a?a.withCredentials=!0:(r=window.XDomainRequest)&&(a=new r)),a.onreadystatechange=function(){var t;if(4===this.readyState){if(this.status<300)this.status===u.redirectStatus?u.redirect():o.resolve(this.responseText||this.responseXML);else{c.toast.hide();try{o.reject(this.statusText)}catch(t){c.showMessage("错误",this.statusText,"error","ok")}}if(t=_)for(var e=0,i=t.length;e<i;e++)t[e](this,n);this.onreadystatechange=null}},a.open(t,e,!1!==n.async),s&&a.setRequestHeader("Content-Type",s),r=n.header)for(var f in r)a.setRequestHeader(f,r[f]);return a.send(i),o}u.redirectStatus=299,u.redirect=function(){location.href="index.html"},u.before=function(t){(d||(d=[])).push(t)},u.after=function(t){(_||(_=[])).push(t)},u.send=function(t,e,i,n){return s(t||"GET",e,i,n)},u.head=function(t,e,i){return s("HEAD",t,e,i)},u.get=function(t,e,i){return s("GET",t,e,i)},u.post=function(t,e,i){return s("POST",t,e,i)},u.put=function(t,e,i){return s("PUT",t,e,i)},u.delete=function(t,e,i){return s("DELETE",t,e,i)}}(flyingon),function(o){var t=o.create,a="",l=t(null),h=t(null),f=t(null),c=t(null),u={layout:"default",skin:"default",language:navigator.language||"zh-CN"};function d(t,e){if(t){switch(typeof t){case"string":return void d.require([d.path(t)],e);case"function":return void t.call(o,o)}if(t instanceof Array){for(var i,n=[],s=0,r=t.length;s<r;s++)(i=t[s])&&"string"==typeof i&&n.push(d.path(i));if(0<n.length)return void d.require(n,e)}}"function"==typeof e&&e.call(o,o)}d.__root_path="",d.__base_path="",d.base=function(t){if(void 0===t)return d.__base_path;t&&"string"==typeof t?("/"===t.charAt(0)?t=d.__root_path+t.substring(1):t.indexOf("://")<0&&(t=d.__root_path+t),"/"!==t.charAt(t.length-1)&&(t+="/")):t=d.__root_path,d.__base_path=t},d.version=function(t,e){if("string"==typeof t?a=t:e=t,e){var i=l;for(var n in e)i[n]=e[n]}},d.merge=function(t){if(t){var e,i=f;for(var n in t)if("string"==typeof(e=t[n]))i[e]=n;else for(var s=0,r=e.length;s<r;s++)i[e[s]]=n}},d.path=function(t){var e,i,n,s,r=t=f[t]||t;if(s=h[r])return s;if(0<=(n=t.indexOf("{"))&&(s=t.indexOf("}"))>n&&(i=t.substring(n+1,s))&&(s=u[i])){if(r=t.replace("{"+i+"}",s),s=h[r])return s}else e=!1;return s=(s=l[t]||a)?r+(0<=t.indexOf("?")?"&":"?")+"require-version="+s:r,"/"===t.charAt(0)?s=d.__root_path+s.substring(1):t.indexOf("://")<0&&(s=d.__base_path+s),!1!==e&&((c[i]||(c[i]={}))[s]=t),h[r]=s},d.key=function(t,e,i,n){var s=u;if(!e)return s[t];e&&s[t]!==e&&(s[t]=e,n&&n(),(s=c[t])&&d.__change(s,t,i))},o.skin=function(t,e){return d.key("skin",t,e)},o.language=function(t,e){return d.key("language",t,e)},o.require=d}(flyingon),function(f){var t,e,i=f.create,o=f.require,h=i(null),c=i(null),a=0,u=[];function d(t){for(var e,i=h,n=0,s=t.length;n<s;n++)i[e=t[n]]||(i[e]=1,a++,f.script(e,r))}function r(){var t=h,e=c,i=u,n=--a,s=this.src,r=i.indexOf(s);0<=r&&i.splice(r,1),0<i.length?(u=[],t[s]=2,i.src=s,d(i)):(t[s]=3,_(t,e,s)),n||(!function(t,e){var i,n,s=[];for(i in e)s.push(i);for(var r=s.length-1;0<=r;r--)if((n=e[i=s[r]])&&l(e,n,i))for(var o=r;0<=o;o--)if(n=e[s[o]])for(var a=n.length-1;0<=a;a--)if(n[a]&&n[a].src===i){_(t,e,i);break}}(t,e),o.wait&&(o.wait(),o.wait=null))}function _(t,e,i){var n,s,r,o=e[i];if(delete e[i],o){for(var a=o.length-1;0<=a;a--)if(0<=(r=(n=o[a]).indexOf(i))&&n.splice(r,1),!(0<n.length)&&(o.splice(a,1),(r=n.src)&&(t[r]=3,(s||(s=[])).push(r)),r=n.callback)){n.callback=null;for(var l=0,h=r.length;l<h;l++)r[l++].apply(f,r[l])}if(s)for(a=0,h=s.length;a<h;a++)_(t,e,s[a])}}function l(t,e,i){for(var n,s,r=e.length-1;0<=r;r--)if((s=e[r])&&(n=s.src)){if(n===i)return!0;if((s=t[n])&&l(t,s,i))return!0}}o.__root_path=f.absoluteUrl("/"),o.__base_path=(t=f.__script_src()||f.absoluteUrl(""),0<=(e=t.indexOf("flyingon/"))?t.substring(0,e):o.__root_path),o.__change=function(t,e,i){for(var n,s=document.getElementsByTagName("skin"===e?"link":"script"),r=s.length-1;0<=r;r--)(n=s[r])&&t[n.src||n.href]&&n.parentNode.removeChild(n);for(n in s=[],t)t[n]&&(s.push(o.path(t[n])),h[n]=0);o.require(s,i||function(){})},o.callback=function(t,e){var i=u;if(i&&0<i.length)return(i.callback||(i.callback=[])).push(t,e||[f]),!0},o.require=function(t,e){var i,n,s,r=h,o=c;i=e?[]:u;for(var a=0,l=t.length;a<l;a++)(n=t[a])&&3!==(s=r[n])&&(0<n.indexOf(".css")?s||(r[n]=3,f.link(n)):i[n]||(i[n]=!0,i.push(n),(o[n]||(o[n]=[])).push(i)));e&&(0<i.length?(i.callback=[e,[f]],d(i)):e.call(f,f))},o.done=function(t){0<a?o.wait=t:t()},f.load=function(e,i){e&&(0<e.indexOf(".js")?f.require(e,i):f.http.get(f.require.path(e)).then(function(t){t&&function(t,e,i){var s={},r=[];if(e.replace(/<(script|template|style)([^>]*)>\s*([\s\S]*?)\s*<\/\1>/gm,function(t,e,i,n){switch(e){case"template":(i=i.match(/id="([^"]+)"|'([^']+)'/))&&(s["#"+(i[1]||i[2])]=n.replace(/[\r\n]+\s*/gm,"").replace(/(['"])/gm,"\\$1"));break;case"link":(i=i.match(/href="([^"]+)"|'([^']+)'/))&&f.link(i[1]||i[2]);break;case"style":f.style(n);break;case"script":(i=i.match(/src=("[^"]"|'[^']')/))?r.push("flyingon.require(",i[1],");\n"):r.push("flyingon.defineModule(function () {\n\n\n\n",n,"\n\n\n\n});\n\n")}}),0<r.length){for(var n in r.push("\n\n//# sourceURL=",t),e=r.join(""),s)e=e.replace(new RegExp(n,"gm"),s[n]);f.globalEval(e)}f.require.done(i)}(e,t,i)}).fail(function(t){console&&console.error(t)}))}}(flyingon),function(){var o=flyingon.create(null),a=[];function l(s,t){var r=o[s];r?r instanceof Array?t&&r.push(t):t&&t(r):(a.push(s,t),2<a.length||(r=o[s]=[],t&&r.push(t),flyingon.__load_plugin=function(t){o[s]=t},flyingon.load(s,function(){var t=o[s],e=r;if(flyingon.__load_plugin=null,a.splice(0,2),t instanceof Array)throw o[s]=null,'"'+s+'" not include any flyingon.Plugin!';for(var i=0,n=e.length;i<n;i++)e[i](t);0<(e=a).length&&l(e.shift(),e.shift())})))}function h(t,e,i){var n=i.key,s=t.findByKey(n);t.__on_route||(t.on("tab-change",h.__tab_change),t.__on_route=!0),s&&s.url===e?s.selected()||(t.selectedPage(s,"route"),s[0].openPlugin(s.route.next(),!1)):(t.push(s=(new flyingon.TabPage).layout("fill")),n&&s.key(n),(new r).load(h.current=s,e,i))}h.preload=function(t){t&&(t=t.replace(/^[#!]+/g,""))&&l(t.split("#")[0])},flyingon.route=h;var r=Object.extend(function(){this.plugin="",this.load=function(i,t,e){if(i.route=this,h.__update(i.url=this.url=t),0===t.indexOf("iframe:"))t=t.substring(7);else{var n;this.parse(t),(n=e.icon)&&i.icon(n),(n=e.text)?i.text(n):i.parent.header(0),i.closable(!1!==e.closable),i.parent.selectedPage(i,"route"),i.loading(200);var s=this.next(),r=e.data;function o(t){var e;i.loading(!1),i.push(e=new t),e.loadPlugin(s,r),e.openPlugin(s,!0),i=s=r=null,flyingon.update()}(n=e.plugin)?o(n):l(this.plugin,o)}},this.parse=function(t){var e,i=t.split("#"),n=this;this.plugin=i[0];for(var s=1,r=i.length;s<r;s++)(e=i[s])&&(n=n.__next=new f(this,e))},this.next=function(){return this.__next||(this.__next=new f(this,""))},this.update=function(){for(var t,e=this.plugin,i=this;(i=i.__next)&&(t=i.value);)e+="#"+t;h.__update(e)}},!1),f=Object.extend(function(){this.value="",this.init=function(t,e){this.__root=t,this.value=e},this.change=function(t){this.value=""+t,this.__root.update()},this.clear=function(){this.__next=null,this.__root.update()},this.next=function(){return this.__next||(this.__next=new f(this.__root,""))},this.dispatch=function(t){var e;if(t)if(e=t.subscribeRoute)e.call(t,this);else for(var i=0,n=t.length;i<n;i++)(e=t[i].subscribeRoute)&&e.call(t[i],this)}},!1)}(),function(){var i,r=[];function n(t,e){for(var i=r,n=0,s=i.length;n<s;n++)i[n](t,e)}function e(){location.hash!==i&&n(location.hash.replace(/^[#!]+/g,""),!1)}this.listen=function(t){if("function"==typeof t){var e=r.hash;r.push(t),e&&(r.hash="",n(e,!1))}},this.__tab_change=function(t){if(t.target===this){var e=flyingon.route.current=t.current;e?(e.route.update(),"route"!==t.tag&&n(e.url,!0)):n(location.hash=i="",!0)}},this.__update=function(t){location.hash=i=t?"#!"+t:""},"onhashchange"in window?flyingon.dom_on(window,"hashchange",e):setTimeout(function t(){e(),setTimeout(t,200)},200)}.call(flyingon.route),function(){var i=flyingon.create(null);function a(t,e,i){for(var n,s,r;s=e[i++];)switch(s){case"]":return i;case"*":case"^":case"$":case"~":case"|":n&&(n.relation=s);break;case"=":n&&(n.relation+="=");break;case" ":case"\t":break;default:if(n){switch(s){case"undefined":s=void 0;break;case"null":s=null;break;case"true":s=!0;break;case"false":s=!1;break;default:s='"'===(r=s.charAt(0))||"'"===r?s.substring(1,s.length-1):+s}n.value=s}else n=new flyingon.Selector_property(t,s)}return i}function l(t,e,i){for(var n,s=i,r=1;r&&(n=e[i++]);)switch(n){case"(":r++;break;case")":r--}switch(n=e.slice(s,i-1).join(""),t.name){case"eq":case"gt":case"lt":n|=0}return t.value=n,i}flyingon.__parse_selector=function(t,e){return t&&"string"==typeof t?!1!==e&&(e=i[t])?e:(e=t.match(/"[^"]*"|'[^']*'|[\w-]+|[*.#\[\]:(), \t>+~=|^$]/g),i[t]=function(t,e){for(var i,n,s,r=flyingon.Selector_node,o=" ";s=t[e++];)switch(s){case"#":case".":n=new r(o,s,t[e++],n),o="";break;case"*":n=new r(o,"*","*",n),o="";break;case" ":case"\t":o||(o=" ");break;case">":case"+":case"~":o=s;break;case",":n&&((i=i||new flyingon.Selector_nodes)[i.length++]=n.top),n=null,o=" ";break;case"[":n&&!o||(n=new r(o,"*","*",n),o=""),e=a(n,t,e);break;case":":n&&!o||(n=new r(o,"*","*",n),o=""),s=new flyingon.Selector_pseudo(n,t[e++]),"("===t[e]&&(e=l(s,t,++e));break;default:n=new r(o,"",s,n),o=""}return i?(n&&(i[i.length++]=n.top),i):n&&n.top||n}(e,0)):null}}(),flyingon.Selector_node=Object.extend(function(){this.init=function(t,e,i,n){this.find=this[this.relation=t],this.filter=this[this.type=e],this.name=i,this.top=n?(t?n.next=this:n[n.length++]=this,n.top||n):this},this.relation="",this.type="",this.name="",this.length=0,this.next=null,this.select=function(t){var e,i;if((t=this.find(t))[0]){for(e=0;i=this[e++];)t=i.filter(t);t[0]&&(i=this.next)&&(t=i.select(t))}return t},this.check=function(t){for(var e,i=0;e=this[i++];)if(!(t=e.filter(t,[])).length)return t;return(e=this.next)?e.find(t):t},this[""]=function(t,e){var i=this.name;return i?flyingon.__find_type(t,i):[]},this["*"]=function(t,e){return t},this["."]=function(t,e){var i=this.name;return i?flyingon.__find_class(t,i):[]},this["#"]=function(t,e){var i=this.name;return i?flyingon.__find_id(t,i):[]},this[" "]=function(t){for(var e,i,n,s=0;i=t[s++];)0<i.length&&i.all&&(n=i.all(),e?n.push.apply(e,n):e=n);return e&&e[0]?this.filter(e,1):e||[]},this[">"]=function(t){for(var e,i=0,n=[];e=t[i++];)0<e.length&&n.push.apply(n,e);return n[0]&&this.filter(n,2)||n},this["+"]=function(t){for(var e,i=[],n=0,s=0;e=t[n++];)(e=e.nextSibling)&&(i[s++]=e);return i[0]?this.filter(i):i},this["~"]=function(t){for(var e,i=[],n=0,s=0;e=t[n++];)for(;e=e.nextSibling;)i[s++]=e;return i[0]?this.filter(i):i}},!1),flyingon.Selector_nodes=Object.extend(function(){this.type=",",this.length=0,this.select=function(t,e){var i,n,s=1;if(n=this[0])for(e=n.select(t,e);n=this[s++];)0<(i=n.select(t,[])).length&&e.push.apply(e,i);return e}},!1),flyingon.Selector_property=Object.extend(function(){this.init=function(t,e){this.name=e,t[t.length++]=this},this.type="[]",this.name="",this.relation="",this.value="",this.filter=function(t){var e,i=[],n=this.name;return n&&(e=this[this.relation])&&e.call(this,t,n,i,0),i},this[""]=function(t,e,i,n){for(var s,r=0;s=t[r++];)void 0!==s[e]&&(i[n++]=s)},this["="]=function(t,e,i,n){for(var s,r,o=this.value,a=0;s=t[a++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),r===o&&(i[n++]=s))},this["*="]=function(t,e,i,n){for(var s,r,o=this.value,a=0;s=t[a++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),0<=(r=""+r).indexOf(o)&&(i[n++]=s))},this["^="]=function(t,e,i,n){for(var s,r,o=this.value,a=0;s=t[a++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),0===(r=""+r).indexOf(o)&&(i[n++]=s))},this["$="]=function(t,e,i,n){for(var s,r,o=this.value,a=o.length,l=0;s=t[l++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),(r=""+r).lastIndexOf(o)===r.length-a&&(i[n++]=s))},this["~="]=function(t,e,i,n){for(var s,r,o=this.regex||(this.regex=new RegExp("(?:^|s+)"+this.value+"(?:s+|$)")),a=0;s=t[a++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),o.text(r)&&(i[n++]=s))},this["|="]=function(t,e,i,n){for(var s,r,o=this.regex||(this.regex=new RegExp("\b"+this.value+"\b")),a=0;s=t[a++];)void 0!==(r=s[e])&&("function"==typeof r&&(r=r.call(s)),o.text(r)&&(i[n++]=s))}},!1),flyingon.Selector_pseudo=Object.extend(function(){this.init=function(t,e){this.name=e,t[t.length++]=this},this.type=":",this.name="",this.value=0,this.filter=function(t){var e,i=[],n=this.name;return n&&(e=this[n])&&e.call(this,t,i,0),i},this.active=function(t,e,i){},this.disabled=function(t,e,i){for(var n,s=0;n=t[s++];)(n.__storage||n.__defaults).disabled&&(e[i++]=n)},this.enabled=function(t,e,i){for(var n,s=0;n=t[s++];)(n.__storage||n.__defaults).disabled||(e[i++]=n)},this.checked=function(t,e,i){for(var n,s=0;n=t[s++];)(n.__storage||n.__defaults).checked&&(e[i++]=n)},this.has=function(t,e,i){var n=this.value;return n&&(n=flyingon.__parse_selector(n)),t},this.not=function(t,e,i){},this.empty=function(t,e,i){for(var n,s=0;n=t[s++];)n.length<=0&&(e[i++]=n)},this.only=function(t,e,i){for(var n,s=0;n=t[s++];)1===n.parent.length&&(e[i++]=n)},this.first=function(t,e,i){for(var n,s=0;n=t[s++];)(n=n.parent[0])&&(e[i++]=n)},this.last=function(t,e,i){for(var n,s=0;n=t[s++];)n.nextSibling||(e[i++]=n)},this.odd=function(t,e,i){this.value;for(var n,s,r=0;n=t[r++];)1&((s=n.parent)&&s.indexOf(n))||(e[i++]=n)},this.even=function(t,e,i){this.value;for(var n,s,r=0;n=t[r++];)1&((s=n.parent)&&s.indexOf(n))&&(e[i++]=n)},this.eq=function(t,e,i){for(var n,s=this.value,r=0;n=t[r++];)((any=n.parent)&&any.indexOf(n))===s&&(e[i++]=n)},this.gt=function(t,e,i){for(var n,s=this.value,r=0;n=t[r++];)((any=n.parent)&&any.indexOf(n))>s&&(e[i++]=n)},this.lt=function(t,e,i){for(var n,s,r=this.value,o=0;n=t[o++];)((s=n.parent)&&s.indexOf(n))<r&&(e[i++]=n)}},!1),flyingon.Query=Object.extend(function(){var h=flyingon.__parse_selector;this.length=0,this.init=function(t,e){var i,n,s,r,o,a;if(e&&(a=h(t))&&(i=a.select(e))&&0<(r=i.length)){s=this.length,o=flyingon.create(null);for(var l=0;l<r;l++)(n=i[l])&&(a=n.__uniqueId||n.uniqueId())&&!o[a]&&(o[a]=!0,this[s++]=n)}},this.find=function(t){var e=new this.Class(t,this);return e.previous=this,e},this.children=function(t,e,i){},this.end=function(){return this.previous||this},this.on=function(t,e){if(t&&e)for(var i,n=0;i=this[n++];)i.on(t,e);return this},this.once=function(t,e){if(t&&e)for(var i,n=0;i=this[n++];)i.once(t,e);return this},this.off=function(t,e){for(var i,n=0;i=this[n++];)i.off(t,e);return this},this.trigger=function(t){if(t)for(var e,i=0;e=this[i++];)e.trigger.apply(e,arguments);return this},this.hasClass=function(t){var e;return!(!t||!(e=this[0]))&&e.hasClass(t)},this.addClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.addClass(t);return this},this.removeClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.removeClass(t);return this},this.toggleClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.toggleClass(t);return this},this.get=function(t){var e=t&&e[0];return e&&e.get(t)},this.set=function(t,e){if(t)for(var i,n=0;i=this[n++];)i.set(t,e);return this}},!1),function(){flyingon.rtl=!1;var a=this,r=flyingon.create(null),n=flyingon.__uniqueId,s=document.createElement("div"),o=flyingon.create(null),l=flyingon.css_map();function h(t){var e=+t;return o[t]=e==e?(0|e)+"px":t?t.replace(/(\d+)(\s+|$)/g,"$1px$2"):""}this.__scroll_html='<div class="f-scroll" style="position:static;overflow:hidden;visibility:hidden;margin:0;border:0;padding:0;width:1px;height:1px;"></div>',this.__text_name="textContent"in document.head?"textContent":"innerText",this.__auto_size=0,this.lineHeight=0,this.createView=function(t){var e,i,n=s;return this.render(i=[],t,this.__render_default),n.innerHTML=i.join(""),e=n.firstChild,n.removeChild(e),n.innerHTML="",this.mount(t,e),e},this.render=function(t,e,i){t.push("<div"),i.call(this,t,e),t.push("></div>")},(this.__render_default=function t(e,i){var n,s,r=i.__storage||i.__defaults;(s=r.id)&&e.push(' id="',s,'"'),n=i.defaultClass,(s=i.__className)&&(n+=" "+s),e.push(' class="',n,'" style="'),(s=t.cssText)&&(t.cssText="",e.push(s)),r.visible||e.push("display:none;"),e.push('"')}).cssText="",this.mount=function(t,e){var i;t.view=e,(i=t.__uniqueId)||((i=n)[i=i.id++]=t),e.flyingon_id=i,(i=t.__locate_patch)&&this.__locate_patch(t,e,i),(i=t.__style_patch)&&this.__style_patch(t,e,i),(i=t.__view_patch)&&this.__view_patch(t,e,i),(i=t.onmount)&&i.call(t,e)},this.unmount=function(t,e){var i,n=t.view;n&&((i=t.onunmount)&&i.call(t,n),t.view=null,!1!==e&&(i=n.parentNode)&&i.removeChild(n))},this.update=function(t){},this.locate=function(t){var e,i=t.view,n=i.style,s=t.__style_cache,r=0|t.offsetLeft,o=0|t.offsetTop,a=0|t.offsetWidth,l=0|t.offsetHeight,h=this.__auto_size;return(e=!s)&&(s=t.__style_cache={}),(e||r!==s.left)&&(n[flyingon.rtl?"right":"left"]=(s.left=r)+"px"),(e||o!==s.top)&&(n.top=(s.top=o)+"px"),!h&&t.__auto_width||a===s.width||(s.width=a,n.width=a+"px"),!h&&t.__auto_height||l===s.height||(s.height=l,n.height=l+="px",!t.nolineHeight&&(e=this.lineHeight)&&(1===e?i.style.lineHeight=l:e.call(this,t,i,l))),s};var f,c=[],u=[],d=[];function _(t){for(var e=t.__update_dirty=0,i=t.length;e<i;e++){var n=t[e];switch(n.__update_dirty){case 2:n.__is_locate?n.renderer.locate(n):g(n);break;case 1:_(n)}}}function g(t){t.__update_dirty=0;for(var e=t.length-1;0<=e;e--){var i=t[e];i.__update_dirty&&g(i)}}flyingon.update=function(){f&&(clearTimeout(f),f=0),flyingon.__update_patch()},flyingon.__update_delay=function(t){d.indexOf(t)<0&&(d.push(t),f||(f=setTimeout(flyingon.update,0)))},flyingon.__update_patch=function(){for(var t,e,i,n=u,s=0;t=n[s++];)(i=t.__children_patch)&&(t.__children_patch=null,t.renderer.__children_patch(t,i));for(n=c,s=0;t=n[s++];)t.__delay_patch=!1,(e=t.view)&&((i=t.__locate_patch)&&t.renderer.__locate_patch(t,e,i),(i=t.__style_patch)&&t.renderer.__style_patch(t,e,i),(i=t.__view_patch)&&t.renderer.__view_patch(t,e,i));u.length=c.length=0,function(){var t,e,i=d,n=0;for(;t=i[n++];)if(e=t.__update_dirty)if(1<e){if((e=t.view)&&(e=e.parentNode)){var s=e.clientWidth,r=e.clientHeight;t.__location_values=null,t.left=t.top=0,t.measure(s,r,s,r,r?3:1),t.renderer.locate(t)}}else _(t);i.length=0}()},flyingon.__register_delay=function(t){t.__delay_patch=!0,c.push(t),f||(f=setTimeout(flyingon.update,0))},this.style=function(t,e,i){var n=t.__style_patch;n?n[e]=i:((t.__style_patch={})[e]=i,t.view&&!t.__delay_patch&&(t.__delay_patch=!0,c.push(t),f||(f=setTimeout(flyingon.update,0))))},this.patch=function(t,e,i){var n=t.__view_patch;n?n[e]=i:((t.__view_patch={})[e]=i,t.view&&!t.__delay_patch&&(t.__delay_patch=!0,c.push(t),f||(f=setTimeout(flyingon.update,0))))},this.__children_dirty=function(t){u.push(t),f||(f=setTimeout(flyingon.update,0))},this.__locate_patch=function(t,e,i){var n,s=e.style;for(var r in t.__locate_patch=null,i)switch(r){case"border":s.borderWidth=o[n=i.border]||h(n);break;case"margin":s.margin=o[n=i.margin]||h(n);break;case"padding":(n=this.padding)?n.call(this,t,e,o[n=i.padding]||h(n)):!1!==n&&(s.padding=o[n=i.padding]||h(n));break;default:s[r]=0<(n=i[r])?n+"px":n}},this.__style_patch=function(t,e,i){var n,s=l,r=e.style;for(var o in t.__style_patch=null,i)switch(n=this[o]){case 1:r[o]=i[o];break;case 2:r[s[o]]=i[o];break;case 9:flyingon.css_value(e,o,i[o]);break;default:"function"!=typeof n?(n=s[o])?(r[n]=i[o],a[o]=n===o?1:2):(flyingon.css_value(e,o,i[o]),a[o]=9):n.call(this,t,e,i[o])}},this.__view_patch=function(t,e,i){var n,s;for(var r in t.__view_patch=null,i)null!==(s=i[r])&&((n=this[r])?"function"==typeof n&&n.call(this,t,e,s):s||0===s?e.setAttribute(r,s):e.removeAttribute(r))},this.className=function(t,e,i){var n=t.defaultClass;(t.__storage||t.__defaults).disabled&&(n+=" f-disabled"),i&&(n+=" "+i),e.className=n},this.visible=function(t,e,i){e.style.display=i?"":"none"},this.disabled=function(t,e,i){i?e.className+=" f-disabled":e.className=e.className.replace(" f-disabled","")},this.focus=function(t){t.view.focus()},this.blur=function(t){t.view.blur()},this.__do_scroll=function(t,e,i){},this.__do_focus=function(t){},this.__do_blur=function(t){},this.__render_children=function(t,e,i,n,s){for(var r,o=this.__render_default;n<s;)(r=i[n++])&&(r.view||r.renderer.render(t,r,o))},this.__mount_children=function(t,e,i,n,s,r){for(var o,a;n<s;)(o=i[n++])&&((a=o.view)?e.insertBefore(a,r):(o.renderer.mount(o,r),r=r.nextSibling))},this.__unmount_children=function(t){for(var e=t.length-1;0<=e;e--){var i=t[e];i&&i.view&&!i.parent&&i.renderer.unmount(i,!1)}},this.__measure_auto=function(t,e,i){var n=t.view;e&&(t.offsetWidth=n&&n.offsetWidth||0),i&&(t.offsetHeight=n&&n.offsetHeight||0)},this.__sync_scroll=function(t){var e=(t.view_content||t.view).style;e.overflowX=t.__hscroll?"scroll":"hidden",e.overflowY=t.__vscroll?"scroll":"hidden"},this.__children_patch=function(t,e){for(var i=0,n=e.length;i<n;i++)switch(e[i++]){case 1:this.__insert_patch(t,e[i++],e[i]);break;case 2:this.__remove_patch(t,e[++i])}},this.__insert_patch=function(t,e,i){var n=t.view_content||t.view;this.__unmount_html(t,n,i,0,i.length,n.children[e]||null)},this.__unmount_html=function(t,e,i,n,s,r){var o=[],a=r&&r.previousSibling;this.__render_children(o,t,i,n,s),o[0]&&flyingon.dom_html(e,o.join(""),r),a=a&&a.nextSibling||e.firstChild,this.__mount_children(t,e,i,n,s,a)},this.__remove_patch=function(t,e){for(var i,n,s,r=0,o=e.length;r<o;r++)(i=e[r])&&((n=i.view)&&(s=n.parentNode)&&s.removeChild(n),i.autoDispose&&!i.parent&&i.dispose())},this.__view_order=function(t,e){var i,n,s,r;(n=(e=t.view_content||e).lastChild)&&"f-scroll"===n.className&&(n=(r=n).previousSibling);for(var o=t.length-1;0<=o;o--)(i=t[o])&&(s=i.view)&&(s!==n&&e.insertBefore(s,r||null),n=(r=s).previousSibling)},this.dispose=function(t){var e,i=t.view;i&&((e=i.parentNode)&&e.removeChild(i),this.unmount(t),i.innerHTML="")},flyingon.renderer=function(t,e,i){if(!t)throw"renderer name not allow empty!";if("function"==typeof e)i=e,e="";else if("function"!=typeof i)return;e&&(e=r[e])&&(i.__parent=e),r[i.__name=t]=i},flyingon.renderer.bind=function(t,e){var i=r[e];i&&"function"==typeof i&&(i=function t(e){var i,n,s=e.__parent;s=s&&t(s)||a;if(n=e.__name)return i=flyingon.create(s),e.call(i,s),r[n]=i}(i)),i?t.renderer=i:t.renderer||(t.renderer=a)}}.call(flyingon.create(null)),flyingon.renderer("HtmlElement",function(i){var r=flyingon.create(null),o=document.createElement("div");r.div="div",r.span="span",r.input="input",this.__scroll_html="",this.render=function(t,e,i){var n,s;e.__storage||e.__defaults;(n=r[s=e.tagName])||(o.innerHTML="<"+s+"></"+s+">",r[s]=n=o.firstChild?s:"div"),t.push("<",n),i.call(this,t,e),t.push(">"),0<e.length&&e.__visible&&(e.__content_render=!0,this.__render_children(t,e,e,0,e.length)),t.push("</",n,">")},this.mount=function(t,e){i.mount.call(this,t,e),t.__content_render&&this.__mount_children(t,e,t,0,t.length,e.firstChild)},this.unmount=function(t){this.__unmount_children(t),i.unmount.call(this,t)},this.text=function(t,e,i){t.html()?e.innerHTML=i:e[this.__text_name]=i}}),flyingon.renderer("Label",function(n){this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push("></span>")},this.locate=function(t){var e=n.locate.call(this,t);if(!t.nolineHeight){var i=t.offsetHeight;e.lineHeight!==i&&(t.view.style.lineHeight=(e.lineHeight=i)+"px")}return e},this.text=function(t,e){var i=t.__storage||t.__defaults;i.html?e.innerHTML=i.text:e[this.__text_name]=i.text}}),flyingon.renderer("Icon",function(t){this.padding=!1,this.render=function(t,e,i){t.push("<a"),i.call(this,t,e),t.push('><span class="f-icon-body"></span></a>')},this.icon=function(t,e,i){e.firstChild.className="f-icon-body"+(i?" "+i:"")},this.size=function(t,e,i){var n=e.firstChild.style;n.width=n.height=i+"px",n.marginLeft=n.marginTop=(i>>1)+"px"}}),flyingon.renderer("Button",function(t){this.render=function(t,e,i){t.push('<button type="button"'),i.call(this,t,e),t.push('><span class="f-button-icon" style="display:none;width:16px;height:16px;"></span>','<br style="display:none;"/>','<span class="f-button-text"></span>','<span class="f-button-drop" style="display:none;"></span>',"</button>")},this.icon=function(t,e,i){(e=e.firstChild).style.display=i?"inline-block":"none",e.className="f-button-icon "+i},this.iconSize=function(t,e,i){var n=e.firstChild.style;n.width=n.height=i+"px"},this.vertical=function(t,e,i){e.firstChild.nextSibling.style.display=i?"":"none"},this.theme=function(t,e,i){e.setAttribute("theme",i)},this.dropdown=function(t,e,i){e.lastChild.style.display=i?"":"none"},this.text=function(t,e){var i=t.__storage||t.__defaults;e=e.lastChild.previousSibling,i.html?e.innerHTML=i.text:e[this.__text_name]=i.text}}),flyingon.renderer("LinkButton",function(t){this.lineHeight=1,this.render=function(t,e,i){t.push('<a type="button"'),i.call(this,t,e),t.push("></a>")},this.text=function(t,e){var i=t.__storage||t.__defaults;i.html?e.innerHTML=i.text:e[this.__text_name]=i.text},this.href=function(t,e,i){e.href=i}}),flyingon.renderer("File","Button",function(t){this.render=function(t,e,i){t.push('<button type="button"'),i.call(this,t,e),t.push('><span class="f-button-icon" style="display:none;width:16px;height:16px;"></span>','<br style="display:none;"/>','<span class="f-button-text"></span>','<input type="file" style="position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;"/>',"</button>")},this.accept=function(t,e,i){e.lastChild.setAttribute("accept",i)}}),flyingon.renderer("Image",function(t){this.render=function(t,e,i){t.push("<img"),i.call(this,t,e),t.push("></img>")},this.src=function(t,e,i){e.src=i},this.alt=function(t,e,i){e.alt=i}}),flyingon.renderer("Slider",function(e){function o(t){var e=t.distanceX;e<this.min?t.distanceX=this.min:e>this.max&&(t.distanceX=this.max)}function a(t){var e=this.control,i=e.view,n=e.__storage||e.__defaults,s=t.distanceX-this.min;s=(n.max-n.min)*s/this.size|0,e.view=null,e.value(s),e.view=i,e.trigger("change","value",s)}this.render=function(t,e,i){t.push("<div"),i.call(this,t,e),t.push(">",'<div class="f-slider-bar" onclick="flyingon.Slider.onclick.call(this, event)"><div></div></div>','<div class="f-slider-button" onmousedown="flyingon.Slider.onmousedown.call(this, event)"><div></div></div>',"</div>")},this.locate=function(t){e.locate.call(this,t),this.refresh(t)},flyingon.Slider.onclick=function(t){var e=flyingon.findControl(this),i=e.__storage||e.__defaults,n=e.view.offsetWidth-i.buttonSize,s=t.offsetX;void 0===s&&(s=t.clientX-e.view.getBoundingClientRect().left),s/=n,s=(i.max-i.min)*(1<s?1:s)|0,e.value(s),e.trigger("change","value",s)},flyingon.Slider.onmousedown=function(t){var e=flyingon.findControl(this),i=e.__storage||e.__defaults,n={control:e},s=n.size=e.view.offsetWidth-i.buttonSize,r=i.value*s/(i.max-i.min)+.5|0;t.dom=this,n.min=-r,n.max=s-r,flyingon.dom_drag(n,t,null,o,a,"y")},this.refresh=function(t){var e=t.__storage||t.__defaults,i=t.view,n=i.lastChild.style,s=i.offsetWidth-e.buttonSize;n.left=(e.value*s/(e.max-e.min)|0)+"px",n.width=e.buttonSize+"px"}}),flyingon.renderer("ProgressBar",function(t){this.render=function(t,e,i){t.push("<div"),i.call(this,t,e),t.push(">",'<div class="f-progressbar-back"></div>','<div class="f-progressbar-text"><span></span></div>',"</div>")},this.value=function(t,e,i){e.firstChild.style.width=e.lastChild.firstChild[this.__text_name]=i+"%"}}),flyingon.renderer("Panel",function(s){this.padding=!1,this.__auto_size=1,this.render=function(t,e,i){t.push("<div"),i.call(this,t,e),t.push(' onscroll="flyingon.__dom_scroll.call(this, event)">'),0<e.length&&e.__visible&&(e.__content_render=!0,this.__render_children(t,e,e,0,e.length)),t.push(this.__scroll_html,"</div>")},this.__render_content=function(t,e){var i=[];t.__content_render=!0,this.__render_children(i,t,t,0,t.length),i.push(this.__scroll_html),e.innerHTML=i.join(""),this.mount(t,e)},this.mount=function(t,e){s.mount.call(this,t,e),t.__content_render&&(e=t.view_content||e,this.__mount_children(t,e,t,0,t.length,e.firstChild))},this.unmount=function(t){t.view=t.view_content=null,this.__unmount_children(t),s.unmount.call(this,t)},this.__arrange=function(t){var e,i,n,s=[],r=t.__storage||t.__defaults;if(t.__auto_width)t.__hscroll=!1;else switch(r.overflowX){case"scroll":t.__hscroll=!0;break;case"hidden":t.__hscroll=!1;break;default:e=!0}if(t.__auto_height)t.__vscroll=!1;else switch(r.overflowY){case"scroll":t.__vscroll=!0;break;case"hidden":t.__vscroll=!1;break;default:i=!0}for(var o=0,a=t.length;o<a;o++)(n=t[o])&&n.__visible&&s.push(n);flyingon.arrange(t,s,e,i),this.__sync_scroll(t)},this.locate=function(t){s.locate.call(this,t),0<t.length&&!t.__content_render&&this.__render_content(t,t.view_content||t.view),1<t.__update_dirty&&(this.__arrange(t),this.__locate_scroll(t));for(var e=0,i=t.length;e<i;e++){var n=t[e];n&&n.view&&n.renderer.locate(n)}t.__update_dirty=0},this.__locate_scroll=function(t){var e,i=(t.view_content||t.view).lastChild.style;t.__scroll_cache||(t.__scroll_cache={});t.__hscroll_length!==(e=t.arrangeRight)&&(i.width=(t.__hscroll_length=e)+"px"),t.__vscroll_length!==(e=t.arrangeBottom)&&(i.height=(t.__vscroll_length=e)+"px")}}),flyingon.renderer("GroupBox","Panel",function(i){this.render=function(t,e,i){var n=e.__storage||e.__defaults,s=n.header;t.push("<div"),i.call(this,t,e),t.push(">",'<div class="f-groupbox-head f-back" class="f-border-box f-back" style="height:',s,"px;line-height:",s-1,"px;text-align:",n.align,';" onclick="flyingon.GroupBox.onclick.call(this, event)">','<span class="f-groupbox-icon" style="display:none;','"></span>','<span class="f-groupbox-text"></span>','<span class="f-groupbox-flag f-groupbox-',n.collapsed?'close"':'open"',2===n.collapsable?"":' style="display:none;"',"></span>","</div>",'<div class="f-groupbox-body" style="top:',s,"px;overflow:auto;",(n.collapsed,""),'">'),0<e.length&&e.__visible&&(e.__content_render=!0,this.__render_children(t,e,e,0,e.length)),t.push(this.__scroll_html,"</div></div>")},this.mount=function(t,e){t.view_content=e.lastChild,i.mount.call(this,t,e)},flyingon.GroupBox.onclick=function(t){var e=flyingon.findControl(this);e.collapsable()&&e.collapsed(!e.collapsed())},this.header=function(t,e,i){var n=e.firstChild.style;n.height=e.lastChild.style.top=i+"px",n.lineHeight=i-1+"px"},this.text=function(t,e,i){e=e.firstChild.firstChild.nextSibling,t.format?(i&&(i=flyingon.html_encode(i)),e.innerHTML=t.format(i)):e[this.__text_name]=i},this.icon=function(t,e,i){(e=e.firstChild.firstChild).className="f-groupbox-icon"+(i?" "+i:""),e.style.display=i?"":"none"},this.collapsable=function(t,e,i){e.firstChild.lastChild.style.display=2===i?"":"none"},this.collapsed=function(t,e,i){e.firstChild.lastChild.className="f-groupbox-flag f-groupbox-"+(i?"close":"open"),e.lastChild.style.display=i?"none":""},this.align=function(t,e,i){e.firstChild.style.textAlign=i}}),flyingon.renderer("Splitter",function(i){function n(t){var e=this[0],i=this[1],n=i?"distanceY":"distanceX",s=this[2]+(this[3]?-t[n]:t[n]),r="visible";s<4&&(s=0,r="hidden"),e.visibility(r),e[i?"height":"width"](s)}function s(){document.body.style.cursor=""}this.render=function(t,e,i){t.push("<div"),i.cssText+="cursor:ew-resize;",i.call(this,t,e),t.push(' onmousedown="flyingon.Splitter.onmousedown.call(this, event)"><div></div></div>')},this.locate=function(t){var e=t.offsetWidth>t.offsetHeight;i.locate.call(this,t),t.vertical!==e&&(t.vertical=e,t.view.style.cursor=e?"ns-resize":"ew-resize")},flyingon.Splitter.onmousedown=function(t){var e=function(t){var e=t.parent,i=t.vertical,n=(t.__storage||t.__defaults).dock;if(e&&(t=e[e.indexOf(t)-1]))return[t,i,i?t.offsetHeight:t.offsetWidth,"right"===n||"bottom"===n]}(flyingon.findControl(this));e&&(document.body.style.cursor=this.style.cursor,flyingon.dom_drag(e,t,null,n,s,!0))}}),flyingon.renderer("ListBox",function(t){function n(t,e,i){var n,s=t.storage(),r=s.checked,o=t.__selected,a=0<=i?(a=t.__data_list).value(a[i]):"";if("checkbox"===r)o&&0<=(n=o.indexOf(i))?(o.splice(n,1),l(e,i,!1,r),(n=s.value.split(s.separator)).splice(n.indexOf(a),1),s.value=n.join(s.separator)):(l(e,i,!0,r),o?o.push(i):o=[i],s.value=(n=s.value)?n+s.separator+a:a),i=o;else{if(i===o)return;0<=o&&l(e,o,!1,r),0<=i&&l(e,i,!0,r),s.value=a}t.__selected=i,t.trigger("change","value",s.value)}function l(t,e,i,n){if(t=t.children[e]){var s=" f-listbox-selected";e=t.className.indexOf(s);if(i)e<0&&(t.className+=s);else{if(!(0<=e))return;t.className=t.className.replace(s,"")}"none"!==n&&(t=t.firstChild)&&(t.checked=i)}}function P(t,e,i,n,s){var r,o,a=n.Class||"div";for(var l in t.push("<",a),n)switch(l){case"Class":case"children":break;default:null!=(o=n[l])&&(":"===l.charAt(0)&&(l=l.substring(1),o="{{index}}"===o?i:"{{item}}"===o?e:e?e[o]:""),o&&"string"==typeof o&&(o=s(o)),"text"===l?r=o:t.push(" ",l,'="',o,'"'))}if(t.push(">"),r)t.push(r);else if(o=n.children)if(o instanceof Array)for(var h=0,f=o.length;h<f;h++)P(t,e,i,o[h],s);else P(t,e,i,o,s);t.push("</",a,">")}this.render=function(t,e,i){t.push("<div"),i.call(this,t,e),t.push(' onclick="flyingon.ListBox.onclick.call(this, event)"></div>')},flyingon.ListBox.onclick=function(t){for(var e=t.target||t.srcElement;e!==this;){var i=e.getAttribute("index");if(i)return void n(flyingon.findControl(this),this,0|i);e=e.parentNode}},this.update=function(t){var e,i,n,s,r,o=[],a=t.view,l=t.__data_list,h=l.valueField,f=l.displayField,c=t.__template,u=flyingon.html_encode,d=t.__storage||t.__defaults,_=d.value,g=d.checked,p="checkbox"===g,v=p?t.__selected=[]:0,y=!p&&d.clear?1:0,m=d.columns,w=d.itemHeight,x=' style="height:'+w+"px;line-height:"+w+"px;",b=flyingon.rtl?"right:":"left:",k=0,C=l.length;for(p&&(_=_.split(d.separator||",").pair()),m<=0&&(m=C),x+=1<m?"width:"+(1e4/m|0)/100+"%;":flyingon.rtl?"left:0;":"right:0;",!c&&(c=d.template)&&("string"==typeof c&&(c=new flyingon.view.Template(c).parse(!0)),t.__template=c=c instanceof Array?c:[c]);k<C;){if(e=l[k],r=k+y,s=1<m?(0<(n=r%m)&&(n=(1e4*n/m|0)/100+"%"),(r/m|0)*w):(n=0,r*w),i=h?e?e[h]:"":e,p?(r=_[i])&&v.push(k):(r=_===i)&&(t.__selected=k),o.push('<div class="f-listbox-item',r?' f-listbox-selected"':'"',x,"top:",s+4,"px;",b,n,';" index="',k++,'">'),"none"!==g&&o.push('<input type="',g,'"',r?' checked="checked"':"","/>"),c){r=c.length;for(var T=0;T<r;T++)P(o,e,k,c[T],u)}else r=e,f&&(r=r&&r[f]||""),r&&"string"==typeof r&&(r=u(r)),o.push(r);o.push("</div>")}y&&o.push('<div class="f-listbox-item f-listbox-clear"',x,"top:0;",b,'0;" index="-1"><span>',flyingon.i18ntext("listbox.clear"),"</span></div>"),a.innerHTML=o.join("")}}),flyingon.renderer("RadioButton",function(t){this.padding=!1,this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push('><input type="radio" class="f-radio-input" name="" onchange="flyingon.RadioButton.onchange.call(this)" /></span>')},flyingon.RadioButton.onchange=function(){var t=flyingon.findControl(this);t.checked(this.checked),t.trigger("change","value",this.checked)},this.name=function(t,e,i){e.firstChild.name=i||""},this.checked=function(t,e,i){e.firstChild.checked=i},this.disabled=function(t,e,i){i?e.firstChild.setAttribute("disabled","disabled"):e.firstChild.removeAttribute("disabled")}}),flyingon.renderer("CheckBox",function(t){this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push('><input type="checkbox" class="f-checkbox-input" /></span>')},flyingon.CheckBox.onchange=function(){var t=flyingon.findControl(this);t.checked(this.checked),t.trigger("change","value",this.checked)},this.checked=function(t,e,i){e.firstChild.checked=i},this.disabled=function(t,e,i){i?e.firstChild.setAttribute("disabled","disabled"):e.firstChild.removeAttribute("disabled")}}),flyingon.renderer("TextBox",function(t){function n(t,e,i){(e=e.firstChild)&&(i?(e.value=i,t.__placeholder||(t.__placeholder=1,e.className+=" f-placeholder")):t.__placeholder&&(e.value=t.__placeholder="",e.className=e.className.replace(" f-placeholder","")))}this.lineHeight=0,this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push('><input type="',e.__type||"text",'" class="f-textbox-text f-border-box" onchange="flyingon.TextBox.onchange.call(this)"/></span>')},flyingon.TextBox.onchange=function(){var t=flyingon.findControl(this);t.value()!==this.value?(t.value(this.value),t.trigger("change","value",t.value())):this.value=t.text()},this.disabled=function(t,e,i){i?e.firstChild.setAttribute("disabled","disabled"):e.firstChild.removeAttribute("disabled")},this.readonly=function(t,e,i){i?e.firstChild.setAttribute("readonly","readonly"):e.firstChild.removeAttribute("readonly")},this.padding=function(t,e,i){e.firstChild.style.padding=i},this.color=function(t,e,i){e.firstChild.style.color=i},this.textAlign=function(t,e,i){e.firstChild.style.textAlign=i},this.value=function(t,e){var i;(i=t.__storage)&&!i.value&&(i=i.placeholder)?n(t,e,i):(t.__placeholder&&(n(t,e,""),t.__placeholder=0),e.firstChild.value=t.text())},this.__do_focus=function(t){t.__placeholder&&n(t,t.view,"")},this.__do_blur=function(t){this.value(t,t.view)},this.selectionStart=function(t,e){var i=t.view.firstChild;return void 0===e?i.selectionStart:(i.selectionStart=0|e,t)},this.selectionEnd=function(t,e){var i=t.view.firstChild;return void 0===e?i.selectionEnd:(i.selectionEnd=0|e,t)},this.select=function(t){t.view.firstChild.select()}}),flyingon.renderer("Memo",function(t){this.render=function(t,e,i){t.push("<textarea"),i.call(this,t,e),t.push(' onchange="flyingon.TextBox.onchange.call(this)"></textarea>')},flyingon.TextBox.onchange=function(){var t=flyingon.findControl(this);t.value(this.value),t.trigger("change","value",value)},this.value=function(t,e,i){e.value=t.text()}}),flyingon.renderer("TextButton","TextBox",function(t){this.lineHeight=1,this.render=function(t,e,i){var n=e.__type;t.push("<span"),i.call(this,t,e),t.push(' onmouseover="flyingon.TextButton.onmouseover.call(this)"',' onmouseout="flyingon.TextButton.onmouseout.call(this)"',' onkeydown="return flyingon.TextButton.onkeydown.call(this, event)">','<input type="text" class="f-textbox-text f-border-box" style="',flyingon.rtl?'padding-left:22px;"':'padding-right:22px;"',(e.__storage||e.__defaults).inputable?"":' readonly="readonly"',' onchange="flyingon.TextButton.onchange.call(this)"/>','<span class="f-textbox-button" style="width:20px;" onclick="flyingon.TextButton.onclick.call(this, event)">'),"up-down"===n?t.push('<span class="f-textbox-up"></span>','<span class="f-textbox-down"></span>'):t.push('<span class="f-textbox-icon ',n,'"></span>'),t.push("</span></span>")},flyingon.TextButton.onmouseover=function(){var t=flyingon.findControl(this);"hover"===t.__button&&t.renderer.button(t,t.view,"hover",1)},flyingon.TextButton.onmouseout=function(){var t=flyingon.findControl(this);"hover"===t.__button&&t.renderer.button(t,t.view,"hover")},flyingon.TextButton.onkeydown=function(t){switch(t.keyCode){case 13:case 40:return flyingon.dom_stop(t),flyingon.TextButton.onclick.call(this),!1}},flyingon.TextButton.onchange=function(){var t=flyingon.findControl(this),e=t.__to_value(this.value);t.value()!==e?(t.value(e),t.trigger("change","value",t.value())):t.renderer.value(t,t.view)},flyingon.TextButton.onclick=function(t){var e=flyingon.findControl(this),i=e.__storage||e.__defaults;i.disabled||i.readonly||("up-down"===e.__type?(i=t.target)&&i.parentNode===this&&e.__on_click(0<=i.className.indexOf("-up")):e.__on_click())},this.inputable=function(t,e,i){i?e.firstChild.removeAttribute("readonly"):e.firstChild.setAttribute("readonly","readonly")},this.icon=function(t,e,i){e.lastChild.firstChild.className="f-textbox-icon "+i},this.button=function(t,e,i,n){var s=(t.__storage||t.__defaults).buttonSize;switch(t.__button=i){case"hover":n||(s=0);break;case"none":s=0}e.firstChild.style[flyingon.rtl?"paddingLeft":"paddingRight"]=s+2+"px",e.lastChild.style.width=s+"px"}}),flyingon.renderer("Calendar",function(t){var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function r(t,e,i){var n,s,r=t.__storage||t.__defaults;if(o(t,n=r.month?e[0]+"-"+e[1]:(n=e[0]+"/"+e[1]+"/"+e[2],r.time&&(n+=" "+(s=e[3].split(":"))[0]+":"+s[1]+":"+s[2]),Date.create(n))))return i&&i(t,e),!0}function o(t,e){return t.value()!==e&&(t.value(e),t.trigger("change","value",e)),!1!==t.trigger("selected","value",e)}function a(t,e){var i,n,s,r=[],o=t.__storage||t.__defaults,a=o.min,l=o.max,h=t.oncheck;a&&(a=a.match(/\d+/g)),l&&(l=l.match(/\d+/g)),i=20*(e[4]/20|0)+1,s=(s=flyingon.i18ntext("calendar.title","Y")[0]).replace("Y",i)+" - "+s.replace("Y",i+19),b(r,e,"year",s='<span tag="to-'+(t.month()?'month">':'date">')+s+"</span>"),r.push('<div class="f-calendar-year">'),s=e[0];for(var f=0;f<4;f++){r.push('<div style="height:25%;">');for(var c=0;c<5;c++)n=i===s?"f-calendar-selected ":"",(a&&k(a,i)||l&&C(l,i)||h&&!1===h(i))&&(n+="f-calendar-disabled "),r.push('<span class="',n,'" tag="year">',i++,"</span>");r.push('<span style="width:0;height:100%;"></span></div>')}t.view.innerHTML=r.join("")}function l(t,e){var i,n,s,r=[],o=flyingon.i18ntext,a=t.__storage||t.__defaults,l=a.min,h=a.max,f=t.oncheck,c=o("calendar.month","")||w,u=e[4];(l=l&&l.match(/\d+/g))&&(l[1]||(l[1]=0)),(h=h&&h.match(/\d+/g))&&(h[1]||(h[1]=12)),b(r,e,"month",s='<span tag="'+(t.month()?'to-year">':'to-date">')+o("calendar.title","Y")[0].replace("Y",u)+"</span>"),r.push('<div class="f-calendar-month">'),s=e[1];for(var d=0;d<3;d++){r.push('<div style="height:33.3%;">');for(var _=0;_<4;_++)n=(i=4*d+_+1)===s?"f-calendar-selected ":"",(l&&k(l,u,i)||h&&C(h,u,i)||f&&!1===f(u,i))&&(n+="f-calendar-disabled"),r.push('<span class="',n,'" value="',i,'" tag="month">',c[i-1],"</span>");r.push('<span style="width:0;height:100%;"></span></div>')}r.push("</div>"),t.view.innerHTML=r.join("")}function h(t,e){var i,n,s,r,o,a,l,h,f,c=[],u=flyingon.i18ntext,d=t.__storage||t.__defaults,_=d.min,g=d.max,p=d.today||d.clear||d.time,v=t.oncheck,y=0;(_=_&&_.match(/\d+/g))&&(_[1]||(_[1]=0),_[2]||(_[2]=0)),(g=g&&g.match(/\d+/g))&&(g[1]||(g[1]=12),g[2]||(g[2]=31)),o=(r=u("calendar.title",["Y","M","M Y"]))[0].replace("Y",e[4]),a=r[1].replace("M",(u("calendar.month","")||w)[e[5]-1]),b(c,e,"date",f=(f=r[2].replace("Y",'<span tag="to-year">'+o+"</span>")).replace("M",'<span tag="to-month">'+a+"</span>")),f=u("calendar.week","")||x,c.push('<div class="f-calendar-week">');for(var m=0;m<7;m++)c.push("<span>",f[m],"</span>");c.push('</div><div class="f-calendar-line"></div>','<div class="f-calendar-body',p?" f-calendar-has-foot":"",'">'),i=(f=new Date(e[4],e[5],1)).getDay(),f.setDate(-1),n=f.getDate()+1,(f=new Date(e[4],e[5]+1,1)).setDate(-1),s=f.getDate()+1;for(m=0;m<6;m++){for(c.push('<div class="f-calendar-date" style="height:16.7%;">');y++<7;)l=7*m-i+y,o=e[4],a=e[5],r=(h=l<1?(--a<1&&(o--,a=12),l+=n,-1):s<l?(12<++a&&(o++,a=1),l-=s,1):0)?"f-calendar-dark ":"",e[2]===l&&e[1]===a&&e[0]===o&&(r+="f-calendar-selected "),(_&&k(_,o,a,l)||g&&C(g,o,a,l)||v&&!1===v(o,a,l))&&(r+="f-calendar-disabled "),1!==y&&7!==y||(r+="f-calendar-weekend"),c.push('<span class="',r,'" tag="date" offset="',h,'">',l,"</span>");y=0,c.push('<span style="width:0;height:100%;"></span></div>')}c.push("</div>"),p&&(c.push('<div class="f-calendar-foot">'),d.time&&c.push('<input type="text" class="f-calendar-time" value="',e[3],'" onchange="flyingon.Calendar.onchange.call(this)"/>'),d.clear&&c.push('<span class="f-calendar-clear" tag="clear">',u("calendar.clear","clear"),"</span>"),d.today&&c.push('<span class="f-calendar-today" tag="today">',u("calendar.today","today"),"</span>"),c.push("</div>")),t.view.innerHTML=c.join("")}function b(t,e,i,n){t.push('<div class="f-calendar-head">','<span class="f-calendar-before2" tag="',i,'-2"></span>','<span class="f-calendar-before1" tag="',i,'-1"></span>','<span class="f-calendar-title">',n,"</span>",'<span class="f-calendar-after1" tag="',i,'+1"></span>','<span class="f-calendar-after2" tag="',i,'+2"></span>',"</div>")}function k(t,e,i,n){var s=e-t[0];return s<0||(0===s&&0<i?(s=i-t[1])<0||0===s&&n<t[2]:void 0)}function C(t,e,i,n){var s=e-t[0];return 0<s||(0===s&&0<i?0<(s=i-t[1])||0===s&&n>t[2]:void 0)}this.render=function(t,e,i){t.push("<div"),i.cssText+="padding:8px;",i.call(this,t,e),t.push(' onclick="flyingon.Calendar.onclick.call(this, event)"></div>')},flyingon.Calendar.onclick=function(t){var e,i=flyingon.findControl(this),n=t.target||t.srcElement,s=i.__data;switch(n.getAttribute("tag")){case"to-year":a(i,s);break;case"to-month":l(i,s);break;case"to-date":h(i,s);break;case"date-2":s[4]-=1,h(i,s);break;case"date-1":--s[5]<1&&(s[5]=12,s[4]--),h(i,s);break;case"date+1":12<++s[5]&&(s[5]=1,s[4]++),h(i,s);break;case"date+2":s[4]+=1,h(i,s);break;case"month-2":s[4]-=10,l(i,s);break;case"month-1":s[4]-=1,l(i,s);break;case"month+1":s[4]+=1,l(i,s);break;case"month+2":s[4]+=10,l(i,s);break;case"year-2":s[4]-=100,a(i,s);break;case"year-1":s[4]-=20,a(i,s);break;case"year+1":s[4]+=20,a(i,s);break;case"year+2":s[4]+=100,a(i,s);break;case"today":e=new Date,s[0]=s[4]=e.getFullYear(),s[1]=s[5]=e.getMonth()+1,s[2]=e.getDate(),r(i,s,h);break;case"clear":s[0]=s[1]=s[2]=0,o(i,null)&&h(i,s);break;case"year":s[0]=s[4]=+n.innerHTML,(i.month()?l:h)(i,s);break;case"month":s[0]=s[4],s[1]=s[5]=+n.getAttribute("value"),i.month()?r(i,s,l):h(i,s);break;case"date":n.className.indexOf("f-calendar-disabled")<0&&((e=s[5]+(0|n.getAttribute("offset")))<1?(e=12,s[4]--):12<e?(e=1,s[4]++):s[4],s[0]=s[4],s[1]=s[5]=e,s[2]=+n.innerHTML,r(i,s,h))}},flyingon.Calendar.onchange=function(){var t=flyingon.findControl(this);this.value=t.__data[3]=flyingon.Time.check(this.value)},this.update=function(t){var e,i=t.__storage||t.__defaults,n=i.value;t.__data=n=[n?n.getFullYear():0,n?n.getMonth()+1:0,n?n.getDate():0,"",(e=n||new Date).getFullYear(),e.getMonth()+1],i.time&&!i.month&&(n[3]=function(t){for(var e,i=[],n=24,s=0;s<3;s++)(e=t[s])?n<e?e=n:1===(e=""+e).length&&(e="0"+e):e="00",i.push(e),n=60;return i.join(":")}([e.getHours(),e.getMinutes(),e.getSeconds()])),i.month?l(t,n):h(t,n)}}),flyingon.renderer("Box",function(i){this.__scroll_html="",this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push(">"),this.__render_children(t,e,e,0,e.length),t.push("</span>")},this.mount=function(t,e){i.mount.call(this,t,e),this.__mount_children(t,e,t,0,t.length,e.firstChild)},this.unmount=function(t){this.__unmount_children(t),i.unmount.call(this,t)}}),flyingon.renderer("Title",function(t){this.lineHeight=1,this.render=function(t,e,i){t.push("<span"),i.call(this,t,e),t.push('><span class="f-required"',e.__check()?"":' style="display:none;"',">*</span><span></span></span>")},this.text=function(t,e,i){var n=t.__storage||t.__defaults;n.html?e.lastChild.innerHTML=n.text:e.lastChild[this.__text_name]=n.text},this.required=function(t,e,i){e.firstChild.style.display=i?"":"none"}}),flyingon.renderer("Hint","Label",function(t){this.lineHeight=1,this.render=function(t,e,i){var n=e.type();"text"!==n&&(n+=" f-hint-icon"),t.push("<span"),i.call(this,t,e),t.push('><span class="f-hint-',n,'"></span></span>')},this.type=function(t,e,i){var n="f-hint-"+i;e=e.firstChild,"text"!==i&&(n="f-hint-icon "+n,e.innerHTML=""),e.className=n},this.text=function(t,e,i){e.firstChild.innerHTML=i}}),flyingon.renderer("Tree",function(n){this.__scroll_html="",this.render=function(t,e,i){var n=e.__storage||e.__defaults,s=" f-tree-theme-"+n.theme;t.push("<div"),n.checked||(s+=" f-tree-no-check"),n.icon||(s+=" f-tree-no-icon"),e.defaultClass+=s,i.call(this,t,e),t.push(' onclick="flyingon.Tree.onclick.call(this, event)">'),e.__visible&&(e.__content_render=!0,0<(s=e.length)&&this.__render_children(t,e,e,0,s)),t.push("</div>")},this.__render_children=function(t,e,i,n,s){for(var r,o="line"===(e.__storage||e.__defaults).theme,a=e.format,l=e[e.length-1];n<s;)(r=i[n++])&&(r.view||r.renderer.render(t,r,a,0,r===l,o))},flyingon.Tree.onclick=function(t){for(var e=flyingon.findControl(this),i=t.target||t.srcElement,n=flyingon.findControl(i);i&&i!==this;)switch(i.getAttribute("tag")){case"folder":return void e[n.expanded?"collapse":"expand"](n);case"check":return void n.checked(!n.checked());case"node":return void(!1!==e.trigger("node-click","node",n)&&e.current(n,!1));default:i=i.parentNode}},this.mount=function(t,e){var i=t.__current;n.mount.call(this,t,e),t.__content_render&&this.__mount_children(t,e,t,0,t.length,e.firstChild),i&&i.view&&setTimeout(function(){t.renderer.scrollTo(t,i)},500)},this.theme=function(t,e,i){e.className=e.className.replace(/f-tree-theme-\w+/,"f-tree-theme-"+i)},this.checked=function(t,e,i){var n=e.className;i?n=n.replace(" f-tree-no-check",""):n+=" f-tree-no-check",e.className=n},this.icon=function(t,e,i){var n=e.className;i?n=n.replace(" f-tree-no-icon",""):n+=" f-tree-no-icon",e.className=n},this.scrollTo=function(t,e){var i,n=t.view,s=e.view,r=n.scrollTop,o=s.offsetTop;o<r?n.scrollTop=o:o>r+(i=n.clientHeight)&&(n.scrollTop=o+s.offsetHeight-i)}}),flyingon.renderer("TreeNode",function(n){function o(t,e,i){for(var n=t.firstChild.lastChild;n;){if(n.getAttribute("tag")===e)return i&&(n.className=i),n;n=n.previousSibling}}this.render=function(t,e,i,n,s,r,o){var a,l,h,f=flyingon.html_encode,c=e.__storage||e.__defaults;l=e.defaultClass,(h=e.__className)&&(l+=f(h)),t.push('<div class="',l,'">','<div class="f-tree-node',s&&r?" f-tree-node-last":"",e.__current?" f-tree-node-current":"",(h=c.className)?" "+f(h):"",(h=c.id)?'" id="'+f(h)+'"':"",'" tag="node">'),o&&t.push(o),(h=c.delay)&&(c.delay=!1),h||0<e.length?h||!e.expanded?(a="f-tree-icon-close",t.push('<span class="f-tree-folder f-tree-close" tag="folder"></span>')):(a="f-tree-icon-open",t.push('<span class="f-tree-folder f-tree-open" tag="folder"></span>')):(a="f-tree-icon-file",t.push('<span class="f-tree-file"></span>')),l=(l=c.text)?f(l):"",i&&(l=i(e,l)),t.push('<span class="f-tree-check f-tree-',c.checked?"checked":"unchecked",'" tag="check"></span>','<span class="f-tree-icon ',c.icon||a,'" tag="icon"></span>','<span class="f-tree-text" tag="text">',l,"</span></div>",'<div class="f-tree-list',s&&r?" f-tree-list-last":"",'">'),e.expanded&&0<e.length&&this.__render_children(t,e,e,0,e.length,i,++n,s,r),t.push("</div></div>")},this.__render_children=function(t,e,i,n,s,r,o,a,l){var h,f,c;if(e.__content_render=!0,void 0===r&&(h=e.parent)){o=1,a=h[h.length-1]===e;do{if(!h.isTreeNode){r=h.format||null,l="line"===(h.__storage||h.__defaults).theme;break}o++}while(h=h.parent)}for(f='<span class="f-tree-space"'+(f=a&&l?' style="background:none;"':"")+"></span>",1<o&&(f=new Array(o+1).join(f)),c=i.length;n<s;)(h=i[n++])&&(h.view&&h.renderer.unmount(h),h.renderer.render(t,h,r,o,n===c,l,f))},this.mount=function(t,e){var i=t.view_content=e.lastChild;n.mount.call(this,t,e),t.__content_render&&this.__mount_children(t,e,t,0,t.length,i.firstChild)},this.checked=function(t,e,i){o(e,"check","f-tree-check f-tree-"+(i=i?"checked":t.checkedChildren?"checked2":"unchecked"))},this.icon=function(t,e,i){o(e,"icon","f-tree-icon "+i)},this.text=function(t,e,i){var n;if(e=o(e,"text")){for(;(n=t.parent)&&n.isTreeNode;)t=n;(n=t&&t.format)?e.innerHTML=format(flyingon.html_encode(i)):e[this.__text_name]=i}},this.expand=function(t){var e,i=t.view,n=t.__storage,s=o(i,"folder"),r=n&&n.icon?null:o(i,"icon");0<t.length?(s&&(s.className="f-tree-folder f-tree-open"),r&&(r.className="f-tree-icon f-tree-icon-open"),i=i.lastChild,t.__content_render||(this.__render_children(e=[],t,t,0,t.length),i.innerHTML=e.join(""),this.__mount_children(t,i,t,0,t.length,i.firstChild)),i.style.display=""):(s&&(s.className="f-tree-file",s.removeAttribute("tag")),r&&(r.className="f-tree-icon f-tree-icon-file"),i.lastChild.style.display="none")},this.collapse=function(t){var e=t.view;e.lastChild.style.display="none",o(e,"folder","f-tree-folder f-tree-close"),(e=o(e,"icon"))&&(e.className=e.className.replace("f-tree-icon-open","f-tree-icon-close"))},this.current=function(t,e){var i=t.view.firstChild,n=i.className,s=" f-tree-node-current";e?n.indexOf(s)<0&&(i.className+=s):i.className=n.replace(s,"")}}),flyingon.renderer("GridColumn",function(t){var a=this.__render_default;function g(t,e,i,n,s,r,o){i.row=null,i.column=e,i.defaultClass+=" f-grid-cell",a.cssText="left:"+n+"px;top:"+s+"px;width:"+r+"px;height:"+o+"px;line-height:"+o+"px;",i.renderer.render(t,i,a)}function p(t,e,i,n){for(var s,r,o,a=0;e--&&(s=t[e]).__visible&&1<(r=s.__cells).length&&(o=r[i])&&o.text&&o.text()===n;)a+=s.__size;return a}this.render=function(t,e,i,n){var s=e[i],r=s.__cells;r[1]?function(t,e,i,n,s){var r,o,a,l,h,f=e[i],c=e[i-1],u=n.length,d=0;c&&c.__visible&&(c=c.__cells);for(var _=0;_<u;_++)l=n[_],o=f.__start,a=f.__size,c&&1<c.length&&(h=p(e,i,_,l.text()))&&(o-=h,a+=h),r=0<(r=l.__height)?r:s/(u-_)|0,g(t,e[i],l,o,d,a,r),d+=r,s-=r}(t,e,i,r,n):g(t,s,r[0]||s.__set_title("")[0],s.__start,0,s.__size,n)},this.mount=function(t,e,i,n){var s,r,o=t.grid,a=t.__cells,l=0;for(t.view=!0;(s=a[l++])&&(r=e.firstChild);)s.parent=o,s.renderer.mount(s,r),i.insertBefore(r,n)},this.unmount=function(t,e){var i,n=0;for(t.view=!1,e||(e=t.__cells);i=e[n++];)i.view&&(i.parent=null,i.renderer.unmount(i,!1))},this.readonly=function(t,e){},this.__resize_height=function(t,e){var i,n,s,r,o,a=t.__cells,l=a.length;if(1<l)for(i=o=0;n=a[i];)r=0<(r=n.__height)?r:e/(l-i)|0,(s=n.view.style).top=o+"px",s.height=s.lineHeight=r+"px",o+=r,e-=r,i++;else(s=a[0].view.style).height=s.lineHeight=e+"px"},this.__update=function(t,e,i){var n,s,r,o,a,l,h=t[e],f=h.__cells,c=0<f.length&&t[e-1],u=0;for(c&&c.__visible&&(c=c.__cells);n=f[u];)o=h.__start,a=h.__size,c&&1<c.length&&(l=p(t,e,u,n.text()))&&(o-=l,a+=l),(r=(s=n.view).style).left=o+"px",r.width=a+"px",i.appendChild(s),u++}}),flyingon.renderer("GridRow",function(t){var m=1,h=this.__render_default;function w(t,e,i,n,s,r,o){for(var a=0;i--;){var l=e[i];if(l.__show_tag!==o||l.data[n]!==s)break;a+=r}return t.__merge=a}function s(t,e,i){var n;if(i)for(var s in t)(n=t[s])&&(n.view.className+=e);else for(var s in t)(n=t[s])&&(n.view.className=n.view.className.replace(e,""))}this.show=function(t,e,i,n,s,r,o,a,l,h){var f,c,u,d,_,g,p,v=i[n],y=v.__cells;for(y||(v.view=!0,y=v.__cells={});r<o;)(d=s[r])&&d.__visible&&(_=d.__name||(d.__name="__column_"+m++),g=d.__merge,(f=y[_])?(g=1&g&&w(f,i,n,_,v.data[_],l,h)||0,d.__tree_cell&&(t.appendChild(c=v.view),(u=c.style).top=(f.__top=a)-g+"px",u.left=d.__start+"px",u.height=l+g+"px"),t.appendChild(c=f.view),(p=d.onshowing)&&p.call(d,f,v),(u=c.style).top=(f.__top=a)-g+"px",u.left=d.__start+"px",u.width=d.__size+"px",u.height=u.lineHeight=l+g+"px"):(f=this.render(e,v,d,a,l))&&(f.__top=a,y[_]=f,1&g&&0<n&&w(f,i,n,_,v.data[_],l,h))),v.__show_tag=h,r++},this.render=function(t,e,i,n,s){var r,o=i.createControl(e,i.__name),a=i.__size,l=[];return(r=i.onrender)&&r.call(i,o,e,i),o.row=e,(r=(o.column=i).onshowing)&&r.call(i,o,e),i.__tree_cell&&(r=this.render_tree(t,e,i,n,s,o),l.push("padding-",flyingon.rtl?"right":"left",":",r,"px;")),l.push("left:",i.__start,"px;top:",n,"px;width:",a,"px;height:",s,"px;"),(r=i.__align)&&l.push("text-align:",r,";"),l.push("line-height:",s+"px;"),h.cssText=l.join(""),r=" f-grid-cell",e.__checked&&(r+=" f-grid-checked"),e.__current&&(r+=" f-grid-current"),o.defaultClass+=r,o.renderer.render(t,o,h),o},this.render_tree=function(t,e,i,n,s,r){var o=0<e.length?e.expanded?"expand":"collapse":"file",a=i.__tree_icon,l=16;for(a&&(l+=16,(a=i.grid.onicon)&&(a=a.call(i.grid,e,i)),a||(a="f-grid-icon-"+o));e=e.parent;)l+=16;return t.push('<div class="f-grid-tree" style="',"left:",i.__start,"px;top:",n,"px;width:",l,"px;height:",s,"px;line-height:",s,'px;">','<span class="f-grid-',o,'" tag="',o,'"',"></span>",'<span class="f-grid-icon',a?" "+a:'" style="display:none;','"></span>',"</div>"),l+2},this.mount=function(t,e,i,n,s,r,o,a){for(var l,h,f,c,u,d=e.grid,_=e.__cells;n<s;)(l=i[n++])&&(u=l.__name)&&(h=_[u])&&((f=h.view)?a=f.nextSibling||null:(f=t.firstChild)&&(l.__tree_cell&&(o.insertBefore(f,a),(e.view=f).row=e,f.column=l,f=t.firstChild),o.insertBefore(f,a),(u=h.__merge)&&((c=f.style).top=h.__top-u+"px",c.height=c.lineHeight=r+u+"px"),h.parent=d,h.renderer.mount(h,f)));return a},this.unmount=function(t){var e,i=t.__cells;for(var n in t.view=null,i)(e=i[n])&&(e.parent=e.row=e.column=null,e.renderer.unmount(e,!1),i[n]=null)},this.checked=function(t,e,i){s(t.__cells," f-grid-checked",i)},this.current=function(t,e,i){if(s(t.__cells," f-grid-current",i),i){var n=t.grid;n.__click_move?n.__click_move=0:n.view_scroll.scrollTop=t.__show_index*n.rowHeight()}}}),flyingon.renderer("GroupGridRow","GridRow",function(i){var f=flyingon.round,c=this.__render_default;this.render=function(t,e,i,n,s){var r,o,a=new flyingon.Label,l=i.__storage,h=l&&l.summary;return h&&(o=l.name)&&(r=i.__summary_fn||(i.__summary_fn=flyingon.Grid.summary(h)),o=e.compute(i,o,r[0],r[1]),o=f(o,l.precision,!0),o=(r=i.onsummary)?r.call(i,e,o,h):h+"="+o,a.text(o)),a.defaultClass+=" f-grid-group-row",c.cssText="left:"+i.__start+"px;top:"+n+"px;width:"+i.__size+"px;height:"+s+"px;line-height:"+s+"px;",a.renderer.render(t,a,c),a},this.unmount=function(t){var e=t.view_group;i.unmount.call(this,t),e&&(e.row=t.view_group=null)}}),flyingon.renderer("Grid",function(s){var l=document.createElement("div"),r=document.createElement("div"),v=this.__text_name,_=!1,y=document.createDocumentFragment(),m=document.createElement("div");function o(t){this.view_scroll.scrollTop-=100*t.wheelDelta/120,flyingon.dom_stop(t)}function a(t){var e,i,n=t.target;if(n.__column_check)n.row.checked(!n.row.__checked);else for(;e=n.parent;){if(i=e.__change_value){i.call(e,n);break}n=e}}function h(t){var e=t.column,i=e.__cells;if(1===i.length)return 1;for(var n=e.grid.__columns,s=i.indexOf(t),r=i[s].text(),o=1,a=n.length;a--&&n[a]!==e;);for(;a--&&(i=n[a].__cells)&&1<i.length&&(t=i[s])&&t.text&&t.text()===r;)o++;return o}function e(){var t,e,i,n,s=document.activeElement;s&&(t=flyingon.findControl(s))&&(c(e=t.parent,t),i=(s=t.view).parentNode,((n=s.offsetLeft)<e.scrollLeft||n+s.offsetWidth>i.offsetWidth)&&(e.view_scroll.scrollLeft=t.column.__start),s.offsetTop+s.offsetHeight>i.offsetHeight&&(e.view_scroll.scrollTop=s.offsetTop-10))}function f(t,e,i,n){if(i.className="f-grid-"+n,i.setAttribute("tag",n),(i=i.nextSibling)&&0<=i.className.indexOf("f-grid-icon")){var s=t.onicon;s&&(s=s.call(t,e,i.parentNode.column)),s||(s="f-grid-icon-"+n),i.className="f-grid-icon "+s}}function c(t,e){var i,n=e.column;if(n&&(n.focused()&&(i=t.__focus_cell)!==e&&(i&&(i=i.view)&&(i.className=i.className.replace(" f-grid-cell-focus","")),(t.__focus_cell=e)&&(e.view.className+=" f-grid-cell-focus")),t.__current!==e.row)){var s=t.dataset();t.__click_move=1,s.moveTo(s.uniqueId(e.row.id))}}function u(t){var e,i,n=t.cell;n&&(e=n.view)&&((i=e.parentNode)?(t.style.left=i.offsetLeft+e.offsetLeft+e.offsetWidth-18+"px",t.style.top=e.offsetTop+(e.offsetHeight-16>>1)+"px"):t.style.left="-100px")}function d(){_=!0}function g(t){var e=this.size;e+t.distanceX<1&&(t.distanceX=1-e)}function p(t){var e=this.grid,i=this.column,n=this.size+t.distanceX;_=!1,e.view_head.style.cursor="",e.view.removeChild(r),i.__size!==n&&(i.storage().size=n,(n=e.oncolumnresize)&&n.call(e,i,storage.__size,this.size),e.update(!0))}function w(t,e,i,n,s){var r,o=flyingon.findControl(t);i?n=i.name():n&&(i=o.__columns.find(n))&&(r=!0),i&&i.draggable()&&flyingon.dom_drag({grid:o,column:i,dom:e,name:n,index:i.__index-s+1,count:s,from:r},event,x,b,k,"",!0)}function x(t){var e,i,n=this.grid,s=n.__storage||n.__defaults,r=this.dom,o=this.thumb=l,a=this.count;if(this.group=i=s.group,this.header=s.header,i=n.view.firstChild.getBoundingClientRect(),this.left=i.left,this.top=i.top,this.from)r.style.cssText="position:absolute;z-index:2;left:"+r.offsetLeft+"px;top:"+r.offsetTop+"px;",this.groups=(i=n.__groups).join(" "),i.splice(i.indexOf(this.name),1),n.__storage.groups=" ";else{for((e=(i=r.cloneNode(!0)).style).borderWidth="1px",e.left=r.offsetLeft+r.parentNode.offsetLeft+"px",e.top=r.offsetTop+r.parentNode.parentNode.offsetTop+"px",r=i,i=n.__columns;a--;)i[this.index+a].__visible=!1;n.update(!0)}(t.dom=r).style.zIndex=2,(i=n.view.firstChild).appendChild(o),i.appendChild(r),_=!0}function b(t){var e,i=this.grid,n=this.thumb.style,s=t.clientX-this.left,r=t.clientY-this.top;(this.to=this.name&&r<this.group)?(r=4,e=this.group-8,s=i.__groups?function(t,e,i){var n=0,s=0,r=0;e=e.firstChild;for(;e;){if(s=e.offsetLeft,r=e.offsetWidth,i<s+(r>>1))return t.at=n,s-4;if(i<s+r)break;n++,e=e.nextSibling}return t.at=n,s+r+4}(this,i.view_group,s):(this.at=0,8)):(s=function(t,e,i){var n,s=e.__columns,r=s.__locked,o=r[0],a=s.length,l=0,h=0,f=0;o&&r[2]>i?(a=o,o=0):r[1]&&i>(l=s.__arrange_size-r[3])?(o=a-r[1],i+=l):(l=0|-e.scrollLeft,i-=l);for(;o<a;)if((n=s[o++]).__visible){if(h=n.__start,f=n.__size,i<h+(f>>1))return t.at=o-1,h+l;if(i<h+f)break}return t.at=o,h+f+l}(this,i,s),r=this.group,e=this.header),n.left=s-11+"px",n.top=r+"px",n.height=e+"px"}function k(t){var e,i,n,s,r,o,a,l=this.grid,h=l.__columns,f=this.index,c=this.count,u=[];if(_=!1,(e=this.thumb)&&e.parentNode.removeChild(e),(e=t.dom)&&e.parentNode.removeChild(e),this.to){for(var d=0;d<c;d++)u.push(h[f+d].name());(e=(e=l.__groups)?(e.splice(this.at,0,u.join(" ")),e.join(" ")):u.join(" "))===this.groups?(l.__groups=e.split(" "),l.storage().groups=e,l.renderer.__render_group(l)):l.groups(e)}else{this.from&&l.groups(l.__groups.join(" "));for(d=0;d<c;d++)h[f+d].__visible=!0;this.at!==f&&(i=h,n=this.at,s=f,r=c,(a=(o=[].splice).call(i,s,r||(r=1)))[0]&&(s<n&&(n-=r),a[1]?(a.unshift(n,0),o.apply(i,a)):o.call(i,n,0,a[0]))),l.update(!0)}}function C(t,e,i,n,s){var r=t.firstChild,o=r.style;o[flyingon.rtl?"right":"left"]=-s+"px",(o=(r=r.nextSibling).style).display=0<i?(o.width=i+"px",""):"none",(o=(r=r.nextSibling).style).display=0<e?(o.width=e+"px",""):"none",(o=r.nextSibling.style).display=0<n?(o.width=n+"px",""):"none"}function T(t,e){var i,n=t.view_body,s=document.activeElement;if(e){for(i=s;i=i.parentNode;)if(i===n)return T.dom=s,void n.focus()}else(i=T.dom)&&(s===n?i.focus():T.dom=null)}this.padding=!1,l.innerHTML='<div class="f-grid-drag-body"><div></div></div>',l.className="f-grid-drag",l.style.width="20px",r.className="f-grid-resize-thumb",this.render=function(t,e,i){var n=e.__storage||e.__defaults,s=n.group,r=n.header,o=s+r,a='<div class="f-grid-center"></div><div class="f-grid-right" style="display:none;"></div><div class="f-grid-left" style="display:none;"></div><div class="f-grid-group" style="display:none;"></div>';t.push("<div"),i.call(this,t,e),t.push(' onclick="flyingon.Grid.onmouseup.call(this, event)" onkeydown="flyingon.Grid.onkeydown.call(this, event)"',' onmousedown="flyingon.Grid.onmousedown.call(this, event)">','<div class="f-grid-head">','<div class="f-grid-group-box" style="height:',s,"px;line-height:",s,"px;",s<2?"display:none;":"",'"></div>','<div class="f-grid-column-head" style="height:',r,"px;",r<2?"display:none;":"",'" onmouseover="flyingon.Grid.onmouseover.call(this, event)">',a,'<div class="f-grid-resize" style="display:none;" onmousedown="flyingon.Grid.resize.call(this, event)"></div>','<div class="f-grid-sort" style="left:-100px;"></div>',"</div>",'<div class="f-grid-filter" style="display:none;">',a,"</div>","</div>",'<div class="f-grid-scroll" style="top:',o,'px;" onscroll="flyingon.Grid.onscroll.call(this)">',this.__scroll_html,"</div>",'<div class="f-grid-body" style="top:',o,'px;" tabindex="0">','<div class="f-grid-middle">',a,"</div>",'<div class="f-grid-bottom" style="display:none;">',a,"</div>",'<div class="f-grid-top" style="display:none;">',a,"</div>","</div>","</div>")},this.mount=function(t,e){var i,n=e.firstChild;t.view_group=i=n.firstChild,t.view_head=i=i.nextSibling,t.view_resize=(t.view_sort=i.lastChild).previousSibling,t.view_filter=i.nextSibling,t.view_scroll=i=n.nextSibling,t.view_body=i.nextSibling,s.mount.call(this,t,e),t.on("mousewheel",o),t.on("change",a)},this.unmount=function(t){s.unmount.call(this,t),t.view_group=t.view_head=t.view_resize=t.view_sort=t.view_filter=t.view_scroll=t.view_body=null},flyingon.Grid.onkeydown=function(t){9===t.keyCode&&setTimeout(e,0)},flyingon.Grid.onmousedown=function(t){var e,i,n,s=t.target||t.srcElement;if(n=s.getAttribute("column-name"))w(this,s,null,n,1);else for(e=flyingon.findControl(this),i=flyingon.findControl(s);i;){if(i.parent===e){i.row?i.__column_check||c(e,i):(n=i.column)&&w(this,s,n,"",h(i));break}i=i.parent}},flyingon.Grid.onmouseup=function(t){if(_)_=!1;else{var e,i=flyingon.findControl(this),n=t.target||t.srcElement;switch(n.getAttribute("tag")){case"expand":f(i,e=n.parentNode.row,n,"collapse"),i.__view.__collapse_row(e);break;case"collapse":f(i,e=n.parentNode.row,n,"expand"),i.__view.__expand_row(e);break;default:(e=flyingon.findControl(n))&&!e.row&&e.column&&!e.__column_check&&e.column.name()&&(r=e,o=(s=i).view_sort,a=o.cell===r&&!o.desc,o.cell=r,o.desc=a,o.className="f-grid-sort"+(a?" f-grid-sort-desc":""),s.sort(r.column.name(),a),u(o))}}var s,r,o,a},flyingon.Grid.onmouseover=function(t){var e,i,n,s=t.target||t.srcElement;if(0<=s.className.indexOf("f-grid-cell")&&(n=flyingon.findControl(s))&&(e=flyingon.findControl(this))&&(i=n.column)&&i&&i.resizable()){var r=e.view_resize,o=r.style;r.column=i,o.left=s.parentNode.offsetLeft+s.offsetLeft+s.offsetWidth-3+"px",o.top=s.offsetTop+"px",o.height=s.offsetHeight+"px",o.display=""}},flyingon.Grid.resize=function(t){var e,i=flyingon.findControl(this),n=this;i.__column_dirty=!0,i.view.appendChild(t.dom=r),(n=i.view_head).style.cursor="ew-resize",(e=t.dom.style).left=this.offsetLeft+(this.offsetWidth>>1)+1+"px",e.top=n.offsetTop+"px",e.bottom=i.view_body.style.bottom,flyingon.dom_drag({grid:i,column:e=this.column,size:e.__size},t,d,g,p,"y",!1)},flyingon.Grid.onscroll=function(){var t=flyingon.findControl(this),e=this.scrollLeft,i=this.scrollTop;t.scrollLeft!==e&&(t.renderer.__do_hscroll(t,t.scrollLeft=e),u(t.view_sort)),t.scrollTop!==i&&t.renderer.__do_vscroll(t,t.scrollTop=i)},this.header=function(t,e,i){var n,s=t.__columns,r=t.__storage||t.__defaults,o=r.group,a=r.header;if(t.view_body.style.top=t.view_scroll.style.top=o+a+"px",1<i){(n=t.view_head.style).display=1<a?"":"none",n.height=a+"px";for(var l=s.length-1;0<=l;l--){var h=s[l];h.view&&h.renderer.__resize_height(h,a)}}else(n=t.view_group.style).display=1<o?"":"none",n.height=n.lineHeight=o+"px"},this.locate=function(t){s.locate.call(this,t),this.update(t)},this.update=function(t){if(t.offsetHeight){var e,i=t.__storage||t.__defaults,n=t.__columns,s=t.__compute_columns(),r=t.offsetHeight-t.borderTop-t.borderBottom;0<(e=i.group)&&(r-=e),n.__size>s&&!t.__auto_width?r-=e=flyingon.hscroll_height:e=0,t.view_body.style.bottom=e+"px",0<(e=i.header)&&(r-=e,this.__show_header(t,n,e)),0<(e=i.filter)&&(r-=e,this.__show_filter(t,n,e)),e=t.currentView(),e=this.__show_body(t,e,t.__auto_height?e.length*i.rowHeight:r),this.__layout_locked(t,n.__locked,e),s=n.__size,t.__auto_width&&(t.view.style.width=t.offsetWidth+"px",s=1),t.view_scroll.firstChild.style.width=s+"px",t.__auto_height&&(t.view.style.height=t.offsetHeight+"px")}},this.__show_header=function(t,e,i){var n,s=t.view_head.children[3],r=e.__locked;s=s.previousSibling,(n=r[0])&&this.show_header(s,e,0,n,i),s=s.previousSibling,(n=r[1])&&this.show_header(s,e,e.length-n,e.length,i),this.show_header(s.previousSibling,e,e.__show_start,e.__show_end,i),u(t.view_sort)},this.__layout_locked=function(t,e,i){var n=t.view_head,s=e[2],r=e[3],o=t.__group_size,a=0|t.scrollLeft;(i=i&&0<r)&&(r+=1),C(n,s,i?r+flyingon.vscroll_width:r,o,a),C(n=t.view_body.firstChild,s,r,o,a),C(n=n.nextSibling,s,r,o,a),C(n.nextSibling,s,r,o,a)},this.show_header=function(t,e,i,n,s){for(var r,o,a,l=[],h=e.__show_tag,f=y,c=i;c<n;)(r=e[c++]).__visible&&(r.view?(r.__show_tag!==h&&(r.__show_tag=h),r.renderer.__update(e,c-1,f)):(r.__show_tag=h,r.renderer.render(l,e,c-1,s)));if(l[0])for((a=m).innerHTML=l.join(""),h=f.firstChild;i<n;)(r=e[i++]).__visible&&((o=r.view)?h=o.nextSibling||null:r.renderer.mount(r,a,f,h));for(;a=t.lastChild;)t.removeChild(a);t.appendChild(f)},this.__show_filter=function(t,e,i){},this.__show_body=function(t,e,i){var n,s=t.view_body.lastChild,r=t.__storage||t.__defaults,o=t.__locked_top,a=e.length,l=e.__row_height=r.rowHeight,h=r.treeColumn,f=a*l,c=i<f&&!t.__auto_height;return(n=h&&t.__columns.find(h))&&(n.__tree_cell=!0,n.__tree_icon=r.treeIcon),t.view_scroll.firstChild.style.height=(c&&f||1)+"px",t.view_body.style[flyingon.rtl?"left":"right"]=(c?flyingon.vscroll_width:0)+"px",0<o?(s.style.display="",s.style.height=(f=o*l)+"px",i-=f,this.__show_rows(t,s,e,0,o)):(f=0,s.style.display="none"),s=s.previousSibling,0<(n=t.__locked_bottom)?(s.style.display="",s.style.height=(f=n*l)+"px",i-=f,this.__show_rows(t,s,e,a-n,a),a-=n):s.style.display="none",(s=s.previousSibling).style.top=-(0|t.scrollTop)+"px",e.__arrange_size=i,c?this.__visible_rows(t,e,0|t.scrollTop):(e.__show_start=o,e.__show_end=a),this.__show_rows(t,s,e,e.__show_start,e.__show_end,!0),(n=t.__show_row)&&(t.view_scroll.scrollTop=n.__show_index*l),c},this.__visible_rows=function(t,e,i,n){var s,r=t.__locked_top,o=e.length-t.__locked_bottom,a=e.__row_height;if(0<i&&(r+=i/a|0),s=e.__arrange_size/a|0,(s+=r+5)<o&&(o=s),n&&e.__show_start<=r&&e.__show_end>=o)return!0;e.__show_start=r,e.__show_end=o},this.__show_rows=function(t,e,i,n,s,r){var o,a=t.__columns,l=a.__locked,h=i.__row_height,f=l[0],c=a.length,u=r?n*h:0;e=e.lastChild,t.__group_size?this.show_group(t,e,i,n,s,u,h):e.firstChild&&(e.innerHTML=""),e=e.previousSibling,f?this.show_rows(t,e,i,n,s,a,0,f,u,h):e.firstChild&&(e.innerHTML=""),e=e.previousSibling,(o=l[1])?this.show_rows(t,e,i,n,s,a,c-o,c,u,h):e.firstChild&&(e.innerHTML=""),this.show_rows(t,e.previousSibling,i,n,s,a,a.__show_start,a.__show_end,u,h)},this.show_rows=function(t,e,i,n,s,r,o,a,l,h){for(var f,c,u=[],d=r.__show_tag,_=y,g=n;g<s;g++)(f=i[g])&&(f.__show_index=g,f.renderer.show(_,u,i,g,r,o,a,l,h,d),l+=h);if(u[0]){(c=m).innerHTML=u.join(""),d=_.firstChild;for(g=n;g<s;g++)d=(f=i[g]).renderer.mount(c,f,r,o,a,h,_,d)}for(;c=e.lastChild;)e.removeChild(c);e.appendChild(_)},this.show_group=function(t,e,i,n,s,r,o){for(var a,l,h,f,c,u=[],d=y,_=t.__group_size,g=t.ongroup,p=n;p<s;)(a=i[p])&&(a.__group_row&&(a.__show_index=p,h=c=g&&g(a)||a.text+" ("+a.total+")",(l=a.view_group)?(d.appendChild(l),a.__text!==h&&(l.firstChild.nextSibling[v]=a.__text=h),a.__top!==r&&(l.style.top=(a.__top=r)-1+"px")):u.push('<div class="f-grid-group-row" style="top:',(a.__top=r)-1,"px;height:",o+1,"px;line-height:",o,"px;min-width:",_,"px;",'px;text-align:left;">','<span class="f-grid-',a.expanded?'expand" tag="expand"':'collapse" tag="collapse"',' style="margin-left:',20*a.level,'px;"></span>',"<span> ",a.__text=h,"</span>",'<div class="f-grid-group-line" style="top:0;bottom:auto;"></div>','<div class="f-grid-group-line"></div>',"</div>")),r+=o),p++;if(e.style.height=r+"px",u[0])for((c=m).innerHTML=u.join(""),f=d.firstChild;n<s;)(a=i[n])&&a.__group_row&&((l=a.view_group)?f=l.nextSibling||null:(((l=c.firstChild).row=a).view_group=l,d.insertBefore(l,f))),n++;for(;c=e.lastChild;)e.removeChild(c);e.appendChild(d)},this.__render_group=function(t){var e,i,n=[],s=t.__groups,r=t.__columns;if(s)for(var o=0,a=s.length;o<a;o++)(e=r.find(i=s[o]))&&(e.__visible=!1,e.__cells,n.push('<span class="f-grid-group-cell" column-name="',i,'">',e.__find_text()||i,"</span>"));else n.push('<span class="f-information">',flyingon.i18ntext("grid.group"),"</span>");t.view_group.innerHTML=n.join("")},this.__do_hscroll=function(t,e){var i=t.__columns,n=t.view_head.firstChild,s=(t.__storage||t.__defaults).header,r=flyingon.rtl?"right":"left",o=-e+"px",a=!i.__compute_visible(e,!0),l=i.__show_start,h=i.__show_end;if(0<s&&(n.style[r]=o,a&&this.show_header(n,i,l,h,s)),(n=t.view_body.firstChild).firstChild.style[r]=o,(n=n.nextSibling).firstChild.style[r]=o,n.nextSibling.firstChild.style[r]=o,a){var f,c=t.currentView();T(t,!0),n=t.view_body.firstChild,s=c.__row_height,(f=t.__locked_top)&&this.show_rows(t,n.nextSibling.firstChild,c,0,f,i,l,h,0,s),(f=t.__locked_bottom)&&this.show_rows(t,n.nextSibling.nextSibling.firstChild,c,c.length-f,c.length,i,l,h,0,s),this.show_rows(t,n.firstChild,c,f=c.__show_start,c.__show_end,i,l,h,f*s,s),T(t)}},this.__do_vscroll=function(t,e){var i=t.currentView(),n=t.view_body.firstChild;T(t,!0),n.style.top=-e+"px",this.__visible_rows(t,i,e,!0)||this.__show_rows(t,n,i,i.__show_start,i.__show_end,!0),T(t)}}),flyingon.renderer("Tab",function(o){function l(t){var e,i,n,s,r=t.view.firstChild.firstChild.nextSibling,o=r.firstChild,a=t.length,l=flyingon.rtl?"right":"left",h=t.__storage||t.__defaults,f=0<="left,right".indexOf(h.direction),c=h.space;if(s=h.header-h.offset,i=f?(e="margin-top:"+c+"px;width:"+s+"px;line-height:"+(h.size-2)+"px;",t.offsetHeight-t.borderTop-t.borderBottom-h.start):(e="margin-"+l+":"+c+"px;height:"+s+"px;line-height:"+(s-2)+"px;",t.offsetWidth-t.borderLeft-t.borderRight-h.start),h.fill){for(i-=c*(a+1)+h.end,s=e+(f?"height:":"width:");o;)n=i/a|0,o.style.cssText=s+n+"px;",o=o.nextSibling,a--,i-=n;a=0}else{for(s=0<(n=h.size)?n+"px;":"auto;",e+=f?"height:"+s+"margin-top:"+c+"px;":"width:"+s+"margin-"+l+":"+c+"px;";o;)o.style.cssText=e,o=o.nextSibling;a=0<n?(n+c)*a+c:(f?r.offsetHeight:r.offsetWidth)+c}0<(s=a-i)?(s+=h.scroll-1,t.__scroll_header>s?t.__scroll_header=n=s:n=t.__scroll_header-h.scroll+1):t.__scroll_header=n=s=0,r.style[f?"top":l]=-(h.start+n)+"px",(o=r.nextSibling).style.display=o.nextSibling.style.display=0<s?"":"none"}this.__scroll_html="",this.padding=!1,this.render=function(t,e,i){var n,s=e.__storage||e.__defaults;e.__content_render=!0,t.push("<div"),e.defaultClass+=" f-tab-direction-"+s.direction,i.call(this,t,e),t.push('><div class="f-tab-head f-tab-theme-',s.theme,'">','<div class="f-tab-line"></div>','<div class="f-tab-content"></div>','<a class="f-tab-move f-tab-forward f-back" onclick="flyingon.Tab.forward.call(this)"><span class="f-tab-move-icon"></span></a>','<a class="f-tab-move f-tab-back f-back" onclick="flyingon.Tab.back.call(this)"><span class="f-tab-move-icon"></span></a>',"</div>",'<div class="f-tab-body">'),(n=e.selectedPage())&&n.renderer.render(t,n,this.__render_default),t.push("</div></div>")},flyingon.Tab.forward=function(){var t=t=flyingon.findControl(this);(t.__scroll_header-=100)<0&&(t.__scroll_header=0),l(t)},flyingon.Tab.back=function(){var t=t=flyingon.findControl(this);t.__scroll_header+=100,l(t)},this.mount=function(t,e){var i=t.selectedPage();o.mount.call(this,t,e),this.__insert_head(t),i&&i.renderer.mount(i,e.lastChild.firstChild)},this.unmount=function(t,e){this.__unmount_children(t),o.unmount.call(this,t,e)},this.selected=function(t,e,i){var n,s,r=t.__storage||t.__defaults,o=r.size,a=r.space;if(i.view||e.lastChild.appendChild(i.renderer.createView(i)),i.renderer.locate(i),n=i.view_head,s=0<o?t.indexOf(i)*(o+a):0<="left,right".indexOf(r.direction)?(o=n.offsetWidth,n.offsetTop-a):(o=n.offsetHeight,n.offsetLeft-a),(a=-(e=e.firstChild.firstChild.nextSibling).offsetLeft)<s){if((o=n.offsetLeft+o)<a+(s=e.parentNode.offsetWidth))return;s=o-s+80}else(s-=50)<0&&(s=0);t.__scroll_header!==s&&(t.__scroll_header=s,l(t))},this.theme=function(t,e,i){e.className=e.className.replace(/f-tab-type-\w+/,"f-tab-type-"+i)},this.__insert_head=function(t){for(var e,i,n,s=t.view.firstChild.firstChild.nextSibling,r=t.length-1;0<=r;r--)if(e=t[r]){if(i=e.view_head){if(i.parentNode===s){n=i;continue}}else e.renderer.__render_header(e),i=e.view_head;n?s.insertBefore(i,n):s.appendChild(i),n=i}},this.__insert_patch=function(t,e,i){this.__insert_head(t)},this.__remove_patch=function(t,e){for(var i,n,s=t.view.firstChild.firstChild.nextSibling,r=0;i=e[r++];)i.parent!==t&&(n=i.view_head)&&n.parentNode===s&&s.removeChild(n);o.__remove_patch.apply(this,arguments)},this.locate=function(t){var e=t.selectedPage();o.locate.call(this,t),t.__reset_header&&(t.__reset_header=!1,function(t){var e,i=t.view,n=t.__storage||t.__defaults,s=i.firstChild.style,r=i.lastChild.style,o=n.direction,a=n.header,l=":"+a+"px";switch(i.className=i.className.replace(/f-tab-direction-\w+/,"f-tab-direction-"+o),o){case"left":s.cssText="right:auto;width"+l,r.cssText=o+l,l="height";break;case"right":s.cssText="left:auto;width"+l,r.cssText=o+l,l="height";break;case"bottom":s.cssText="top:auto;height"+l,r.cssText=o+l,l="width";break;default:s.cssText="bottom:auto;height"+l,r.cssText=o+l,l="width"}if(0<a){if(i=(i=i.firstChild.firstChild).nextSibling)for(i.style.cssText=e=o+":"+n.offset+"px",l=l+":"+n.scroll+"px;display:none;"+e;i=i.nextSibling;)i.style.cssText=l;s.display=""}else s.display="none"}(t)),0<t.length&&(0<t.header()&&l(t),this.__arrange(t)),e&&(e.view||t.view.lastChild.appendChild(e.renderer.createView(e)),e.renderer.locate(e)),t.__update_dirty=0},this.__arrange=function(t){var e=t.__storage||t.__defaults,i=e.header,n=t.offsetWidth-t.borderLeft-t.borderRight-t.paddingLeft-t.paddingRight,s=t.offsetHeight-t.borderTop-t.borderBottom-t.paddingTop-t.paddingBottom;0<i&&(0<="left,right".indexOf(e.direction)?n-=i:s-=i);for(var r=t.length-1;0<=r;r--){var o=t[r];o.measure(n,s,n,s,3),o.locate(0,0)}}}),flyingon.renderer("TabPage","Panel",function(n){function r(t){for(var e=this.page,i=(t||(t=window.event)).target||t.srcElement;i&&i!==this;){switch(i.getAttribute("tag")){case"close":return void e.remove();case"button":return void this.trigger("button-click","page",e)}i=i.parentNode}e.parent.selectedPage(e,"click")}this.__render_header=function(t){var e,i=t.view_head=document.createElement("a"),n=[],s=t.__storage||t.__defaults;i.className="f-tab-item f-back"+(t.selected()?" f-tab-selected":""),n.push('<span class="f-tab-icon ',(e=s.icon)?e:"f-tab-icon-none",'"></span>','<span class="f-tab-text">',(e=s.text)?flyingon.html_encode(e):"","</span>"),(e=s.buttons)&&(e=e.replace(/(\w+)\W*/g,'<span class="f-tab-button $1" tag="button"></span>'))&&n.push(e),n.push('<span class="f-tab-close"',s.closable?"":' style="display:none"',' tag="close"></span>'),i.innerHTML=n.join(""),i.page=t,i.onclick=r},this.unmount=function(t,e){var i=t.view_head;t.view_head=i.control=i.onclick=null,n.unmount.call(this,t,e)},this.icon=function(t,e,i){t.view_head.firstChild.className="f-tab-icon "+(i||"f-tab-icon-none")},this.text=function(t,e,i){t.view_head.firstChild.nextSibling[this.__text_name]=i},this.buttons=function(t,e,i){for(var n=(e=t.view_head).lastChild,s=n.previousSibling;s&&"button"===s.getAttribute("tag");)s=s.previousSibling,e.removeChild(s.nextSibling);i&&(i=flyingon.html_encode(any).replace(/(\w+)\W*/g,'<span class="f-tab-button $1" tag="button"></span>'),flyingon.dom_html(e,i,n))},this.closable=function(t,e,i){t.view_head.lastChild.style.display=i?"":"none"},this.selected=function(t,e){t.view&&(t.view.style.display=e?"":"none"),t.view_head.className="f-tab-item"+(e?" f-tab-selected":"")}}),flyingon.renderer("Popup","Panel",function(t){var s=[],o=null,r=flyingon.dom_on,n=flyingon.dom_off;function a(t){var e=o;if(e){for(var i=e.view,n=e.__view_reference,s=t.target;s;){if(s===i||s===n)return;s=s.parentNode}!1!==e.trigger("autoclosing","dom",t.target)&&e.close("auto")}}function l(t){o&&27===t.which&&o.close("cancel")}function h(t){var e,i;if((e=o)&&(i=e.__closeAway)){var n=e.__view_rect,s=t.clientX,r=t.clientY;n?(n.left-s>i.x1||s-n.right>i.x2||n.top-r>i.y1||r-n.bottom>i.y2)&&e.close("auto"):(e.__view_rect=n=e.view.getBoundingClientRect(),e.__closeAway={x1:0<(i=n.left-s)?i+4:4,x2:0<(i=s-n.right)?i+4:4,y1:0<(i=n.top-r)?i+4:4,y2:0<(i=r-n.bottom)?i+4:4})}}function f(t){var e=o;if(e&&e.view===this){var i=this.getBoundingClientRect(),n=t.clientX,s=t.clientY;(n>=i.right||s>=i.bottom||n<=i.left||s<=i.top)&&e.close("auto")}}this.__auto_size=0,this.show=function(t,e,i,n,s,r){var o=(t.__view_reference=e.view||e).getBoundingClientRect();i&&(o={top:o.top-(0|i[0]),right:o.right+(0|i[1]),bottom:o.bottom+(0|i[2]),left:o.left-(0|i[3])}),this.showAt(t,0,0),o=flyingon.dom_align(t.view,o,n,s,r),t.offsetLeft=o.left,t.offsetTop=o.top},this.showAt=function(t,e,i){var n=t.view||this.createView(t);document.body.appendChild(n),t.trigger("showing"),t.measure(document.body.clientWidth,0),t.locate(0|e,0|i),flyingon.__update_patch(),this.locate(t),s.push(o=t),(t.__closeAway=t.closeAway())&&!h.count++&&(h.count=1,r(document,"mousemove",h)),(t.__closeLeave=t.closeLeave())&&r(n,"mouseout",f),s[1]||a.on||(a.on=1,r(document,"mousedown",a),r(document,"keydown",l)),t.trigger("shown")},this.close=function(t){var e,i=t.view;t.__view_reference=null,t.__closeAway&&(t.__closeAway=t.__view_rect=null,--h.count||n(document,"mousemove",h)),t.__closeLeave&&n(i,"mouseout",f),s.pop(),o=s[s.length-1],(e=i.parentNode)&&e.removeChild(i),!s[0]&&a.on&&(a.on=0,n(document,"mousedown",a),n(document,"keydown",l))}}),flyingon.renderer("ToolTip",function(t){var o=null,a=flyingon.dom_on,n=flyingon.dom_off;function l(t){if(o){for(var e=o.view,i=t.target;i;){if(i===e)return;i=i.parentNode}o.close()}}function h(t){o&&27===t.which&&o.close()}this.show=function(t,e){var i,n=t.view,s=t.direction(),r=t.reverse();n||((n=t.view=document.createElement("div")).innerHTML='<div class="f-tooltip-body"></div><div class="f-tooltip-arrow1"></div><div class="f-tooltip-arrow2"></div>'),n.className="f-tooltip f-tooltip-"+s,n.style.width=0<(i=t.width())?i+"px":i,t.html()?n.firstChild.innerHTML=t.text():n.firstChild[this.__text_name]=t.text(),document.body.appendChild(n),i=flyingon.dom_align(t.view,(e.view||e).getBoundingClientRect(),s,"top"===s||"bottom"===s?"center":"middle",r),(i=o)&&i!==t&&i.close(),o=t,l.on||(a(document,"mousedown",l),a(document,"keydown",h),l.on=1)},this.close=function(t){var e,i=t.view;o=null,(e=i&&i.parentNode)&&e.removeChild(i),l.on&&(n(document,"mousedown",l),n(document,"keydown",h),l.on=0)}}),flyingon.renderer("Dialog","Panel",function(i){this.render=function(t,e,i){var n=(e.__storage||e.__defaults).header;t.push("<div"),i.call(this,t,e),t.push(">",'<div class="f-dialog-head" class="f-back" style="height:',n,"px;line-height:",n,'px;" onmousedown="flyingon.Dialog.onmousedown.call(this, event)" onclick="flyingon.Dialog.onclick.call(this, event)">','<span class="f-dialog-icon" style="display:none;','"></span>','<span class="f-dialog-text"></span>','<span class="f-dialog-close" tag="close"></span>','<span class="f-dialog-line"></span>',"</div>",'<div class="f-dialog-body" style="top:',n,'px;">'),0<e.length&&e.__visible&&(e.__content_render=!0,this.__render_children(t,e,e,0,e.length)),t.push(this.__scroll_html,"</div></div>")},flyingon.Dialog.onclick=function(t){var e=flyingon.findControl(this);"close"===(t.target||t.srcElement).getAttribute("tag")?e.close():e.active()},flyingon.Dialog.onmousedown=function(t){var e=flyingon.findControl(this);e&&(e.active(),e.renderer.movable(e,t))},this.mount=function(t,e){t.view_content=e.lastChild,i.mount.call(this,t,e)},this.active=function(t,e){var i=t.view,n=" f-dialog-active";e?i.className.indexOf(n)<0&&(i.className+=n):i.className=i.className.replace(n,"")},this.header=function(t,e,i){var n=e.firstChild.style;n.height=n.lineHeight=e.lastChild.style.top=i+"px"},this.text=function(t,e,i){e=e.firstChild.children[1],t.format?e.innerHTML=t.format(i):e[this.__text_name]=i},this.icon=function(t,e,i){(e=e.firstChild.firstChild).className="f-groupbox-icon"+(i?" "+i:""),e.style.display=i?"":"none"},this.closable=function(t,e,i){e.firstChild.children[2].style.display=i?"":"none"},this.show=function(t,e){var i=document.body,n=t.view||this.createView(t),s=i.clientWidth;i.appendChild(n),t.trigger("showing"),t.measure(s,0),this.center(t),e&&flyingon.dom_overlay(n),flyingon.__update_patch(),this.locate(t),t.trigger("shown")},this.center=function(t){var e=document.body,i=t.view.style,n=((window.innerHeight||document.documentElement.clientHeight)-t.offsetHeight>>1)-e.clientLeft;n<0&&(n=0),i.left=(t.offsetLeft=e.clientWidth-t.offsetWidth>>1)+"px",i.top=(t.offsetTop=n)+"px"},this.movable=function(t,e){var i=(e.dom=t.view).offsetTop;flyingon.dom_drag(t,e,null,function(t){t.distanceY<-i&&(t.distanceY=-i)}),e.dom=null},this.close=function(t){var e,i=t.view;(e=i.parentNode)&&e.removeChild(i),i.flyingon_overlay&&flyingon.dom_overlay(i,!1)}}),flyingon.showMessage=function(t,e,i,n,s){var r,o;arguments.length<4&&(s=n,n=i,i=""),o=(n=n?""+n:"ok").match(/\w+/g),n=[];for(var a=0,l=o.length;a<l;a++)n.push({Class:"Button",height:25,minWidth:80,margin:"8 2 0 2",tag:o[a],text:flyingon.i18ntext("system."+o[a],o[a])});return 1<(o=(r=flyingon.ui({layout:"vertical-line",width:300,height:"auto",padding:0,text:t,children:[{Class:"Panel",layout:"dock",height:"auto",padding:8,minHeight:60,style:"overflow:hidden;",children:[{Class:"Label",dock:"left",width:50,height:50,visible:i,className:"f-message-icon"+(i?" f-message-"+i:"")},{Class:"Label",dock:"fill",height:"auto",text:e,nolineHeight:!0}]},{Class:"div",height:40,className:"f-message-foot",style:"overflow:hidden;",children:n}]},flyingon.Dialog).showDialog()).offsetHeight/200)&&(o*=300,r.width(800<o?800:o),r.showDialog()),r.view.lastChild.firstChild.nextSibling.children[0|s].focus(),r.on("click",function(t){var e=t.target.tag();e&&this.close(e)}),r},flyingon.renderer("Menu",function(t){var l=[],e=flyingon.dom_on,a=flyingon.dom_off,h=1;function f(t){var e=l[0];if(e){for(var i=e.view,n=t.target;n;){if(n===i||n.__menu)return;n=n.parentNode}_(0,1)}}function c(t){for(var e,i=t.target;i;){if(0<=i.className.indexOf("f-menu-item")){(e=i.parentNode)&&(e=l[e.__index])&&(e=e[i.getAttribute("index")])&&(_(0,1),e.trigger("click"));break}i=i.parentNode}_(0,1)}function u(t){var e=t.target;if(0<=e.className.indexOf("f-menu-item")){var i,n,s=e.parentNode,r=s.__index,o=l;(i=o[s.__index])&&((n=o[r+1])&&i.__menu===n.view.__menu||(n&&_(r+1),(n=i[e.getAttribute("index")])&&0<n.length&&(flyingon.dom_align(d(n,n.__menu=++h),e.getBoundingClientRect(),"right","top",!0),l.push(n))))}}function s(t){l.push(t),t.trigger("shown"),u.on||(e(document,"mousedown",f),e(document,"mouseover",u),e(document,"click",c),u.on=1)}function d(t,e){var i,n,s=[],r=document.createElement("div");t.trigger("showing"),r.className="f-menu",r.__menu=e,r.__index=l.length;for(var o=0,a=t.length;o<a;o++)(i=t[o])&&"-"!==i?(n=i.__storage||i.__defaults,s.push('<a class="f-menu-item f-hover-back',n.disabled?" f-disabled":"",'" index="',o,'">','<span class="f-menu-icon ',n.icon||"",'"></span>','<span class="f-menu-text">',n.text,"</span>",0<i.length?'<span class="f-menu-sub"></span>':"","</a>")):s.push('<div class="f-menu-sep"></div>');return r.innerHTML=s.join(""),document.body.appendChild(r),t.view=r}function _(t,e){for(var i,n,s,r=l,o=r.length-1;t<=o;o--)(i=r[o])&&(i.trigger("close"),(n=i.view)&&(s=n.parentNode)&&(s.removeChild(n),i.view=null,i.innerHTML=""));r.length=t,e&&(a(document,"mousedown",f),a(document,"mouseover",u),a(document,"click",c),u.on=0)}this.show=function(t,e){l[0]&&_(0),flyingon.dom_align(d(t,1),(e.view||e).getBoundingClientRect(),"bottom","left",!0),s(t)},this.showAt=function(t,e,i){var n;l[0]&&_(0),(n=d(t,1).style).left=e+"px",n.top=i+"px",s(t)},this.close=function(){_(0,1)}}),Object.extend("Control",function(){flyingon.create;var p=flyingon.pixel,v=flyingon.pixel_sides;this.defaultWidth=100,this.defaultHeight=25,this.__update_dirty=0,flyingon.fragment("f-visual",this),flyingon.fragment("f-bindable",this),this["#focused"]=function(t){t?this.focus():this.blur()},this.render=function(t,e,i){var n=this.__view_patch;n?n[t]=e:this.renderer.patch(this,t,e)},this.__render_text=function(){var t=this.__view_patch;t?t.text=!0:this.renderer.patch(this,"text",!0)},this.__render_value=function(){var t=this.__view_patch;t?t.value=!0:this.renderer.patch(this,"value",!0)},this.__render_fn=function(t){return function(t,e){var i=this.__view_patch;i?i[t]=e:this.renderer.patch(this,t,e)}},this.defineProperty("visible",this.__visible=!0,{group:"layout",set:function(t,e){var i;this.__visible=e,this.view&&((i=this.__view_patch)?i[t]=e:(this.renderer.patch(this,t,e),(i=this.parent)&&i.__update_dirty<2&&i.__arrange_delay(2)))}},!1);var t=function(t,e){var i=this.__locate_patch;i?i[t]=e:((this.__locate_patch={})[t]=e,this.view&&!this.__delay_patch&&flyingon.__register_delay(this),(i=this.parent)&&i.__update_dirty<2&&i.__arrange_delay&&i.__arrange_delay(2))};function e(t,e){return t[e.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})]=t.defineProperty(e,"",{group:"appearance",set:function(t,e){var i=this.__style_patch;i?i[t]=e:this.renderer.style(this,t,e)}},!1)}function i(t,e,i){!1===i?t.removeClass(e):0<i?setTimeout(function(){t.removeClass(e)},0|i):t.addClass(e)}this.defineProperty("margin","",{group:"layout",set:t},!1),this.defineProperty("border","",{group:"layout",set:t},!1),this.defineProperty("padding","",{group:"layout",set:t},!1),this.defineProperty("left","",{group:"layout",set:t},!1),this.defineProperty("top","",{group:"layout",set:t},!1),this["min-width"]=this.defineProperty("minWidth","",{group:"layout",set:t},!1),this["max-width"]=this.defineProperty("maxWidth","",{group:"layout",set:t},!1),this["min-height"]=this.defineProperty("minHeight","",{group:"layout",set:t},!1),this["max-height"]=this.defineProperty("maxHeight","",{group:"layout",set:t},!1),this["overflow-x"]=this.defineProperty("overflowX","auto",{group:"layout",set:t},!1),this["overflow-y"]=this.defineProperty("overflowY","auto",{group:"layout",set:t},!1),t=function(t,e){var i=this.__locate_patch;this["__auto_"+t]="auto"===e,i?i[t]=e:((this.__locate_patch={})[t]=e,this.view&&!this.__delay_patch&&flyingon.__register_delay(this),(i=this.parent)&&i.__update_dirty<2&&i.__arrange_delay&&i.__arrange_delay(2))},this.defineProperty("width","",{group:"layout",set:t},!1),this.defineProperty("height","",{group:"layout",set:t},!1),t=function(){var t;(t=this.parent)&&t.__update_dirty<2&&t.__arrange_delay(2)},this["align-x"]=this.defineProperty("alignX","left",{group:"layout",set:t},!1),this["align-y"]=this.defineProperty("alignY","top",{group:"layout",set:t},!1),this.defineProperty("dock","left",{group:"layout",set:t},!1),e(this,"position"),e(this,"display"),this.float=e(this,"cssFloat"),e(this,"clear"),e(this,"line-height"),e(this,"z-index"),e(this,"border-style"),e(this,"border-color"),e(this,"border-radius"),e(this,"direction"),e(this,"text-align"),e(this,"vertical-align"),e(this,"visibility"),e(this,"opacity"),e(this,"cursor"),e(this,"background-color"),e(this,"background-image"),e(this,"background-repeat"),e(this,"background-position"),e(this,"color"),e(this,"font-style"),e(this,"font-variant"),e(this,"font-weight"),e(this,"font-size"),e(this,"line-height"),e(this,"font-family"),e(this,"white-space"),e(this,"word-spacing"),e(this,"letter-spacing"),e(this,"text-indent"),e(this,"text-decoration"),e(this,"text-overflow"),e(this,"text-shadow"),e(this,"transform"),e(this,"transition"),e(this,"animation"),this.defineProperty("disabled",!1,{set:this.render},!1),this.defineProperty("tabindex",0,{set:this.render},!1),this.defineProperty("title","",{set:this.render},!1),this.defineProperty("accesskey","",{set:this.render},!1),this.defineProperty("resizable","none"),this.defineProperty("key",""),this.defineProperty("tag",null),this.defineProperty("contextmenu",null),this.locationValue=function(t){return(this.__location_values||this.__storage||this.__defaults)[t]},this.measure=function(t,e,i,n,s){var r,o=this.__storage||this.__defaults,a=this.__location_values||o,l=a.minWidth,h=a.maxWidth,f=a.minHeight,c=a.maxHeight,u=a.width,d=a.height,_=v,g=_.cache;switch(r=g[r=a.margin]||_(r,t),this.marginLeft=r.left,this.marginTop=r.top,this.marginRight=r.right,this.marginBottom=r.bottom,r=g[r=o.border]||_(r,0),this.borderLeft=r.left,this.borderTop=r.top,this.borderRight=r.right,this.borderBottom=r.bottom,r=g[r=o.padding]||_(r,t),this.paddingLeft=r.left,this.paddingTop=r.top,this.paddingRight=r.right,this.paddingBottom=r.bottom,g=(_=p).cache,l=0<l?0|l:g[l]||_(l,t),h=0<h?0|h:g[h]||_(h,t),f=0<f?0|f:g[f]||_(f,e),c=0<c?0|c:g[c]||_(c,e),u){case"":u=1&s?(r=0<=i?i:t)-this.marginLeft-this.marginRight:this.defaultWidth;break;case"auto":u=i||this.defaultWidth;break;default:u=(r=+u)===r?0|r:g[u]||_(u,t)}switch(r<0&&(u=0),d){case"":d=2&s?(r=0<=n?n:e)-this.marginTop-this.marginBottom:this.defaultHeight;break;case"auto":d=n||this.defaultHeight;break;default:d=(r=+d)===r?0|r:g[d]||_(d,e)}d<0&&(d=0),u<l?u=l:0<h&&h<u&&(u=h),d<f?d=f:0<c&&c<d&&(d=c),this.offsetWidth=u,this.offsetHeight=d,(_=this.onmeasure)&&!1!==_.call(this)&&(this.offsetWidth!==u&&((u=this.offsetWidth)<l?this.offsetWidth=u=l:0<h&&h<u&&(this.offsetWidth=u=h)),this.offsetHeight!==d&&((d=this.offsetHeight)<f?this.offsetHeight=d=f:0<c&&c<d&&(this.offsetHeight=d=c)))},this.locate=function(t,e,i,n,s){var r,o=this.offsetWidth,a=this.offsetHeight;if(0<i&&(r=i-o))switch((this.__location_values||this.__storage||this.__defaults).alignX){case"center":t+=r>>1;break;case"right":t+=r;break;default:t+=this.marginLeft}else t+=this.marginLeft;if(0<n&&(r=n-a))switch((this.__location_values||this.__storage||this.__defaults).alignY){case"middle":e+=r>>1;break;case"bottom":e+=r;break;default:e+=this.marginTop}else e+=this.marginTop;this.offsetLeft=t,this.offsetTop=e,(r=this.onlocate)&&!1!==r.call(this)&&(t=this.offsetLeft,e=this.offsetTop),s&&(s.arrangeX=t+=o+this.marginRight,s.arrangeY=e+=a+this.marginBottom,t>s.arrangeRight&&(s.arrangeRight=t),e>s.arrangeBottom&&(s.arrangeBottom=e))},this.focus=function(){this.view&&this.renderer.focus(this)},this.blur=function(){this.view&&this.renderer.blur(this)},this.loading=function(t){i(this,"f-loading",t)},this.waiting=function(t){i(this,"f-waiting",t)},flyingon.fragment("f-serialize",this),this.serialize=function(t){var e;(e=this.Class)&&(e=e.nickName||e.fullName)&&t.writeProperty("Class",e),(e=this.__storage)&&t.writeProperties(e,this.getOwnPropertyNames(),this.__watches)},this.autoDispose=!0,this.dispose=function(){var t;this.__storage;return(t=this.ondistroyed)&&t.call(this),this.view&&this.renderer.dispose(this),(t=this.__dataset)&&(t.subscribe(this,!0),this.__dataset=null),this.__events&&this.off(),this.parent=this.__loop_vm=this.__list=null,this}}).register(),flyingon.HtmlElement=flyingon.Control.extend(function(t){this.tagName="div",this.defineProperty("text","",{set:function(t,e){0<this.length&&this.splice(0),this.renderer.patch(this,t,e)}}),this.defineProperty("html",!1),this.defineProperty("arrange",!0),flyingon.fragment("f-container",this,t),this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;this.renderer.__measure_auto(this,t,e)},flyingon.renderer.bind(this,"HtmlElement")}),flyingon.Control.extend("Label",function(t){this.defaultWidth=60,this.defineProperty("text","",{set:this.__render_text}),this.defineProperty("html",!1,{set:this.__render_text}),this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;this.renderer.__measure_auto(this,t,e)}}).register(),flyingon.Control.extend("Icon",function(t){this.defaultWidth=25,this.defineProperty("icon","",{set:this.render}),this.defineProperty("size",16,{dataType:"int",set:this.render})}).register(),flyingon.Control.extend("Button",function(t){function n(t){var e=flyingon.Menu,i=this.__menu;"string"==typeof i&&(i=e.all[i]),i instanceof e&&i.show(this)}this.defineProperty("icon","",{set:this.render}),this.defineProperty("theme","",{set:this.render}),this["icon-size"]=this.defineProperty("iconSize",16,{set:this.render}),this.defineProperty("vertical",!1,{set:this.render}),this.defineProperty("text","",{set:this.__render_text}),this.defineProperty("html",!1,{set:this.__render_text}),this.defineProperty("dropdown",!1,{set:this.render}),this.defineProperty("menu",null,{set:function(t,e,i){(this.__menu=e)?i||this.on("click",n):i&&this.off("click",n)}}),this.showMenu=n,this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;this.renderer.__measure_auto(this,t,e)}}).register(),flyingon.Control.extend("LinkButton",function(t){this.defineProperty("text","",{set:this.render}),this.defineProperty("html",!1,{set:this.render}),this.defineProperty("href","",{set:this.render}),this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;this.renderer.__measure_auto(this,t,e)}}).register(),flyingon.Button.extend("File",function(t){this.defineProperty("accept","",{set:this.render})}).register("File"),flyingon.Control.extend("Image",function(t){this.defaultWidth=400,this.defaultHeight=300,this.defineProperty("src","",{set:this.render}),this.defineProperty("alt","",{set:this.render})}).register(),flyingon.Control.extend("Slider",function(t){var e=function(t,e,i){return t.defineProperty(e,i,{dataType:"int",check:function(t){return t<0?0:t},set:function(){this.view&&this.renderer.patch(this,"refresh")}})};e(this,"value",0),e(this,"min",0),e(this,"max",100),e(this,"buttonSize",8)}).register(),flyingon.Control.extend("ProgressBar",function(t){this.defaultHeight=20,this.defaultValue("border",1),this.defineProperty("value",0,{dataType:"int",check:function(t){return t<0?0:100<t?100:t},set:this.render})}).register(),flyingon.fragment("f-container",function(r,t){this.childrenClass=t||flyingon.Control,flyingon.fragment("f-collection",this),this.detach=function(t,e){var i,n=this.splice.apply(this,arguments);if(0<(e=n.length))for(var s=0;s<e;s++)(i=n[s])&&(i.parent=null,i.autoDispose=!1);return n},this.__check_error=function(t){throw'"'+this.Class.fullName+'" type can push "'+t.fullName+'" type only!'},this.__create_child=flyingon.ui,this.__check_items=function(t,e,i){for(var n,s,r=this.childrenClass,o=this.__content_render&&[],a=this.__locate_host;n=e[i];)n.__flyingon_class?n instanceof r?(s=n.parent)&&s.__remove_items(s.indexOf(n),[n]):this.__check_error(r):(n=this.__create_child(n,r))instanceof r?e[i]=n:this.__check_error(r),n.parent=this,n.__is_locate=a,(s=n.onparentchanged)&&s.call(n,this),o&&o.push(n),i++;o&&o[0]&&this.__children_dirty(1,t,o),this.__update_dirty<2&&this.__arrange_delay(2)},this.__remove_items=function(t,e){for(var i,n,s=[],r=e.length-1;0<=r;r--)(i=e[r])&&((n=i.onparentchanged)&&n.call(i,null),i.parent=null,i.autoDispose=!0,i.__is_locate=!1,s.push(i));s[0]&&this.__children_dirty(2,-1,s),this.__update_dirty<2&&this.__arrange_delay(2)},this.__children_dirty=function(t,e,i){var n=this.__children_patch;if(n){var s=n.length-3;t===n[s++]&&n[s++]===e?(s=n[s+1]).apply(s,i):n.push(t,e,i)}else this.__children_patch=[t,e,i],this.renderer.__children_dirty(this)},this.__update_dirty=2,this.__arrange_delay=function(t){var e=this.parent;this.__update_dirty=t,e&&(t=this.__auto_width||this.__auto_height?2:1,e.__update_dirty<t&&e.__arrange_delay(t))},this.find=function(t){return new flyingon.Query(t,[this])},this.findById=function(t,e){var i,n=new flyingon.Query;return t&&(i=flyingon.__find_id(!1!==e?this.all():this,t)).push.apply(n,i),n},this.findByType=function(t,e){var i,n=new flyingon.Query;return t&&(i=flyingon.__find_type(!1!==e?this.all():this,t)).push.apply(n,i),n},this.findByClass=function(t,e){var i,n=new flyingon.Query;return t&&(i=flyingon.__find_class(!1!==e?this.all():this,t)).push.apply(n,i),n},this.all=function(t){var e;t=t||[];for(var i=0,n=this.length;i<n;i++)(e=this[i])&&(t.push(e),0<e.length&&e.all(t));return t},(!t||t.prototype instanceof flyingon.Control)&&(this.__validate=function(t,e){for(var i,n,s=0,r=this.length;s<r;s++)(i=this[s])&&(n=i.__validate)&&n.call(i,t,e)},this.subscribeBind=function(t,e){var i;r&&r.subscribeBind.call(this,t,e);for(var n=0,s=this.length;n<s;n++)(i=this[n])&&!i.__dataset&&i.subscribeBind(t,e);return this}),this.serialize=function(t){return r&&r.serialize.call(this,t),0<this.length&&t.writeProperty("children",this,!0),this},this.deserialize_children=function(t,e){if("function"==typeof e){var i=[];e(i),e=i}this.push.apply(this,t.readArray(e,this.childrenClass))},this.dispose=function(){for(var t=this.length-1;0<=t;t--)this[t].dispose(!1);return r?r.dispose.apply(this,arguments):this.__events&&this.off(),this}}),flyingon.Control.extend("Panel",function(t){var e=flyingon.Panel;this.defaultWidth=300,this.defaultHeight=150,this.defaultValue("droppable",!0),this.defineProperty("layout",null,{group:"layout",set:function(t,e){this.__layout=null,this.view&&this.renderer.layout(this,e)}}),flyingon.fragment("f-container",this,t),this.__locate_host=!0,this.update=function(){var t=this.parent;if(this.__update_dirty=2,t){var e=this.__auto_width||this.__auto_height?2:1;t.__update_dirty<e&&t.__arrange_delay(e)}else this.__top_control&&flyingon.__update_delay(this);return this},this.__arrange_delay=function(t){var e=this.parent;this.__update_dirty=t,e?(t=this.__auto_width||this.__auto_height?2:1,e.__update_dirty<t&&e.__arrange_delay(t)):this.__top_control&&flyingon.__update_delay(this)},this.onmeasure=function(){var t=(this.offsetHeight<<16)+this.offsetWidth,e=this.__auto_width,i=this.__auto_height;if(this.__size_tag!==t&&(this.__size_tag=t,this.__update_dirty=2),!e&&!i)return!1;this.renderer.locate(this),e&&(this.offsetWidth=this.arrangeRight+this.borderLeft+this.borderRight),i&&(this.offsetHeight=this.arrangeBottom+this.borderTop+this.borderBottom)},this.onparentchanged=function(t){if(t&&!(t instanceof e))throw"Panel can only be used as the child node of Panel"}}).register(),flyingon.Panel.extend("GroupBox",function(i){this.defaultValue("border",1),this.defineProperty("header",25,{set:function(t,e){var i;this.view&&this.renderer.patch(this,t,e),(i=this.parent||this).__update_dirty<2&&i.__arrange_delay(2)}}),this.defineProperty("align","left",{set:this.render}),this.defineProperty("icon","",{set:this.render}),this.defineProperty("text","",{set:this.render}),this.defineProperty("collapsable",0,{set:this.render}),this.defineProperty("collapsed",!1,{set:function(t,e){var i;this.view&&this.renderer.patch(this,t,e),!e&&(e=this.mutex())&&this.__do_mutex(e),(i=this.parent||this).__update_dirty<2&&i.__arrange_delay(2)}}),this.defineProperty("mutex",""),this.__do_mutex=function(t){var e,i=this.parent;if(i)for(var n=0,s=i.length;n<s;n++)(e=i[n])&&e!==this&&e.__do_mutex&&e.mutex()===t&&e.collapsed(!0)},this.onmeasure=function(){if(this.collapsed())this.offsetHeight=this.header()+1;else{var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;i.onmeasure.call(this),this.offsetHeight+=this.header()}},this.arrangeArea=function(){var t=this.header();this.arrangeHeight-=t,this.arrangeBottom-=t}}).register(),flyingon.Control.extend("Splitter",function(t){this.defaultWidth=this.defaultHeight=4,this.vertical=!1}).register(),flyingon.Panel.extend("Plugin",function(i){this.loadPlugin=function(t){},this.openPlugin=function(t){},this.closePlugin=function(){},this.__class_init=function(t){var e=flyingon.__load_plugin;i.__class_init.apply(this,arguments),e&&t!==flyingon.Plugin&&e(t)}}).register(),flyingon.plugin=function(t,e){return e||(e=t,t=flyingon.Plugin),t.extend(e).init()},flyingon.Control.extend("ListBox",function(t){function e(){this.__template=null,this.__data_list&&this.renderer.patch(this,"update")}function i(t){this.__data_list=t,this.renderer.patch(this,"update")}this.defaultWidth=200,this.defaultHeight=100,this.defaultValue("border",1),this.defaultValue("padding",4),this.defineProperty("checked","none",{set:e}),this.defineProperty("columns",1,{set:e}),this.defineProperty("clear",!1,{set:e}),this.defineProperty("template",null,{set:e}),this["item-height"]=this.defineProperty("itemHeight",21,{set:e}),this.defineProperty("items",null,{set:function(t,e){flyingon.DataList.create(e,i,this)}}),this.defineProperty("value","",{set:this.__render}),this.defineProperty("separator",",")}).register(),flyingon.Control.extend("RadioButton",function(t){this.defineProperty("name","",{set:this.render}),this.value=this.defineProperty("checked",!1,{set:this.render}),this.readonly=this.disabled}).register(),flyingon.Control.extend("CheckBox",function(t){this.defineProperty("name","",{set:this.render}),this.value=this.defineProperty("checked",!1,{set:this.render}),this.readonly=this.disabled}).register(),flyingon.fragment("f-TextBox",function(){this.defaultWidth=150,this.defaultHeight=25,this.defineProperty("readonly",!1,{set:this.render}),this.selectionStart=function(t){return this.view?this.renderer.selectionStart(this,t):void 0===t?0:this},this.selectionEnd=function(t){return this.view?this.renderer.selectionEnd(this,t):void 0===t?0:this},this.select=function(){return this.renderer.select(this),this},flyingon.fragment("f-validate",this)}),flyingon.Control.extend("TextBox",function(t){this.__type="text",this.defineProperty("placeholder","",{set:this.__render_value}),this.text=this.defineProperty("value","",{set:this.__render_value}),flyingon.fragment("f-TextBox",this)}).register(),flyingon.TextBox.extend("Password",function(t){this.__type="password"}).register(),flyingon.Control.extend("Memo",function(t){this.defaultWidth=400,this.defaultHeight=100,this.text=this.defineProperty("value","",{set:this.render}),flyingon.fragment("f-textbox",this)}).register(),flyingon.Control.extend("TextButton",function(t){var e,i=this.__render_fn("button");this.__type="",flyingon.fragment("f-TextBox",this),this.defineProperty("inputable",!1,{set:this.render}),this.defineProperty("icon","",{set:this.render}),this.defineProperty("button","show",{set:i}),this["button-size"]=this.defineProperty("buttonSize",20,{set:i}),this.defineProperty("placeholder","",{set:this.__render_value}),this.defineProperty("value","",{dataType:"object",set:this.__render_value}),this.__set_data=function(t){this.__data_list=t,this.renderer.patch(this,"value")},this.text=function(t){if(void 0===t)return""+(this.__storage||this.__defaults).value;this.value(t)},this.__list_text=function(t){if(void 0===t){var e=this.__data_list,i=this.__storage||this.__defaults;return e?e.text(i.value,this.__multi(i)?i.separator||",":""):i.value}this.value(t)},this.__multi=function(t){return!1},this.__to_value=function(t){return t},this.__on_click=function(){this.trigger("button-click")},this.__get_popup=function(){var t=e;return t?t.close("auto"):((t=e=new flyingon.Popup).autoDispose=!1,t.on("closed",function(){this.detach(0)}),t.width("auto").height("auto")),t}}).register(),flyingon.fragment("f-Number",function(t){this.defineProperty("digits",0,{dataType:"int",check:function(t){return 0<t?t:0},set:t}),this.defineProperty("thousands",!1,{set:t}),this.defineProperty("format","",{set:t})}),flyingon.TextButton.extend("Number",function(t){var s=flyingon.round;this.__type="up-down",this.defaultValue("inputable",!0),flyingon.fragment("f-Number",this,this.__render_value),this.defineProperty("value",0,{set:this.__render_value}),this.defineProperty("min",0,{set:this.__render_value}),this.defineProperty("max",0,{set:this.__render_value}),this.text=function(){var t,e=this.__storage||this.__defaults,i=e.value,n=e.digits;return i=s(i,n,!0),e.thousands&&(i=i.replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),3<n&&((t=i.split("."))[1]=t[1].replace(/(\d{3})(?=(\d{1,3})+)/g,"$1,"),i=t.join("."))),(t=e.format)?t.replace("{0}",i):i},this.__on_click=function(t){this.value(this.value()+(t?1:-1))},this.__to_value=function(t){return(t=t.match(/[\d,.]+/))?parseFloat(t[0].replace(/[,]/g,"")):0}}).register(),flyingon.fragment("f-ComboBox",function(){this.defineProperty("checked","none"),this.defineProperty("columns",1),this.defineProperty("clear",!1),this.defineProperty("template",null),this["item-height"]=this.defineProperty("itemHeight",21),this["popup-width"]=this.defineProperty("popupWidth",""),this["max-items"]=this.defineProperty("maxItems",10),this.defineProperty("separator",",")}),flyingon.TextButton.extend("ComboBox",function(t){var a;this.__type="f-combobox-button",flyingon.fragment("f-ComboBox",this),this.defineProperty("items",null,{set:function(t,e){flyingon.DataList.create(e,this.__set_data,this)}}),this.text=this.__list_text,this.__multi=function(t){return"checkbox"===t.checked},this.popup=this.__on_click=function(){var t,e=this.__get_popup(),i=(new flyingon.ListBox).on("change",function(t){var e=a;e.value(t.value),"checkbox"!==e.checked()&&e.__get_popup().close(),e.trigger("change","value",t.value)}),n=this.__data_list,s=this.__storage||this.__defaults,r=s.columns,o=s.itemHeight;this.onopening&&(this.onopening(),n=this.__data_list),i.border(0).checked(s.checked).columns(r).clear(s.clear).template(s.template).itemHeight(o).width(s.popupWidth).separator(s.separator).items(n||[]).value(s.value),0<r?(t=n?n.length:0,s.clear&&t++,t=Math.min(t,s.maxItems),1<r&&(t=(t+r-1)/r|0),o*=t):n&&(o*=n.length),a=this,i.height(o+8),e.push(i),e.show(this),this.trigger("opened")}}).register(),flyingon.Control.extend("Calendar",function(t){function e(){var t=this.__view_patch;t?t.update=!0:this.renderer.patch(this,"update",!0)}this.defaultWidth=this.defaultHeight=240,this.defaultValue("border",1),this.defaultValue("padding",8),this.defineProperty("value",null,{dataType:"date",set:e}),this.defineProperty("min","",{set:e}),this.defineProperty("max","",{set:e}),this.defineProperty("month",!1,{set:e}),this.defineProperty("time",!1,{set:e}),this.defineProperty("today",!1,{set:e}),this.defineProperty("clear",!1,{set:e})}).register(),flyingon.fragment("f-Date",function(){this.defineProperty("format","yyyy/M/dd",{set:this.__render_value}),this.defineProperty("min",""),this.defineProperty("max",""),this.defineProperty("time",!1),this.defineProperty("today",!1),this.defineProperty("clear",!1)}),flyingon.TextButton.extend("Date",function(t){var n;this.__type="f-date-button",flyingon.fragment("f-Date",this),this.defineProperty("value",null,{dataType:"date",set:this.__render_value}),this.text=function(){var t=this.__storage||this.__defaults,e=t.value;return e?e.format(t.format):""},this.popup=this.__on_click=function(){var t=this.__get_popup(),e=this.__storage||this.__defaults,i=n;i||(i=n=new flyingon.Calendar).border(0).on("selected",function(t){this.target.value(t.value),this.popup.close()}),i.value(e.value).min(e.min).max(e.max).time(e.time).today(e.today).clear(e.clear),i.oncheck=this.oncheck,i.target=this,(i.popup=t).push(i),t.show(this)}}).register(),flyingon.TextBox.extend("Time",function(t){this.text=this.defineProperty("value","",{check:flyingon.Time.check,set:this.render})}).register(),flyingon.Time.check=function(){function e(t,e){return t<=0?"00":(100<=t&&(t=0|(""+t).substring(0,2)),e<=t?"00":(t<10?"0":"")+t)}return function(t){return t&&(t=t.match(/\d+/g))?(t.length=3,t[0]=e(0|t[0],24),t[1]=e(0|t[1],60),t[2]=e(0|t[2],60),t.join(":")):""}}(),flyingon.TextButton.extend("Month",function(t){var n;this.__type="f-date-button",this.defineProperty("value",null,{dataType:"date",set:this.__render_value}),this.defineProperty("format","yyyy-MM",{set:this.__render_value}),this.defineProperty("min","",{set:this.__render_value}),this.defineProperty("max","",{set:this.__render_value}),this.text=function(){var t=this.__storage||this.__defaults,e=t.value;return e?e.format(t.format):""},this.popup=this.__on_click=function(){var t=this.__get_popup(),e=this.__storage||this.__defaults,i=n;i||(i=n=new flyingon.Calendar).border(0).month(!0).on("selected",function(t){this.target.value(t.value),this.popup.close()}),i.value(e.value).min(e.min).max(e.max),i.oncheck=this.oncheck,i.target=this,(i.popup=t).push(i),t.show(this)}}).register(),flyingon.Control.extend("Box",function(t){this.defaultWidth=200,this.defaultHeight=30,this.defaultValue("padding",4),this.__validate_box=!0,this.defineProperty("vertical",!1),flyingon.fragment("f-container",this,t),this.__set_validate=function(t,e){var i=this.__find_error();i?(i.__validate_text=t?t.text:"",i.visible(!!t),t&&!i.__no_text&&i.renderer.patch(i,"text",t.text),(i=this.parent)&&i.__update_dirty<2&&i.__arrange_delay(2)):e&&e.__set_validate(t)},this.__find_error=function(){for(var t=this.length-1;0<=t;t--)if(this[t].__box_error)return this[t]},this.__find_title=function(){for(var t=0,e=this.length;t<e;t++)if(this[t].__box_title)return this[t]},this.__error_title=function(t){var e;return(t=this.__find_title())&&(e=t.__storage)?e.text:""},this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;this.renderer.__measure_auto(this,t,e)}}).register(),flyingon.Control.extend("Title",function(t){this.defaultWidth=60,this.defaultHeight=22,this.defaultValue("padding","0 2"),this.__box_title=!0,this.defineProperty("text","",{set:this.__render_text}),this.defineProperty("html",!1,{set:this.__render_text}),this.defineProperty("line",!1,{set:function(t,e){e?this.addClass("f-title-line"):this.removeClass("f-title-line")}}),this.__check=function(){var t=this.parent;if(t)for(var e=0,i=t.length;e<i;e++)if(t[e].__required)return!0}}).register(),flyingon.Control.extend("Hint",function(t){var i=flyingon.validate;this.__box_error=!0,this.defaultWidth=30,this.defaultValue("visible",this.__visible=!1),this.defineProperty("type","text",{set:function(t,e){(this.__no_text="text"!==e)?this.__validate_event||(this.__validate_event=!0,this.on("mouseover",i.mouseover),this.on("mouseout",i.mouseout)):this.__validate_event&&(this.off("mouseover",i.mouseover),this.off("mouseout",i.mouseout)),this.view&&this.renderer.patch(this,t,e)}}),this.defineProperty("line",!1,{set:function(t,e){e?this.addClass("f-hint-line"):this.removeClass("f-hint-line")}})}).register(),Object.extend("TreeNode",function(){flyingon.fragment("f-visual",this),this.isTreeNode=!0,this.expanded=!1,this.checkedChildren=0,this.defineProperty("icon","",{set:this.render}),this.defineProperty("text","",{set:this.render}),this.defineProperty("checked",!1,{set:function(t,e){for(var i=this.parent;i&&i.isTreeNode;)(e?i.checkedChildren++:--i.checkedChildren)||!i.view||i.checked()||i.renderer.patch(i,t,!1),i=i.parent;this.view&&this.renderer.patch(this,t,e),this.trigger("checked-change","value",e)}}),this.defineProperty("delay",!1),flyingon.fragment("f-container",this,null,flyingon.TreeNode),this.__create_child=function(t,e){var i=new e,n=i.__storage||(i.__storage=flyingon.create(i.__defaults));for(var s in t)switch(s){case"text":case"icon":n[s]=""+t[s];break;case"checked":n[s]=!!t[s];break;case"expanded":t[s]&&(i.expanded=!0);break;case"children":case"items":i.push.apply(i,t[s]);break;default:n[s]=t[s]}return i},this.level=function(){for(var t=this.parent,e=0;t&&t.isTreeNode;)e++,t=t.parent;return e}}).register(),flyingon.Control.extend("Tree",function(e){this.defaultWidth=200,this.defaultHeight=300,this.defaultValue("border",1),this.defaultValue("padding",2),this.defineProperty("theme","default",{set:this.render}),this.defineProperty("checked",!1,{set:this.render}),this.defineProperty("icon",!0,{set:this.render}),this.defineProperty("editable",!1),this.format=null,flyingon.fragment("f-container",this,e,flyingon.TreeNode.init()),this.__create_child=flyingon.TreeNode.prototype.__create_child,this.load=function(t,e,i,n){var s,r,o,a=Object.create(null),l=[0,this.length],h=0;for(e=e||"id",i=i||"parentId",n=n||0;s=t[h++];)a[s[e]]=s;for(h=0;s=t[h++];)(r=a[o=s[i]])?(o=r.children)?o.push(s):r.children=[s]:l.push(s);this.splice.apply(this,l)},this.expand=function(t){if(t)this.__expand_node(t);else for(var e=0,i=this.length;e<i;e++)this.__expand_node(this[e]);return this},this.__expand_node=function(t){t.expanded||!1===this.trigger("expand","node",t)||(t.expanded=!0,t.view&&t.renderer.patch(t,"expand"))},this.expandTo=function(t,e){return arguments.length<2&&(e=t,t=null),this.__expand_to(t||this,0|e),this},this.__expand_to=function(t,e){e--;for(var i=t.length-1;0<=i;i--){var n=t[i];if(!n.expanded){if(!1===this.trigger("expand","node",n))continue;n.expanded=!0,n.view&&n.renderer.patch(n,"expand")}if(0<n.length)if(e)this.__expand_to(n,e);else for(var s=n.length-1;0<=s;s--){var r=n[s];r.expanded&&!1!==this.trigger("collapse","node",n)&&(r.expanded=!1,r.view&&r.renderer.patch(r,"collapse"))}}},this.collapse=function(t){if(t)this.__collapse_node(t);else for(var e=0,i=this.length;e<i;e++)this.__collapse_node(this[e]);return this},this.__collapse_node=function(t){t.expanded&&0<t.length&&!1!==this.trigger("collapse","node",t)&&(t.expanded=!1,t.view&&t.renderer.patch(t,"collapse"))},this.beginEdit=function(){},this.endEdit=function(){},this.findNode=function(t,e){if(t)return"function"==typeof t?function t(e,i){for(var n=0,s=e.length;n<s;n++){var r=e[n];if(i(r))return r;if(0<r.length&&(r=t(r,i)))return r}}(this,t):function t(e,i,n){for(var s=0,r=e.length;s<r;s++){var o=e[s];if((o.__storage||o.__defaults)[i]===n)return o;if(0<o.length&&(o=t(o,fn)))return o}}(this,t,e)},this.current=function(t,e){var i,n=this.__current;if(void 0===t)return n;if(n!==t&&(n&&(n.__current=!1),(this.__current=t)&&(t.__current=!0,e)))for(i=t;i&&i.isTreeNode;)i.expanded=!0,i=i.parent;if(this.view&&(n&&n.view&&n.renderer.current(n,!1),t&&t.view&&(t.renderer.current(t,!0),e)))for(i=t;i&&i.isTreeNode;)i.renderer.patch(i,"expand"),i=i.parent},this.scrollTo=function(t){this.view&&t.view&&this.renderer.scrollTo(this,t)},this.dispose=function(){for(var t=this.length-1;0<=t;t--)this[t].dispose(!1);return e.dispose.apply(this,arguments),this}}).register(),(flyingon.GridColumn=Object.extend(function(){var s=flyingon.Label;this.init=function(t){if(this.__cells=[],t){var e=this.__properties;for(var i in t)e[i]?this[i](t[i]):this[i]=t[i]}},this.type="",this.defineProperty("name","",{set:function(t,e){var i=this.grid;this.__name=e,i&&i.view&&(i.__columns.__keys=null,i.update())}}),this.defineProperty("title",null,{set:function(t,e){var i;if(this.view){if(this.view=!1,i=this.__cells){for(var n=i.length-1;0<=n;n--)i[n].view=null,i[n].dispose();i=i.__span}this.__set_title(e),this.grid&&this.grid.update(i||0<this.__cells.__span)}else this.__set_title(e)}}),this.defineProperty("size","100",{set:function(t,e){var i;this.view&&(i=this.grid)&&i.update(!0)}}),this.defineProperty("align","",{set:function(t,e){this.__align=e}}),this.defineProperty("readonly",!1,{set:function(t,e){this.__readonly=e,this.view&&this.renderer.patch(this,t,e)}}),this.__visible=!0,this.defineProperty("visible",!0,{set:function(t,e){var i=this.grid;this.__visible=e,i&&i.view&&i.update(!0)}}),this.defineProperty("resizable",!0),this.defineProperty("sortable",!0),this.defineProperty("draggable",!0),this.defineProperty("focused",!1),this.defineProperty("merge",0,{set:function(t,e){this.__merge=e}}),this.defineProperty("summary","",{set:function(){var t=this.grid;t&&t.view&&(t.__summary_list=this.__summary_fn=null,t.update())}}),this.defineProperty("precision",0,{dataType:"int"}),this.__set_title=function(t){var e=this.__cells;if(e.length=0,this.__span=!1,t instanceof Array)for(var i=0,n=t.length;i<n;i++)this.__create_header(s,e,t[i]);else this.__create_header(s,e,t);return e},this.__create_header=function(t,e,i){var n,s,r;i&&"object"==typeof i&&(s=0|i.size,r=0|i.span,(n=i.control)?n=flyingon.ui(n):i=i.text),n||(n=new t,i&&n.text(i)),0<s&&(n.__height=s),0<r&&(n.__span=r,this.__span=!0),e.push(n)},this.index=function(){var t=this.grid.__columns;return t.__show_tag!==this.__show_tag?t.indexOf(this):this.__index},this.__find_text=function(){var t,e=this.__storage||"";return e&&(e=e.title)&&"object"==typeof e?e instanceof Array?(t=e[0])&&t.__span?t&&t.text||t:(t=e[e.length-1])&&t.text||t:e.text:e},this.__span_size=function(t){for(var e,i=this.grid.__columns,n=this.__index,s=0;0<t&&(e=i[n+t]);)s+=e.__size,t--;return s},this.createControl=function(t,e){var i=new s;return e&&i.text(t.data[e]),i},this.__sync_column=function(t,e){(this.__storage2||(this.__storage2=flyingon.create(null)))[t]=e},flyingon.renderer.bind(this,"GridColumn")})).register=function(t,e){if(t){var i=flyingon.GridColumn.all||(flyingon.GridColumn.all=flyingon.create(null));if(!e&&i[t])throw'column "'+t+'" has exist';i[this.type=t]=this}return this},flyingon.GridColumn.extend(function(t){var n=flyingon.Label;this.__name="__column_no",this.defaultValue("size",25),this.defaultValue("draggable",!1),this.defaultValue("resizable",!1),this.defineProperty("no",!1,{set:function(t,e){this.__show_no=e}}),this.createControl=function(t,e){var i=new n;return i.defaultClass+=" f-grid-column-no",i},this.onshowing=function(t,e){this.__show_no&&t.text(e.__show_index+1)}}).register("no"),flyingon.GridColumn.extend(function(t){var i=flyingon.CheckBox;this.__name="__column_check",this.defaultValue("size",30),this.defaultValue("draggable",!1),this.defaultValue("resizable",!1),this.createControl=function(t){var e=new i;return e.__column_check=!0,e.defaultClass+=" f-grid-column-check",t.__checked&&e.checked(!0),e}}).register("check"),flyingon.GridColumn.extend(function(t){var n=flyingon.CheckBox;this.createControl=function(t,e){var i=new n;return e&&t.data[e]&&i.checked(!0),i}}).register("checkbox"),flyingon.GridColumn.extend(function(t){var n=flyingon.TextBox;this.defaultValue("focused",!0),this.createControl=function(t,e){var i=new n;return e&&i.value(t.data[e]),i}}).register("textbox"),flyingon.GridColumn.extend(function(t){var r=flyingon.TextButton;this.defaultValue("focused",!0),this.defineProperty("inputable",!1,{set:this.__sync_column}),this.defineProperty("icon","",{set:this.__sync_column}),this.defineProperty("button","show",{set:this.__sync_column}),this["button-size"]=this.defineProperty("buttonSize",16,{set:this.__sync_column}),this.createControl=function(t,e){var i=new r,n=this.__storage2;if(n)for(var s in n)i[s](n[s]);return e&&i.value(t.data[e]),i}}).register("textbutton"),flyingon.GridColumn.extend(function(t){var r=flyingon.Number;this.defaultValue("focused",!0),this.defaultValue("align","right"),flyingon.fragment("f-Number",this,this.__sync_column),this.createControl=function(t,e){var i=new r,n=this.__storage2;if(n)for(var s in n)i[s](n[s]);return e&&i.value(t.data[e]),i}}).register("number"),flyingon.GridColumn.extend(function(t){var r=flyingon.ComboBox;function i(t){this.__data_list=t}this.defaultValue("focused",!0),flyingon.fragment("f-ComboBox",this,this.__sync_column),this.defineProperty("items",null,{set:function(t,e){flyingon.DataList.create(e,i,this)}}),this.createControl=function(t,e){var i,n=new r;if((i=this.__data_list)&&n.items(i),n.onopening=this.onopening,i=this.__storage2)for(var s in i)n[s](i[s]);return e&&n.value(t.data[e]),n}}).register("combobox"),flyingon.GridColumn.extend(function(t){var o=flyingon.Date,a="format,min,max,time,today,clear".split(",").pair();this.defaultValue("focused",!0),flyingon.fragment("f-Date",this),this.createControl=function(t,e){var i,n,s=new o;if(n=this.__storage)for(var r in i=a,n)i[r]&&s[r](n[r]);return e&&s.value(t.data[e]),s}}).register("date"),flyingon.GridColumn.extend(function(t){var n=flyingon.Time;this.defaultValue("focused",!0),this.createControl=function(t,e){var i=new n;return e&&i.value(t.data[e]),i}}).register("time"),flyingon.GridColumns=Object.extend(function(){function l(t,e,i,n,s,r){for(var o,a,l,h,f=0,c=-1;n<s;)(a=t[n]).__index=n++,a.__offset=0,a.__visible&&(0<=(l=(a.__storage||a.__defaults).size)?l|=0:0<(l=parseFloat(l))&&(o=!0,h=l*e/100,0<(h-=l=0|h)&&1<=(r+=h)&&(r--,l++)),a.__start=i,i+=a.__size=l,f+=l,c<0&&a.__span&&(c=n-1));if(t.__size=f,0<=c)for(n=c;n<s;)a=t[n],n++;return o&&(t.__persent=!0),r}this.init=function(t){this.grid=t,this.__locked=[0,0,0,0]},flyingon.fragment("f-collection",this),this.__check_items=function(t,e,i){var n,s=flyingon.GridColumn,r=s.all,o=this.grid,a=e.length;for(this.__keys=null;i<a;)(n=e[i])instanceof s?n.grid&&n.remove():e[i]=n=new(n&&r[n.type]||s)(n),n.grid=o,i++;o.view&&o.update(!0)},this.__remove_items=function(t,e){var i,n=this.grid;this.__keys=null;for(var s=0,r=e.length;s<r;s++)(i=e[s]).grid=null,i.view&&i.renderer.unmount(i);n.view&&n.update(!0)},this.__compute_visible=function(t,e){var i,n,s=this.__locked,r=s[0],o=this.length;if(!(o<=0)){this.__arrange_start=t,t+=s[2],o-=s[1];for(var a=r;a<o;a++)if((i=this[a])&&i.__visible&&i.__start+i.__size>=t){r=a;break}n=t+this.__arrange_size-s[2]-s[3];for(a=r;a<o;a++)if((i=this[a])&&i.__visible&&i.__start>n){o=a+1;break}if(this.__visible_start=r,this.__visible_end=o,e&&this.__show_start<=r&&this.__show_end>=o)return!0;n=o+2,o=(o=this.length-s[1])<n?o:n,this[r]&&(r-=this[r].__offset),this.__show_start=r,this.__show_end=o}},this.__compute_size=function(t){var e,i=this.__locked,n=this.grid.__group_size,s=n,r=0,o=i[0],a=this.length;this.__arrange_size=t,this.__persent=!1,0<o&&(r=l(this,t,n,0,o,r),n=0,s+=i[2]=this.__size),0<(e=i[1])&&(r=l(this,t,0,a-e,a,r),a-=e,s+=i[3]=this.__size),l(this,t,n+i[2],o,a,r),this.__size+=s},this.find=function(t){return(this.__keys||function(t){for(var e,i,n=t.__keys=flyingon.create(null),s=0;e=t[s++];)(i=e.__storage)&&(i=i.name)&&(n[i]=e);return n}(this))[t]},this.__sync_visible=function(){for(var t=this.length-1;0<=t;t--){var e,i=this[t];i.__visible||(e=i.__storage)&&!e.visible||(i.__visible=!0)}},this.dispose=function(){for(var t=this.length-1;0<=t;t--){var e=this[t];e.grid=null,e.view&&e.renderer.unmount(e)}this.grid=null}}),flyingon.GridRow=Object.extend._(function(){this.id=0,this.parent=null,this.data=null,this.expanded=!1,this.level=function(){for(var t=this.parent,e=0;t;)e++,t=t.parent;return e},this.checked=function(t){if(void 0===t)return this.__checked||!1;if(this.__checked!==(t=!!t)){var e=this.grid.__checked_rows;t?e.push(this):e.splice(e.indexOf(this),1),this.view&&this.renderer.patch(this,"checked",this.__checked=t)}},this.dispose=function(){var t=this.length;if(0<t)for(var e=t-1;0<=e;e--)this[e].dispose();this.grid=null,this.view&&this.renderer.unmount(this)},flyingon.renderer.bind(this,"GridRow")}),flyingon.GroupGridRow=Object.extend._(function(t){this.__group_row=!0,this.parent=null,this.data=null,this.name="",this.level=0,this.expanded=!1,this.total=0,this.compute=function(t,e,i,n){var s,r=this.data;if(r&&e in r)s=r[e];else if(0<(s=this.length)){if(this.__sub_group)for(var o=0;o<s;o++)this[o].compute(t,e,i);(r||(this.data={}))[e]=s=i(this,e)}else s=0;return n?n(this,e,s):s},this.dispose=function(){var t=this.length;if(0<t)for(var e=t-1;0<=e;e--)this[e].dispose();this.grid=null,this.view&&this.renderer.unmount(this)},flyingon.renderer.bind(this,"GroupGridRow")}),flyingon.GridView=flyingon.defineClass(Array,function(){function f(t,e,i,n,s,r){for(var o,a,l=0,h=n.length=r.length;l<h;l++)a=r[l],(o=n[l]=new t).grid=i,o.parent=s,o.data=a.data,e[o.id=a.uniqueId]=o,0<a.length&&f(t,e,i,o,o,a)}function s(t,e){var i=t.splice(0);0<i.length&&(i=function t(e,i,n,s,r,o,a){var l,h=[],f=r[o++],c=_(s,f),u=!!r[o];for(var d in c)(s=c[d])&&((l=new e).grid=i,l.parent=n,l.name=f,l.text=d,l.level=a,l.total=s.length,(l.__sub_group=u)&&(s=t(e,i,l,s,r,o,a+1)),h.push.apply(l,s),h.push(l));return h}(flyingon.GroupGridRow,t.grid,null,i,e,0,0)).push.apply(t,i)}function _(t,e){for(var i,n,s,r,o=Object.create(null),a=0,l=t.length;a<l;a++)(i=t[a])&&(n=i.data)&&null!=(s=n[e])&&((r=o[s])?r.push(i):o[s]=[i]);return o}this.init=function(t){this.grid=t,this.view=[],this.keys=flyingon.create(null)},this.dataset=function(t){var e,i=this.grid;0<this.length&&this.dispose(!1),f(flyingon.GridRow,this.keys,i,this,null,t),(this.__group_view=!!(e=i.__groups))&&s(this,e),this.__dirty=!0},this.__change_group=function(t){var e,i,n;this.__group_view&&(n=(e=this).splice(0),e.grid.__columns.__sync_visible(),0<n.length&&(function t(e,i){for(var n,s,r=i.splice,o=0,a=e.length;o<a;o++)if(n=e[o])if(n.renderer.unmount(n),n.__sub_group)t(n,i);else if(0<(s=r.call(n,0)).length){for(var l=s.length-1;0<=o;o--)s[l].parent=null;i.push.apply(i,s)}}(n,i=[]),i.push.apply(e,i))),this.__sort&&this.sort.apply(this,this.__sort),(this.__group_view=!!t)&&s(this,t),this.__dirty=!0},this.__sync_view=function(){var t=this.view;return this.__dirty=!1,t.length=0,this.__group_view?function t(e,i){for(var n=0,s=i.length;n<s;n++){var r=i[n];e.push(r),r.expanded&&0<r.length&&t(e,r)}}(t,this):t.push.apply(t,t.slice.call(this,0)),t},this.__expand_row=function(t){if(t&&!t.expanded&&!1!==this.grid.trigger("expand","row",t)){if(t.expanded=!0,!(0<t.length))return!1;var e=this.view,i=[t.__show_index+1,0];!function t(e,i){var n;for(var s=0,r=e.length;s<r;s++)(n=e[s])&&(i.push(n),n.expanded&&0<n.length&&t(n,i))}(t,i),i.splice.apply(e,i),this.grid.update()}},this.__collapse_row=function(t){t&&t.expanded&&0<t.length&&!1!==this.grid.trigger("collapse")&&(t.expanded=!1,this.view.splice(t.__show_index+1,function t(e){var i,n=e.length,s=n;for(var r=0;r<n;r++)(i=e[r])&&i.expanded&&(s+=t(i));return s}(t)),this.grid.update())},this.find=function(t){return this.keys[t]||null},this.sort=function(i,t,e){if(0<this.length){var n,s=this.view.sort;n=t?function(t,e){return(t=t.data[i])<(e=e.data[i])?1:t===e?0:-1}:function(t,e){return t=t.data[i],(e=e.data[i])<t?1:t===e?0:-1},e?function t(e,i,n){n.call(e,i);for(var s=e.length-1;0<=s;s--){var r=e[s];r[0]&&t(r,i,n)}}(this,n,s):this.__group_view?function t(e,i,n){n.call(e,i);for(var s=e.length;s--;){var r=e[s];r.__sub_group?t(r,i,n):n.call(r,i)}}(this,n,s):s.call(this,n),this.__sort=[i,t,e],this.__dirty=!0}},this.__add=function(t,e,i){i&&(i=this.keys[i.uniqueId]||null),e=function(t,e,i,n,s){for(var r,o,a=[],l=0,h=s.length;l<h;l++)o=s[l],(r=new t).grid=i,r.parent=n,r.data=o.data,e[r.id=o.uniqueId]=r,0<o.length&&f(t,e,i,r,r,o),a.push(r);return a}(flyingon.GridRow,this.keys,this.grid,i,e),!i&&this.__group_view||(e.unshift(t,0),e.splice.apply(i||this,e)),this.__dirty=!0},this.__remove=function(t,e,i){var n,s=this.keys;i&&(i=s[i.uniqueId]),!i&&this.__group_view||(!0,e.splice.call(i||this,t,e.length));for(var r=e.length-1;0<=r;r--)(n=s[e[r].uniqueId])&&(n.view=!1,n.dispose());this.__dirty=!0},this.dispose=function(){for(var t=this.length-1;0<=t;t--)this[t].dispose();this.view.splice.call(this,0),!1===arguments[this.view.length=0]?this.keys=flyingon.create(null):this.grid=this.keys=null}}),flyingon.Control.extend("Grid",function(t){function i(t){var e=this.grid;e.__view.__add(t.index,t.rows,t.parent),e.update(!1)}function n(t){var e=this.grid;e.__view.__remove(t.index,t.rows,t.parent),e.update(!1)}this.init=function(){this.__columns=new flyingon.GridColumns(this),this.__view=new flyingon.GridView(this),this.__checked_rows=[]},this.defaultWidth=800,this.defaultHeight=400,this.defaultValue("border",1),this.__locked_top=this.__locked_bottom=0,this.__column_dirty=!0,this.__group_size=0,this.defineProperty("columns",null,{fn:function(t){var e=this.__columns;return void 0===t?e:0<=t?e[t]:("string"==typeof t&&(t=flyingon.parseJSON(t)),t instanceof Array?e.push.apply(e,t):e.push(t),this)}}),this.defineProperty("group",0,{set:function(t,e){0<e&&this.renderer.patch(this,"__render_group",!0),this.view&&(this.renderer.patch(this,"header",1),this.update())}}),this.defineProperty("header",30,{set:function(t,e){this.view&&(this.renderer.patch(this,t,2),this.update())}}),this.defineProperty("filter",0,{set:function(t,e){this.view&&(this.renderer.patch(this,t,e),this.update())}}),this.defineProperty("locked","",{set:function(t,e){var i=this.__columns.__locked;i[0]=i[1]=i[2]=i[3]=this.__locked_top=this.__locked_bottom=0,e&&(e=e.match(/\d+/g))&&(i[0]=0|e[0],i[1]=0|e[1],this.__locked_top=0|e[2],this.__locked_bottom=0|e[3]),this.view&&this.update(!0)}}),this["row-height"]=this.defineProperty("rowHeight",25),this.defineProperty("groups","",{set:function(t,e){var i=this.__view;this.__groups=e=e&&e.match(/\S+/g)||null,this.__group_size=e?20*e.length:0,0<i.length&&i.__change_group(e),this.trigger(e?"group":"ungroup"),this.renderer.patch(this,"__render_group",!0),this.view&&this.update(!0)}}),this.defineProperty("readonly",!0),this.defineProperty("reuse",!1),this["selected-mode"]=this.defineProperty("selectedMode",0),this["tree-column"]=this.defineProperty("treeColumn","",{set:function(t,e){this.__tree_column=e}}),this["tree-icon"]=this.defineProperty("treeIcon",!0),this.defineProperty("dataset",null,{fn:function(t){var e=this.__dataset||null;return void 0===t?e:(e===t&&this.__watch_list&&!1===flyingon.__do_watch(this,"dataset",t)||(this.__dataset=t,e&&(e.grid=null,e.subscribe(this,!0),e.off("add",i),e.off("remove",n)),t?(t.subscribe(t.grid=this),t.on("add",i),t.on("remove",n),this.subscribeBind(t,{type:"bind"})):this.__view.dispose(!1),this.view&&this.update()),this)}}),this.__error_title=function(t){var e=t.column;return e?e.__find_text():""},this.rows=function(t){var e=this.__view;return void 0===t?e:e[t]||null},this.currentView=function(){var t=this.__view;return t.__dirty?t.__sync_view():t.view},this.expand=function(t){var e,i=this.__view;if(t)t.expanded||!1===this.trigger("expand","row",t)||(e=1,t.expanded=!0);else for(var n=0,s=i.length;n<s;n++)(t=i[n])&&!t.expanded&&!1!==this.trigger("expand","row",t)&&(e=1,t.expanded=!0);return e&&(i.__dirty=!0,this.view&&this.update()),this},this.expandTo=function(t,e){return arguments.length<2&&(e=t,t=null),this.__expand_to(t||this.__view,0|e)&&(this.__view.__dirty=!0,this.view&&this.update()),this},this.__expand_to=function(t,e){var i;e--;for(var n=t.length-1;0<=n;n--){var s=t[n];if(!s.expanded){if(!1===this.trigger("expand","row",s))continue;s.expanded=!0,i=1}if(0<s.length)if(e)this.__expand_to(s,e)&&(i=1);else for(var r=s.length-1;0<=r;r--){var o=s[r];o.expanded&&!1!==this.trigger("collapse","row",s)&&(o.expanded=!1,i=1)}}return i},this.collapse=function(t){var e,i=this.__view;if(t)t.expanded&&!1!==this.trigger("collapse","row",t)&&(e=1,t.expanded=!1);else for(var n=0,s=i.length;n<s;n++)(t=i[n])&&t.expanded&&!1!==this.trigger("collapse","row",t)&&(e=1,t.expanded=!1);return e&&(i.__dirty=!0,this.view&&this.update()),this},this.checkedRows=function(){return this.__checked_rows},this.removeCheckedRows=function(){var t=this.__checked_rows;if(t&&0<t.length){var e=this.dataset();t.sort(function(t,e){return t.__show_index>e.__show_index?-1:1});for(var i=t.length;i--;){var n=e.uniqueId(t[i].id);n&&n.remove()}}return t},this.current=function(){return this.__current||null},this.__set_current=function(t,e){var i=this.__current;i!==t&&(this.__current=t,i&&(i.__current=!1),t&&(t.__current=!0),e&&this.view&&(i&&i.view&&i.renderer.patch(i,"current",!1),t&&t.view?t.renderer.patch(t,"current",!0):this.__click_move||(this.__show_row=t)))},this.__subscribe_all=!0,this.subscribeBind=function(t,e){var i,n=this.__view,s=e.row||t.current();switch(s=s&&n.find(s.uniqueId)||null,e.type){case"move":this.__set_current(s,!0);break;case"change":s&&(i=s.__cells)&&(i=i[e.name])&&(i.value||i.text).call(i,s.data[e.name]);break;case"bind":this.__focus_cell=null,this.__checked_rows.length=0,n.dataset(t),this.__set_current(s||n[0]),this.update(!1)}},this.__change_value=function(t){var e,i,n=this.__dataset,s=t.column;n&&s&&(e=s.__name)&&(i=t.row)&&(i=n.uniqueId(i.id))&&i.set(e,(t.value||t.text).call(t))},this.sort=function(t,e){t&&(this.__view.sort(t,e,!!this.__tree_column),this.update(!1))},this.update=function(t){var e=this.__view_patch;return t&&(this.__column_dirty=!0),e?e.update=!0:this.renderer.patch(this,"update",!0),this};var s=1;this.__compute_columns=function(){var t=this.__columns,e=this.offsetWidth-this.borderLeft-this.borderRight,i=this.__column_dirty,n=t.__arrange_size!==e;return n&&(t.__arrange_size=e),(i||n&&t.__persent)&&(this.__column_dirty=!1,t.__show_tag=s++,t.__compute_size(e)),(i||n)&&t.__compute_visible(0|this.scrollLeft),e},this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;var i,n,s=this.__storage||this.__defaults;this.__compute_columns(),i=this.__columns.__size+this.borderLeft+this.borderRight,n=this.currentView().length*s.rowHeight,n+=s.header+s.group,n+=this.borderTop+this.borderBottom,n=e?(this.offsetHeight=n+(!t&&this.offsetWidth<i?flyingon.hscroll_height:0),!1):n>this.offsetHeight,t&&(this.offsetWidth=i+(n?flyingon.vscroll_width:0))},this.dispose=function(){this.__columns.dispose(),this.__view.dispose(),this.__columns=this.__view=this.__checked_rows=null,t.dispose.call(this)}}).register(),flyingon.Grid.summary=function(){var n=flyingon.create(null);function t(t,e,i){if(t=t.toLowerCase(),"function"!=typeof e)return n[t]||n.sum;n[t]=[e,i]}return t("sum",function(t,e){for(var i,n=Decimal.singleton(0),s=t.length-1;0<=s;s--)(i=t[s])&&(i=i.data)&&n.plus(i[e]);return n.value}),t("avg",n.sum[0],function(t,e,i){return Decimal.singleton(i).div(t.total)}),t("max",function(t,e){for(var i,n=-1/0,s=t.length-1;0<=s;s--)(i=t[s])&&(i=i.data)&&(i=i[e])>n&&(n=i);return n}),t("min",function(t,e){for(var i,n=1/0,s=t.length-1;0<=s;s--)(i=t[s])&&(i=i.data)&&(i=i[e])<n&&(n=i);return n}),t}(),flyingon.Panel.extend("TabPage",function(t){this.defaultValue("layout","vertical-line"),this.defineProperty("key",""),this.defineProperty("icon","",{set:this.render}),this.defineProperty("text","",{set:this.render}),this.defineProperty("buttons","",{set:this.render}),this.defineProperty("closable",!1,{set:this.render}),this.selected=function(){var t,e=this.parent;return e&&(t=e.__storage)&&e[t.selected]===this||!1}}).register(),flyingon.Panel.extend("Tab",function(t){function e(t,e){this.__reset_header=!0,this.__update_dirty<2&&this.__arrange_delay(2)}function i(t,e){this.__update_dirty<2&&this.__arrange_delay(2)}this.defineWidth=this.defaultHeight=300,this.defaultValue("border",1),this.__scroll_header=0,this.__reset_header=!0,this.defineProperty("theme","default",{set:function(t,e){this.view&&this.renderer.patch(this,t,e)}}),this.defineProperty("direction","top",{set:e}),this.defineProperty("header",30,{set:e}),this.defineProperty("offset",2,{set:e}),this.defineProperty("scroll",16,{set:e}),this.defineProperty("size",60,{set:i}),this.defineProperty("fill",!1,{set:i}),this.defineProperty("start",0,{set:i}),this.defineProperty("end",0,{set:i}),this.defineProperty("space",2,{set:i}),this.defineProperty("selected",-1,{set:function(t,e){!0!==this.__selectedPage&&this.selectedPage(this[e],!1)}}),this.selectedPage=function(t,e){var i,n=this.__selectedPage;return void 0===t?void 0!==n?n:this.__selectedPage=this[this.selected()]:(n===t||t&&t.parent!==this||(n&&n.view_head&&n.renderer.selected(n,!1),i=t?(t&&t.view_head&&t.renderer.selected(t,!0),this.view&&this.renderer.patch(this,"selected",t,"tag",e),this.indexOf(t)):(t=null,-1),!1!==e&&(this.__selectedPage=!0,this.selected(i)),this.__selectedPage=t,this.trigger("tab-change","current",t,"last",n,"tag",e)),this)},flyingon.fragment("f-container",this,t,flyingon.TabPage);var n=this.__remove_items;this.__remove_items=function(t,e){var i=this.selected();n.apply(this,arguments),this.selectedPage(this[i]||this[--i]||null,"remove")},this.findByKey=function(t,e){for(var i=this.length-1;0<=i;i--)if(this[i].key()===t)return e&&this.selected(i),this[i]},this.findByText=function(t,e){for(var i=this.length-1;0<=i;i--)if(this[i].text()===t)return e&&this.selected(i),this[i]}}).register(),flyingon.Panel.extend("Popup",function(){this.__top_control=!0,this.__auto_width=this.__auto_height=!0,this.shown=!1,this.defaultValue("border",1),this.defaultValue("width","auto"),this.defaultValue("height","auto"),this.defineProperty("closeLeave",!1),this.defineProperty("closeAway",!1),this.defineProperty("direction","bottom"),this.defineProperty("align","left"),this.defineProperty("reverse",!0),this.show=function(t,e){return this.renderer.show(this,t,e,this.direction(),this.align(),this.reverse()),this.shown=!0,this},this.showAt=function(t,e){return this.renderer.showAt(this,t,e),this.shown=!0,this},this.close=function(t){return t=t||"ok",!1!==this.trigger("closing","closeType",t)&&(this.view&&this.renderer.close(this),this.shown=!1,this.trigger("closed","closeType",t),this.autoDispose&&this.dispose(),this)}}).register(),Object.extend("ToolTip",function(){this.defineProperty("text",""),this.defineProperty("html",!1),this.defineProperty("direction","right"),this.defineProperty("reverse",!0),this.defineProperty("width","auto"),this.show=function(t){return this.renderer.show(this,t),this},this.close=function(){return this.renderer.close(this),this},flyingon.renderer.bind(this,"ToolTip")}).register(),function(){var i,n=document.createElement("div"),s=document.createElement("div");function e(t){var e=n.style;switch(r(),n.innerHTML=(t.loading?'<span class="yx-loading"></span>':"")+"<span>"+t.text+"</span>",(t.mask||t.loading&&!1!==t.mask)&&document.body.appendChild(s),document.body.appendChild(n),e.cssText=t.style||"",e.left=(window.innerWidth-n.offsetWidth>>1)+"px",t.position){case"top":e.top=null==t.offset?".8rem":t.offset;break;case"bottom":e.bottom=null==t.offset?".8rem":t.offset;break;default:e.top=(window.innerHeight-n.offsetHeight>>1)+"px"}i=setTimeout(r,t.time||2500)}function r(){var t;i=0,(t=n.parentNode)&&t.removeChild(n),(t=s.parentNode)&&t.removeChild(s)}n.className="yx-toast",s.className="yx-mask",this.toast=function(t){i&&clearTimeout(i),t&&("string"==typeof t&&(t={text:t}),0<t.delay?i=setTimeout(function(){e(t)},t.delay):e(t))},this.toast.hide=function(){i&&clearTimeout(i),r()}}.call(flyingon),flyingon.Panel.extend("Dialog",function(i){var n=[];this.__top_control=!0,this.shown=!1,this.defaultValue("border",1),this.defaultValue("padding",2),this.defineProperty("header",28,{set:function(t,e){this.view&&this.renderer.patch(this,t,e),this.__update_dirty<2&&this.__arrange_delay(2)}}),this.defineProperty("icon","",{set:this.render}),this.defineProperty("text","",{set:this.render}),this.defineProperty("closable",!0,{set:this.render}),this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(!t&&!e)return!1;i.onmeasure.call(this),e&&(this.offsetHeight+=this.header())},this.arrangeArea=function(){var t=this.header();this.arrangeHeight-=t,this.arrangeBottom-=t},this.show=function(){return this.renderer.show(this),this.shown=!0,this.active(),this},this.showDialog=function(){return this.renderer.show(this,!0),this.shown=!0,this.active(),this},this.moveTo=function(t,e){this.shown&&this.renderer.moveTo(this,t,e)},this.center=function(){this.shown&&this.renderer.center(this)},this.active=function(){var t=n[n.length-1];if(t!==this){var e=n.indexOf(this);0<=e&&n.splice(e,1),n.push(this),t&&(t.renderer.active(t,!1),t.trigger("deactivated")),this.renderer.active(this,!0),this.trigger("activated")}else t&&this.renderer.active(this,!0)},this.activated=function(){return n[n.length-1]===this},this.close=function(t){return t||(t="ok"),!1!==this.trigger("closing","closeType",t)&&(this.view&&this.renderer.close(this),this.shown=!1,n.splice(n.indexOf(this),1),n[0]&&n[n.length-1].active(),this.trigger("closed","closeType",t),this.autoDispose&&this.dispose()),this}}).register(),flyingon.Panel.extend("Pagination",function(t){this.defaultHeight=32,this.defaultValue("border",1),this.defaultValue("padding",4),this.defaultValue("layout","dock");var e=[{Class:"ComboBox",className:"f-page-records",tag:"records",width:60,popupWidth:60,items:[10,20,30,50,100,200,500]},{Class:"Separator"},{Class:"Icon",icon:"f-page-first",tag:"first"},{Class:"Icon",icon:"f-page-previous",tag:"previous"},{Class:"TextBox",className:"f-page-current",tag:"current",width:40,value:0,textAlign:"center"},{Class:"Label",width:10,text:"/"},{Class:"Label",className:"f-page-pages",tag:"pages",width:"auto",text:0},{Class:"Icon",icon:"f-page-next",tag:"next"},{Class:"Icon",icon:"f-page-last",tag:"last"},{Class:"Separator"},{Class:"Icon",icon:"f-page-refresh",tag:"refresh"},{Class:"Label",tag:"total",dock:"right"}];function i(t){var e=t.target.tag();e&&(e=this[e])&&"function"==typeof e&&(e.call(this),t.stop())}function n(t){var e=t.target;switch(e.tag()){case"records":this.records(0|e.value()),t.stop();break;case"current":this.moveTo(0|e.value()),t.stop()}}function s(){var t=this.__storage||this.__defaults;this.__pages=Math.ceil(t.total/t.records),this.__arrange_delay(2),this.moveTo(this.__index)||(this.refresh(),this.update())}this.init=function(){this.push.apply(this,e),this.on("click",i),this.on("change",n)},this.defineProperty("records",10,{set:s}),this.defineProperty("total",0,{set:s}),this.__index=1,this.__pages=0,this.current=function(){return this.__index},this.pages=function(){return this.__pages},this.first=function(){this.moveTo(1)},this.previous=function(){this.moveTo(this.__index-1)},this.next=function(){this.moveTo(this.__index+1)},this.last=function(){this.moveTo(this.__pages)},this.refresh=function(){this.trigger("refresh","index",this.__index)},this.moveTo=function(t){if((t|=0)<1?t=1:t>this.__pages&&(t=this.__pages),this.__index!==t)return this.trigger("refresh","index",this.__index=t),this.update(),!0},this.sync=function(t){if(t&&t!==this){var e,i=this.__storage;t.__index=this.__index,t.__pages=this.__pages,i&&((e=t.storage()).total=i.total,e.records=i.records),t.update()}},this.update=function(){for(var t=this.__index,e=this.__pages,i=this.length-1;0<=i;i--){var n=this[i];switch(n.tag()){case"records":n.value(this.records());break;case"first":case"previous":n.disabled(t<=1);break;case"current":n.value(t);break;case"pages":n.text(e);break;case"next":case"last":n.disabled(e<=t);break;case"total":n.text(flyingon.i18ntext("page.total").replace("{0}",this.total()))}}}}).register(),flyingon.Control.extend("Separator",function(t){this.defaultWidth=1,this.defaultValue("margin","2 4")}).register(),flyingon.fragment("f-menu",function(){flyingon.fragment("f-collection",this),this.__check_items=function(t,e,i){for(var n,s=flyingon.MenuItem;n=e[i];)"-"!==n&&(n instanceof s||(n=e[i]=(new s).load(n)),n.parent=this),i++},this.dispose=function(){for(var t,e=this.length-1;0<=e;e--)(t=this[e])&&t.__events&&t.off(),this[e]=null}}),Object.extend("MenuItem",function(){this.load=function(t){if(t){var e,i=this.storage();for(var n in t)switch(e=t[n],n){case"icon":case"text":i[n]=""+e;break;case"disabled":i[n]=!!e;break;case"children":e instanceof Array&&0<e.length&&this.push.apply(this,e);break;default:"function"==typeof e?this.on(n,e):i[n]=e}}return this},this.eventBubble="parent",this.defineProperty("icon",""),this.defineProperty("text",""),this.defineProperty("disabled",!1),this.defineProperty("tag",null),flyingon.fragment("f-menu",this)}),Object.extend("Menu",function(){this.show=function(t){return this.renderer.show(this,t),this},this.showAt=function(t,e){return this.renderer.showAt(this,t,e),this},this.close=function(){return this.renderer.close(this),this},flyingon.fragment("f-menu",this),flyingon.renderer.bind(this,"Menu");var n=this.Class.all;this.register=function(t,e){if(t){var i=n;if(!e&&i[t])throw'register name "'+t+'" has exist!';i[t]=this}return this}}).register().all=flyingon.create(null),flyingon.Panel.extend("ToolBar",function(){this.defaultHeight=32,this.defaultValue("border",1),this.defaultValue("padding",2),this.defaultValue("layout","dock")}).register(),flyingon.Sublayout=flyingon.Control.extend(function(t){this.defineProperty("scale",0,{check:function(t){return 0<t?t:0}}),this.defineProperty("layout",null,{set:function(){this.__layout=null}}),this.defaultWidth=this.defaultHeight=200,this.onmeasure=function(){var t=this.__auto_width,e=this.__auto_height;if(flyingon.arrange(this,this.__children,!1,!1,!0),!t&&!e)return!1;t&&(this.offsetWidth=this.arrangeRight+this.borderLeft+this.borderRight),e&&(this.offsetHeight=this.arrangeBottom+this.borderTop+this.borderBottom)},this.onlocate=function(){var t,e=this.__children,i=this.offsetLeft,n=this.offsetTop;if(e&&(i||n))for(var s=e.length-1;0<=s;s--)(t=e[s])&&(t.offsetLeft+=i,t.offsetTop+=n);return!1},this.controlAt=function(t,e){var i=this.__layout;return i?i.controlAt(this.__children,t,e):null},this.update=function(){}}),flyingon.Layout=Object.extend(function(){this.type="",this.defineProperty("condition",null),this.defineProperty("spacingX","2"),this.defineProperty("spacingY","2"),this.defineProperty("location",null,{set:function(t,e){this.__location="function"==typeof e?e:null}}),this.defineProperty("sublayouts",null,{set:function(t,e){this.__sublayouts=!!e}}),this.arrange=function(t,e,i,n){},this.rearrange=function(t,e,i,n){var s=!1;if(i&&(1===i||t.arrangeRight>t.arrangeLeft+t.arrangeWidth)&&((t.arrangeHeight-=flyingon.hscroll_height)<0&&(t.arrangeHeight=0),s=!(i=!1)),n&&(1===n||t.arrangeBottom>t.arrangeTop+t.arrangeHeight)&&((t.arrangeWidth-=flyingon.vscroll_width)<0&&(t.arrangeWidth=0),s=!(n=!1)),s)return t.arrangeRight=t.arrangeLeft,t.arrangeBottom=t.arrangeTop,this.arrange(t,e,i,n),!0},this.controlAt=function(t,e,i){for(var n,s,r=0,o=t.length;r<o;r++)if((n=t[r])&&e>=(s=n.offsetLeft)&&e<=s+n.offsetWidth&&i>=(s=n.offsetTop)&&i<=s+n.offsetHeight)return t[r];return null},flyingon.fragment("f-serialize",this),this.deserialize_type=!0}),function(){var h=flyingon.Layout.all=flyingon.create(null),n=flyingon.create(null),s=new flyingon.SerializeReader;function f(t,e){if("function"==typeof t)return new t;if(!1!==e&&t instanceof Array)return t;var i=new(h[t&&t.type]||h.flow);return i.deserialize(s,t),i}flyingon.Layout.register=function(t,e){if(t){if(!e&&h[t])throw'layout "'+t+'" has exist';n[t]=[h[this.type=t]=this,null]}return this},flyingon.layout=function(t,e){if(!t||!e||"function"==typeof e)return flyingon.load.key("layout",t,e);n[t]=[e,null]},flyingon.arrange=function(t,e,i,n,s){var r,o=t.__auto_height;t.arrangeLeft=t.paddingLeft,t.arrangeTop=t.paddingTop,r=t.borderLeft+t.borderRight+t.paddingLeft+t.paddingRight,r=t.offsetWidth-r,t.arrangeWidth=0<r?r:0,o?r=0:(r=t.borderTop+t.borderBottom+t.paddingTop+t.paddingBottom,(r=t.offsetHeight-r)<0&&(r=0)),t.arrangeHeight=r,(r=t.arrangeArea)&&(r.call(t),o&&(t.arrangeHeight=0)),t.arrangeRight=t.arrangeLeft,t.arrangeBottom=t.arrangeTop,e&&0<e.length?(!function(t,e,i,n,s){var r,o,a;(r=t.__sublayouts)&&(!0===r&&(r=t.__sublayouts=function(t){var e=t.length;e||(t=[t],e=1);var i,n,s,r=flyingon.SerializeReader,o=new Array(t.length),a=0,l=0;for(;s=t[--e];)(i=o[e]=new flyingon.Sublayout).deserialize(r,s),(n=i.scale())?((i.fixed=s=0|n)&&(a+=s),(i.weight=s=n-s)&&(l+=s)):(i.fixed=0,l+=i.weight=1);return o.fixed=a,o.weight=l,o}(t.sublayouts())),function(t,e){var i=e.length-t.fixed,n=t.weight,s=0;i<0&&(i=0);for(var r=0,o=t.length;r<o;r++){var a,l=t[r],h=l.fixed,f=l.weight;f&&(a=i*f/n|0,n-=f,h+=a,i-=a),l.__children=e.slice(s,s+=h)}}(r,i),i=r);if(o=t.__location){for(var l=i.length-1;0<=l;l--)a=i[l],o.prototype=a.__storage||a.__defaults,a.__location_values=new o(e,a,l);o.prototype=null}else for(var l=i.length-1;0<=l;l--)(a=i[l]).__location_values=null;n||s?function(t,e,i,n,s){var r,o;n&&e.hscroll&&((e.arrangeHeight-=flyingon.hscroll_height)<0&&(e.arrangeHeight=0),r=!0);s&&e.vscroll&&((e.arrangeWidth-=flyingon.vscroll_width)<0&&(e.arrangeWidth=0),o=!0);t.arrange(e,i,!r&&n,!o&&s),(r=r&&e.arrangeRight<=e.arrangeLeft+e.arrangeWidth)&&(e.arrangeHeight+=flyingon.hscroll_height);(o=o&&e.arrangeBottom<=e.arrangeTop+e.arrangeHeight)&&(e.arrangeWidth+=flyingon.vscroll_width);(r||o)&&t.arrange(e,i)}(t,e,i,n,s):t.arrange(e,i)}(r=flyingon.getLayout(t),t,e,i,n),i&&(t.__hscroll=t.arrangeRight>t.arrangeLeft+t.arrangeWidth),n&&(t.__vscroll=t.arrangeBottom>t.arrangeTop+t.arrangeHeight),t.arrangeRight+=t.paddingRight,t.arrangeBottom+=t.paddingBottom):t.__hscroll=t.__vscroll=!1},flyingon.getLayout=function(t){var e,i=t.__layout;return i||"function"!=typeof(e=t.layout)||(i=t.__layout=function(t){if(t){if("string"!=typeof t)return f(t);if(t=n[t])return t[1]||(t[1]=f(t[0]))}return new h.flow}(e.call(t))),i instanceof Array&&(i=function(t,e,i){for(var n,s,r,o,a=0,l=t.length;a<l;a++)if(s=t[a]){if(r=s.condition){if((o=r.width)&&(e<o[0]||e>o[1]))continue;if((o=r.height)&&(i<o[0]||i>o[1]))continue;n=s;break}n=s}if(n)return n.__layout||(n.__layout=f(n,!1));return new h.flow}(i,t.offsetWidth,t.offsetHeight)),i}}(),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=0,f=e.length;h<f;h++)(s=e[h]).measure(a,l,a,l,3),s.locate(r,o,a,l)}}).register("fill"),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=r+a,f=flyingon.pixel(this.spacingX(),a),c=0,u=e.length;c<u;c++){if((s=e[c]).measure(a,l,h-r||-1,l,2),s.locate(r,o,0,l,t),i&&t.arrangeRight>h)return this.rearrange(t,e,1,!1);r=t.arrangeX+f}}}).register("line"),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=o+l,f=flyingon.pixel(this.spacingY(),l),c=0,u=e.length;c<u;c++){if((s=e[c]).measure(a,l,a,h-l||-1,1),s.locate(r,o,a,0,t),n&&t.arrangeBottom>h)return this.rearrange(t,e,!1,1);o=t.arrangeY+f}}}).register("vertical-line"),flyingon.Layout.extend(function(t){this.defineProperty("lineHeight","0",{dataType:"int",check:function(t){return 0<t?t:0}}),this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=r+a,f=o+l,c=flyingon.pixel,u=c(this.spacingX(),a),d=c(this.spacingY(),l),_=c(this.lineHeight(),l),g=r,p=0,v=e.length;p<v;p++){if((s=e[p]).measure(a,l,h-r||-1,_||-1),g<r&&r+s.offsetWidth+s.marginRight>h&&(r=g,o=(_?o+_:t.arrangeBottom)+d),s.locate(r,o,0,_,t),n&&t.arrangeBottom>f)return this.rearrange(t,e,!1,1);r=t.arrangeX+u}}}).register("flow"),flyingon.Layout.extend(function(t){this.defineProperty("lineWidth","0",{dataType:"int",check:function(t){return 0<t?t:0}}),this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=r+a,f=o+l,c=flyingon.pixel,u=c(this.spacingX(),a),d=c(this.spacingY(),l),_=c(this.lineWidth(),a),g=o,p=0,v=e.length;p<v;p++){if((s=e[p]).measure(a,l,_||-1,f-o||-1),g<o&&o+s.offsetHeight+s.marginBottom>f&&(r=(_?r+_:t.arrangeRight)+u,o=g),s.locate(r,o,_,0,t),i&&t.arrangeRight>h)return this.rearrange(t,e,1,!1);o=t.arrangeY+d}}}).register("vertical-flow"),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r,o=t.arrangeLeft,a=t.arrangeTop,l=t.arrangeWidth,h=t.arrangeHeight,f=t.arrangeRight=o+l,c=t.arrangeBottom=a+h,u=l,d=h,_=flyingon.pixel,g=_(this.spacingX(),l),p=_(this.spacingY(),h),v=0,y=e.length;v<y;v++)switch((r=e[v]).locationValue("dock")){case"left":r.measure(u,d,l,h,2),r.locate(o,a,0,h),(l=f-(o=r.offsetLeft+r.offsetWidth+r.marginRight+g))<0&&(l=0);break;case"top":r.measure(u,d,l,h,1),r.locate(o,a,l,0),(h=c-(a=r.offsetTop+r.offsetHeight+r.marginBottom+p))<0&&(h=0);break;case"right":r.measure(u,d,l,h,2),f-=r.offsetWidth-r.marginLeft-r.marginRight,r.locate(f,a,0,h),(l=(f-=g)-o)<0&&(l=0);break;case"bottom":r.measure(u,d,l,h,1),c-=r.offsetHeight-r.marginTop-r.marginBottom,r.locate(o,c,l,0),(h=(c-=p)-a)<0&&(h=0);break;default:(s||(s=[])).push(r);continue}if(s)for(v=0,y=s.length;v<y;v++)r.measure(u,d,l,h,3),r.locate(o,a,l,h)}}).register("dock"),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=0,f=e.length;h<f;h++)(s=e[h]).measure(a,l),s.locate(r,o,a,l,t);(i||n)&&this.rearrange(t,e,i,n)},this.controlAt=function(t,e,i){return-1}}).register("cascade"),flyingon.Layout.extend(function(t){this.arrange=function(t,e,i,n){for(var s,r,o,a,l=t.arrangeLeft,h=t.arrangeTop,f=t.arrangeWidth,c=t.arrangeHeight,u=l+f,d=h+c,_=flyingon.pixel,g=0,p=e.length;g<p;g++)o=l+_((r=(s=e[g]).__location_values||s.__storage||s.__defaults).left,f),a=h+_(r.top,c),s.measure(f,c,u-l,d-h),s.locate(o,a,0,0,t)},this.controlAt=function(t,e,i){return-1}}).register("absolute"),flyingon.Layout.extend(function(t){this.defineProperty("size",20),this.arrange=function(t,e,i,n){for(var s,r,o=t.arrangeLeft,a=t.arrangeTop,l=t.arrangeWidth,h=t.arrangeHeight,f=e.length,c=this.size(),u=f-1,d=l-c*f,_=0;_<f;_++)(s=e[_]).measure(l,h,c,h,3),s.locate(o,a,0,h,t),r=d/u|0,o+=s.offsetWidth+r,d-=r,u--},this.controlAt=function(t,e,i){for(var n,s,r=0,o=t.length;r<o;r++)if((n=t[r])&&e>=(s=n.offsetLeft)&&e<=s+n.offsetWidth)return t[r];return null}}).register("uniform"),flyingon.Layout.extend(function(t){var c=flyingon.create(null),u=/L([^L\^]+)\^(\d+)/g,d=/[*%.\w]+|[\[\]{}()!]/g;function _(t,e,i,n,s,r,o,a){for(var l,h,f,c=n.width,u=0,d=n.length;u<d;u++)if((l=n[u])&&!l.disabled)if(f=l.group){if((r=g(t,e,i,f,s,r,o,a+l.start))<0)return-1}else{if(!(h=s[r++]))return-1;h.measure(e,i,c,f=l.size,3),h.locate(o,a+l.start,c,f,t)}return r}function g(t,e,i,n,s,r,o,a){for(var l,h,f,c=n.height,u=0,d=n.length;u<d;u++)if((l=n[u])&&!l.disabled)if(f=l.group){if((r=_(t,e,i,f,s,r,o+l.start,a))<0)return-1}else{if(!(h=s[r++]))return-1;h.measure(e,i,f=l.size,c,3),h.locate(o+l.start,a,f,c,t)}return r}this.defineProperty("vertical",!1),this.defineProperty("data","*[* * *] *[* * *] *[* * *]",{set:function(){this.__data=null}}),this.defineProperty("auto",0),this.arrange=function(t,e,i,n){var s=this.__data||(this.__data=function(t){var e,i=c[t];if(i)return i.clone();i=new p,(e=function(t){var s,e=u;function i(t,e,i){for(var n=[];n.push(e),0<--i;);return s=!0,n.join(" ")}for(;s=!1,t=t.replace(e,i),s;);return t}(t||(t="")).match(d))&&i.parse(e,0);return c[t]=i}(this.data())),r=this.vertical(),o=t.arrangeWidth,a=t.arrangeHeight,l=flyingon.pixel,h=l(this.spacingX(),o),f=l(this.spacingY(),a);s.measure(o,a,h,f,r,this.auto(),e),(r?g:_)(t,o,a,s,e,0,t.arrangeLeft,t.arrangeTop),(i||n)&&this.rearrange(t,e,i,n)};var h=Object.extend(function(){this.value=0,this.unit="",this.disabled=!1,this.group=null,this.start=0,this.size=0,this.clone=function(){var t,e=new h;return e.value=this.value,e.unit=this.unit,e.size=this.size,e.disabled=this.disabled,(t=this.group)&&(e.group=t.clone()),e}},!1),p=Object.extend(function(){var _=flyingon.pixel,o=parseFloat;function a(t,e){for(var i,n=this.length,s=t;s<e;s++)if(i=this[s]){switch(i.unit){case"*":this.weight+=i.value;break;case"%":this.persent.push(i.value);break;default:this.fixed+=i.value}this[n++]=i.clone()}this.length=n}function l(t,e){var i,n,s;if(!1===t)(t=this.__auto)&&([].splice.call(this,t.length),this.fixed=t.fixed,this.weight=t.weight,(s=t.persent)&&this.persent.splice(s));else if(0<t&&0<(e-=this.count())&&((i=(n=this.length)-t)<0&&(i=0),0<(t=this.count(i)))){this.__auto={length:n,fixed:this.fixed,weight:this.weight,persent:(s=this.persent)&&s.length},t=Math.ceil(e/t);for(var r=0;r<t;r++)a.call(this,i,n);return this.length}}this.length=0,this.fixed=0,this.weight=0,this.persent=null,this.parameters=null,this.start=0,this.size=0,this.parse=function(t,e){for(var i,n,s,r=this.length;i=t[e++];)switch(i){case"[":case"{":n||((n=this[r++]=new h).value=100,n.weight=100,this.width+=100),e=(n.group=new p).parse(t,e);break;case"]":case"}":return this.length=r,e;case"(":for(;")"!==(i=t[e++]);)i.indexOf("%")<0&&(i=_(i)),(this.parameters||(this.parameters=[])).push(i);break;case"!":n&&(n.disabled=!0);break;default:if(n=this[r++]=new h,"*"===i)n.value=100,n.unit="*",this.weight+=100;else if((s=o(i))===s){switch(n.unit=i.replace(s,"")){case"*":this.weight+=s;break;case"%":(this.percent||(this.persent=[])).push(this.value);break;default:this.fixed+=s=n.size=_(i)}n.value=s}}return this.length=r,e},this.count=function(t){var e,i=0;for(t|=0;e=this[t++];)e.disabled||((e=e.group)?i+=e.count():i++);return i},this.measure=function(t,e,i,n,s,r,o){var a=[t,e,i,n,s,r,0];0<r?a[6]=l.call(this,r,o.length):this.__auto&&l.call(this,!1),this.__keys!==(a=a.join(","))&&(this.compute(t,e,i,n,s),this.__keys=a)},this.compute=function(t,e,i,n,s){var r,o,a,l,h=this.parameters,f=this.weight,c=0,u=this.length;if(this.width=t,this.height=e,h&&((l=h[0])&&(i=0<l?l:_(l,i)),(l=h[1])&&(n=0<l?l:_(l,n))),a=(s=!s)?(o=e,n):(o=t,i),0<o&&(h=this.persent)){l=0;for(var d=(h=h.slice(0)).length-1;0<=d;d--)l+=h[d]=o*h[d]/100+.5|0;(o-=l)<0&&(o=0),h.index=0}0<o&&(o-=this.fixed+a*(u-1))<0&&(o=0);for(d=0;d<u;d++)if(r=this[d]){switch(r.unit){case"*":0<o?(l=r.value,o-=r.size=l*o/f|0,f-=l):r.size=0;break;case"%":r.size=h[h.index++]||0}r.start=c,c+=r.size+a,(l=r.group)&&(s?l.compute(t,r.size,i,n,s):l.compute(r.size,e,i,n,s))}},this.clone=function(){var t,e=new this.Class,i=this.length;if(e.length=i,e.fixed=this.fixed,e.weight=this.weight,e.parsent=(t=this.persent)&&t.slice(0),e.parameters=this.parameters,0<(t=this.length))for(var n=0;n<t;n++)e[n]=this[n].clone();return e}},!1)}).register("table"),function(a){var l,f=a.components,g=a.HtmlElement,h=new a.SerializeReader,r=a.__uniqueId,c=a.create,o=Array.prototype,n=c(o),u=(o.slice,o.push),d=o.splice,_=[null,null,null];function s(e){var i,t,n=this.Class.__widget_template,s=this.Class.__widget_options,r=n.analyse(),o=s.creating,a=s.created;if(n=n.ast,r){for(name in r=L(t=r,""),"function"==typeof(i=s.defaults)&&(i=i.call(this,r.prototype)),t)t[name]&&p(this,name,i&&i[name]||null);(t=s.extend)&&t.call(this,r.prototype),this.init=function(t){this.vmodel=new r(null,i),!1!==t&&this.__init_widget()},this.__init_widget=function(){var t,e=this.vmodel;(t=o)&&t.call(this,e),$(this,e,n),(t=a)&&t.call(this,e)},this.dispose=function(){var t=this.vmodel;return t&&(t.$dispose(),this.vmodel=null),e.dispose.apply(this,arguments),this}}else(t=s.extend)&&t.call(this,{}),this.init=function(){var t;(t=o)&&t.call(this,{}),this.deserialize(h,n),(t=a)&&t.call(this,{})}}function p(t,i,e){var n=i,s=i;0<i.indexOf("-")?n=i.replace(/-(\w)/g,v):s=i.replace(/([A-Z])/g,"-$1").toLowerCase(),t[s]=t.defineProperty(n,e||null,{set:function(t,e){this.vmodel.$set(i,e)}})}function v(t,e){return e.toUpperCase()}function y(t,e){if(!e)throw t+" options must input a object!";var i=e.template;if(!i)throw t+" options template not allow empty!";return"string"==typeof i&&"#"===i.charAt(0)&&(i=(i=a.dom_id(i))&&i.innerHTML||""),new a.view.Template(i)}function m(t,e){if("function"==typeof t)e=t,t="*";else if("function"!=typeof e)throw"watch must input a function!";return(this.__watches||(this.__watches=[])).push(t||"*",e),this}function w(t,e,i,n){var s,r,o,a,l=t;do{if(s=l.__watches)for(o=0;a=s[o++];)"*"===a||"*"===e||a===e?s[o++].call(l,r||(r={target:t,name:e,newValue:i,oldValue:n})):o++}while(l=l.__parent)}function x(t,e,i,n){var s;switch(n[1]){case 0:return n[3]&&(e=b(t,e,i,n)),(s=l)&&P(e,n[2],s),e[n[2]];case 1:return i&&(i=i[n[2]])?(e=i.__loop_vm,!n[0]&&(s=l)&&N(e,i,s),e[i.__loop_index]):T(t,n[2]);case 2:return i?(i=i[n[2]],(s=l)&&N(i.__loop_vm,i,s),i.__loop_index):function(t,e){var i;do{if((i=t.__loop_vm)&&i.__index_name===e)return t.__loop_index}while(t=t.parent);return-1}(t,n[2]);case 3:return k(t,e,i,n)}}function b(t,e,i,n){var s=n[3],r=s[0],o=1;for(e=1===r[1]?i&&(i=i[r[2]])?i.__loop_vm[i.__loop_index]:T(t,r[2]):(e.__top||e)[r[2]];r=s[o++];)e=e[r[2]];return e}function k(t,e,i,n,s){var r,o=n[4],a=[],l=0;if(e=e.__top||e,o=n[4])for(;r=o[l++];)a.push(x(t,e,i,r));return a.push(t),s&&a.push(s),e[n[2]].apply(e,a)}function C(e,i){return function(t){k(this,e,null,i,t)}}function T(t,e){var i;do{if((i=t.__loop_vm)&&i.__item_name===e)return i[t.__loop_index]}while(t=t.parent)}function P(t,e,i){var n=t.__depends||(t.__depends=c(null));u.apply(n[e]||(n[e]=[]),i)}function N(t,e,i){var n=n=t.__depends||(t.__depends=c(null)),s=e.__uniqueId||(e.__uniqueId=r.id++);u.apply(n[s]||(n[s]=[]),i)}function H(t,e,i){for(var n,s=0;n=i[s++];)n.set(i[s++],x(n,t,e,i[s++]))}function L(t,e){var i=r.prototype,n=i.__keys1=c(null),s=i.__keys2=c(null);function r(t,e){var i,n;if(this.__top=(this.__parent=t)?t.__top:this,e){if("object"==typeof e)for(var s in i=this.__keys1)(n=i[s])?this[s]=new n(this,e[s]):this[s]=e[s];else if(t)throw'"'+this.$name+'" must input a object!'}else{for(var s in i=this.__keys2)this[s]=new i[s](this);e=null}this.$data=e}for(var e in i.$name=e,i.$watch=m,i.$get=B,i.$set=S,i.$replace=z,i.$update=O,i.$dispose=A,e||(i.eventBubble="__up_vm",i.$on=a.on,i.$once=a.once,i.$off=a.off,i.$trigger=a.trigger),t){var o=t[e];if(!(0<o[1]))switch(o[0]){case 1:n[e]=s[e]=L(o[4],o[1]);break;case 2:n[e]=s[e]=j(o);break;default:n[e]=0}}return r}function B(t){var e;return(e=l)&&P(this,t,e),this[t]}function S(t,e){var i=this.__keys1[t];return i?(i=this[t])&&(i.$replace(e),w(this,t,e,i)):0===i&&(i=this[t])!==e&&(this[t]=e,w(this,t,e,i),(i=this.__depends)&&(i=i[t])&&H(this,null,i)),this}function z(t,e){var i=this.__keys1,n=this.$data;for(var s in this.$data=t=t&&"object"==typeof t?t:null,i)i[s]?this[s].$replace(t&&t[s],!1):(t||n)&&(this[s]=t&&t[s]);!1!==e&&this.$update()}function O(){var t=this.__depends;if(t)for(var e in t)H(this,null,t[e]);if(t||this.__top.__vm_created)for(var e in t=this.__keys2)this[e].$update()}function A(){var t=this.__keys1;for(var e in t)t[e]?this[e].$dispose():this[e]=null;this.__top=this.__parent=this.__depends=this.__watches=this.$data=null}function j(t){var e=i.prototype=c(n);function i(t,e){var i=this.__item_fn,n=e&&e.length;if(this.__top=(this.__parent=t).__top,0<n)if(i){this.length=n;for(var s=0;s<n;s++)this[s]=new i(this,e[s])}else u.apply(this,e)}return e.__item_name=t.item,e.__index_name=t.index,e.$name=t[2],e.$watch=m,e.$get=W,e.$set=M,e.$replace=R,e.$update=E,e.$dispose=D,1===t[0]||(t=t[4])&&1===t[0]?e.__item_fn=L(t[4],t[2]):t&&2===t[0]&&(e.__item_fn=j(t[4])),i}function W(t){var e;return(e=l)&&N(this,this.__controls[t],e),this[t]}function M(t,e){var i;return 0<=t?t<this.length&&((i=this[t])&&i.$replace?i.$replace(e):i!==e&&(this[t]=e,(i=this.__depends)&&(t=this.__controls[t])&&(t=t.__uniqueId)&&(i=i[t])&&H(this,null,i))):"length"===t&&this.splice(e),this}function R(t,e){var i=this.length;return 0<i&&this.splice(0,i),t&&0<t.length&&this.push.apply(this,t),!1!==e&&this.$update(),this}function E(t){var e=this.__depends;if(e)for(var i in e)H(this,null,e[i]);if(!1!==t&&this.__item_fn&&this.__controls)for(var n=0,s=this.length;n<s;n++)this[n].$update()}function D(){if(this.__item_fn)for(var t=this.length-1;0<=t;t--)this[t].$dispose();return this.__top=this.__parent=this.__depends=this.__watches=this.__controls=this.__template=this.__tag=this.__container=null,this}function V(t,e,i){for(var n=t.__item_fn,s=i,r=e.length;s<r;s++)e[s]=new n(t,e[s])}function e(t,e){var i,n,s=t.__controls;s&&(i=s[e],s.splice(e,1),i&&(n=t.__depends)&&delete n[i.__uniqueId],(n=t.__container)&&n.splice(e,1)),t.__item_fn&&t[e].$dispose()}function q(t,e,i){for(var n,s=t.__controls,r=e,o=s.length;r<o;r++)(n=s[r])&&(n.__loop_index+=i);t.__index_name&&t.__depends&&t.$update(!1)}function I(t,e){var i=t.__container;if(i){for(var n=e.length-1;0<=n;n--)(i[n]=e[n]).__loop_index=n;t.__depends&&t.$update(!1),i.renderer.patch(i,"__view_order"),i.__arrange_delay(2)}}function $(t,e,i){var n,s=c(null);e.__vm_created=!0,G(t,e,s,i),(n=i.children)&&X(t,e,s,n,f)}function Y(t,e,i,n,s){var r,o;return o=i.Class,s||(s=n[o])?r=new s:(r=new g).tagName=o,(o=r.vm)&&(o.__up_vm=t.__top),G(r,t,e,i),(o=i.children)&&X(r,t,e,o,n),r}function G(t,e,i,n){var s,r,o=l=_;for(var a in o[0]=t,n)switch(a){case"Class":case"children":case"#loop":break;case"#model":(r=t[a])&&(s=n[a],r.call(t,s[3]?b(t,e,i,s):e,s[2]));break;default:switch(s=n[a],a.charAt(0)){case":":o[1]=a=a.substring(1),o[2]=s,t.set(a,x(t,e,i,s));break;case"@":t.on(a.substring(1),C(e,s));break;case"#":(r=t[a])&&(o[1]=a,o[2]=s,r.call(t,x(t,e,i,s)));break;default:s&&"string"==typeof s&&"{"===s.charAt(0)&&(r=s.match(/^\{\{(\w+)\}\}$/))?t.addBind(a,r[1]):t.set(a,s)}}l=null}function X(t,e,i,n,s){for(var r,o=[],a=0,l=n.length;a<l;a++)(r=n[a])&&r["#loop"]?o.push.apply(o,F(t,e,i,r,s)):o.push(Y(e,i,r,s));o[0]&&t.push.apply(t,o)}function F(t,e,i,n,s){var r,o=[],a=n["#loop"],l=a[2];return(e=a[3]?b(t,e,i,a)[l]:(r=i&&i[l])?r.__loop_vm[r.__loop_index]:e[l]).__template=n,e.__container=t,e.__controls=o,e.__tag=t.lastChild,0<(r=e.length)&&K(o,e,0,r,i,s),o}function K(t,e,i,n,s,r){var o,a,l=e.__top,h=e.__template,f=h.Class,c=r[f],u=h["#loop"],d=u.item,_=u.index;if(d||_){for(;i<n;)c?o=c.__widget_template?new c(!1):new c:(o=new g).tagName=f,(a=o.vm)&&(a.__up_vm=l),o.__loop_vm=e,o.__loop_index=i++,d&&(s[d]=o),_&&(s[_]=o),G(o,l,s,h),(a=o.__init_widget)&&a.call(o),t.push(o),(a=h.children)&&X(o,l,s,a,r);d&&(s[d]=null),_&&(s[_]=null)}else for(;i++<n;)t.push(o=Y(l,s,h,r,c))}function J(t,e,i){for(var n,s,r=[],o=t.__container,a=t.__controls,l=o,h={};l;)(s=l.__item_vm)&&((n=s.item)&&(h[n]=l),(n=s.index)&&(h[n]=l)),l=l.parent;K(r,t,e,i,h,f),s=(s=a[0])?o.indexOf(s):(s=t.__tag)?o.indexOf(s)+1:0,r.unshift(e,0),a.splice.apply(a,r),r[0]+=s,o.splice.apply(o,r)}a.view=function(t){var e,i,n,s=y("view",t),r=t.defaults;return s.parse(),(i=s.analyse())&&(i=new(L(i,""))(null,r)),s=s.ast,(e=t.control)||(e=s.Class,e=(n=f[e])?new n:((n=new g).tagName=e,n)),(n=t.creating)&&n.call(e,i||{}),i?$(e,e.vmodel=i,s):e.deserialize(h,s),(n=t.created)&&n.call(e,i||{}),(n=t.host)&&a.show(e,n),e},a.widget=function(t,e){"string"!=typeof t&&(e=t,t="");var i=y("widget",e),n=f[i.parse().Class]||g;return(n=n.extend(s)).__widget_options=e,n.__widget_template=i,t?n.register(t,e.force):n.init(),n},n.push=function(t){var e=this.length,i=arguments.length;return 0<i&&(this.__item_fn&&V(this,arguments,0),u.apply(this,arguments),this.__controls&&J(this,e,e+=i)),e},n.pop=function(){var t=this.length;if(0<t)return e(this,t-1),o.pop.call(this)},n.unshift=function(t){var e=arguments.length;return 0<e&&(this.__item_fn&&V(this,arguments,0),o.unshift.apply(this,arguments),this.__controls&&J(this,0,e),e<this.length&&q(this,e,e)),this.length},n.shift=function(){var t;if(0<this.length)return e(this,0),t=o.shift.call(this),1<this.length&&q(this,0,-1),t},n.splice=function(t,e){var i,n=this.length,s=arguments.length;return(t|=0)<0&&(t+=n)<0?t=0:n<t&&(t=n),2<s&&this.__item_fn&&V(this,arguments,2),0<(i=d.apply(this,arguments)).length&&function(t,e,i){var n,s=t.__controls,r=t.__depends,o=i.length;if(s){if(r)for(var a=0;a<o;a++)(n=s[e+a])&&delete r[n.__uniqueId];s.splice(e,o),(n=t.__container)&&n.splice(e,o)}if(t.__item_fn)for(var a=0;a<o;a++)i[a].$dispose()}(this,t,i),0<(s-=2)&&this.__controls&&J(this,t,t+=s),t<this.length&&(s-=i.length)&&q(this,t,s),i},n.sort=function(t){var e=o.sort,i=this.length;if(1<i){var n,s=this.__controls;if(this.__item_fn)if(s){for(var r=i-1;0<=r;r--)this[r].__control=s[r];e.call(this,t);for(r=i-1;0<=r;r--)n=this[r],s[r]=n.__control,n.__control=null;I(this,s)}else e.call(this,t);else e.call(this,t),s&&this.$update()}},n.reverse=function(){if(1<this.length){var t=this.__controls,e=o.reverse;this.__item_fn?t?(e.call(this),t.reverse(),I(this,t)):e.call(this):(e.call(this),t&&this.$update())}}}(flyingon),flyingon.view.Template=Object.extend(function(){var r=flyingon.view.rule=flyingon.create(null);function c(t,e){return'"'+(e?"<"+e[0]+"...":"")+t+'" has syntax error!'}function a(t,e){var i,n;for(var s in(i=e.Class)&&(i=r[i])&&(n=e.children)&&n[0]&&function(t,e,i){for(var n=t[0],s=t[1]||n,r="string"==typeof n,o=0,a=i.length;o<a;o++)(r?i[o].Class===n:n.test(i[o].Class))||(i[o]={Class:s,children:[i[o]]})}(i,0,n),e){switch(s){case"Class":case"children":case"#loop":n=null;break;default:n=e[s]}if(n)switch(s.charAt(0)){case"#":case":":e[s]=0<n.indexOf("(")?f(t,n):h(t,n,0,0);break;case"@":e[s]=f(t,n)}}if(e=e.children)for(n=0;i=e[n++];)(i["#loop"]?o:a)(t,i)}function o(t,e){var i,n,s,r,o=e["#loop"].match(/[\w.-]+/g);o&&(i=o[0])?(i=h(t,i,2,0),(n=o[1])&&(l(t,n),(r=i[4]=t[i.item=n]=[0,1,n,null,null,0]).loop=i,(s=o[2])&&(l(t,s),t[i.index=s]=i[5]=[0,2,s,null,null,0])),a(t,e),n&&(r[t[n]=0]||r[5]||(i.item=i[4]=null),s&&(t[s][5]||(i[5]=i.index=null),t[s]=0))):a(t,e),e["#loop"]=i}function l(t,e){if(0<=e.indexOf("."))throw'loop "'+e+'" can not include "."!';if(t[e])throw'loop "'+e+'" has be used!'}function h(t,e,i,n){for(var s,r=e.match(/[\w-]+/g),o=null,a=0,l=r.length-1;a<l;a++){if(s=t[e=r[a]])switch(s[0]){case 1:t=s[4];break;case 0:s[0]=1,t=s[4]||(s[4]={})}else{if(0===s)throw'"'+e+'" is out of scope range!';s=t[e]=[1,0,e,o?o.slice(0):null,t={}]}o?o.push(s):o=[s]}if(s=t[e=r.pop()]){if(i){if(s[0])throw'"'+e+'" has be used!';s[0]=i}else s[1]&&s[5]++;return s}if(0===s)throw'"'+e+'" is out of scope range!';return t[e]=[i,n,e,o,null]}function f(t,e){var i,n,s,r,o=e.match(/[\w-.]+/g);if(0<=(e=o[0]).indexOf("."))throw'function "'+e+'" can not include "."!';if((n=t[e])&&2!==n[1])throw'function name "'+e+'" has be used!';if(n=t[e]=[0,3,o[0],null,null],o[1]){for(i=[],s=1;e=o[s++];)(r=t[e])?r[5]++:r=h(t,e,0,0),i.push(r);n[4]=i}return n}this.init=function(t){"string"==typeof t?this.template=t:this.ast=t},this.parse=function(t){var e,i=this.ast;if(!i&&(e=this.template)){if(i=function(t,e){var i,n,s,r,o,a=/[^\w-]/,l=/[^\w-:#@]/,h=[],f=0;for(;r=t[f++];)switch(r){case"<":if(i)throw c(r,n);if("/"===(r=t[f++])){if(!n||t[f]!==n.Class||">"!==t[f+1].charAt(0))throw'"'+r+t[f]+t[f+1]+'" not a valid close tag!';f++,h.pop(),n=h[h.length-1];break}if(r.match(a))throw'"'+r+'" not a valid node name!';o={Class:r},n?(n.children||(n.children=[])).push(o):e.push(o),h.push(n=o),i=!0;break;case"/":if(i&&">"===t[f++]){i=!1,s&&(n[s]=!0,s=null),h.pop(),n=h[h.length-1];break}throw c(r,n);case">":i&&(i=!1,s&&(n[s]=!0,s=null));break;case"=":if(i&&s){switch(r=t[f++]){case"<":case">":case"/":case"=":throw c(r,n)}o='"'===(o=r.charAt(0))||"'"===o?r.substring(1,r.length-1):r,n[s]=o,s=null;break}throw c(r,n);default:if(i)if(s&&(n[s]=!0),i=r.charAt(0),n&&">"===i)s=null,i=!1,0<=(r=r.substring(1)).indexOf("&")&&(r=flyingon.html_decode(r)),n.text=r;else{if(r.match(l))throw'"<'+n.Class+"..."+r+'" not a valid attribute name!';s=r}}return e}(e=(e=e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+<\s*\//g,"></")).match(/[<=/]|[\w-:#@]+|\>[^<>]+(?=\<\s*\/)|[>/]|"[^"]*"|'[^']*'/g),[]),!t&&i instanceof Array){if(i[1])throw"template can only one root node!";i=i[0]}if(!i)throw"template can not be empty!";if(i["#loop"])throw'template root nood can not use "#loop"!';this.ast=i}return i},this.analyse=function(){var t,e=this.vm;if(void 0===e&&(t=this.ast||this.parse())){for(t in a(e={},t),e)return this.vm=e;return this.vm=null}return e},r.table=[/tbody|thead|tfoot/,"tbody"],r.thead=r.tbody=r.tfoot=["tr"],r.tr=[/td|th/,"td"],r.ol=r.ul=["li"],r.dl=["dt"],r.dt=["dd"],r.select=["option"]},!1),function(o,a){var l=o.MouseEvent,n=o.KeyEvent,s=o.TouchEvent,t=o.dom_on,h=null,f=0;function e(t){var e,i=o.findControl(t.target);!i||(e=i.__storage)&&e.disabled||i.trigger(new l(t))}function i(t){var e,i=o.findControl(t.target);!i||(e=i.__storage)&&e.disabled||i.trigger(new n(t))}function r(t){var e,i=o.findControl(t.target);!i||(e=i.__storage)&&e.disabled||i.trigger(new s(t))}function c(t){var e,i=t.side,n=this.offsetWidth,s=this.offsetHeight;1==(1&i)?this.height(n=t.height-t.distanceY):2==(2&i)&&this.height(n=t.height+t.distanceY),4==(4&i)?this.width(s=t.width-t.distanceX):8==(8&i)&&this.width(s=t.width+t.distanceX),this.__top_control&&(this.measure(n,s),this.update()),(e=window.getSelection)?e.call(window).removeAllRanges():a.selection.empty()}function u(t){var e=o.findControl(t.target);(o.activeControl=e)&&(e.trigger("focus"),e.renderer.__do_focus(e,t))}function d(t){var e=o.findControl(t.target);o.activeControl=null,e&&(e.trigger("blur"),e.renderer.__do_blur(e,t))}o.show=function(t,e){if(!t.__top_control){if("string"==typeof e&&(e=a.getElementById(e)),!e)throw"can not find host!";var i=e.clientWidth,n=e.clientHeight;t.__top_control=!0,o.ready(),o.__update_patch(),e.appendChild(t.view||t.renderer.createView(t)),t instanceof o.Panel?(t.__location_values=null,t.offsetLeft=t.offsetTop=0,t.measure(i,n,i,n,n?3:1),t.renderer.locate(t)):t.renderer.update(t)}},o.hide=function(t,e){if(t.__top_control){var i,n=t.view;n&&(i=n.parentNode)&&i.removeChild(n),(t.__top_control=!1)!==e&&t.dispose()}},o.findControl=function(t){for(var e;t;){if(e=t.flyingon_id)return o.__uniqueId[e];t=t.parentNode}},t(a,"mousedown",function(t){var e,i=o.findControl(t.target);!i||(e=i.__storage)&&e.disabled||!1===i.trigger(h=new l(t))||(e=f)&&(f={side:e,width:i.offsetWidth,height:i.offsetHeight})}),t(a,"mousemove",function(t){var e,i,n=h;if(n&&(e=n.target)){var s=t.clientX-n.clientX,r=t.clientY-n.clientY;(i=f)?(i.distanceX=s,i.distanceY=r,c.call(e,i)):((t=new l(t)).mousedown=n,t.distanceX=s,t.distanceY=r,e.trigger(t))}else(e=o.findControl(t.target))&&((i=e.resizable)&&"none"!==i.call(e)?f=(e.__check_resize||function(t,e){var i,n,s=this.view.getBoundingClientRect(),r=0,o="";return"x"!==t&&(0<=(i=e.clientY-s.top)&&i<=4?(r=1,o="s"):(n=this.offsetHeight)-4<=i&&i<=n&&(r=2,o="n")),"y"!==t&&(0<=(i=e.clientX-s.left)&&i<=4?(r|=4,o+="e"):(n=this.offsetWidth)-4<=i&&i<=n&&(r|=8,o+="w")),a.body.style.cursor=o&&o+"-resize"||"",r}).call(e,i,t):(a.body.style.cursor="",(i=e.__storage)&&i.disabled||e.trigger(new l(t))))}),t(a,"mouseup",function(t){var e,i,n=h;n&&(e=n.target)?((i=f)&&(a.body.style.cursor="",f=0),(t=new l(t)).mousedown=n,t.distanceX=t.clientX-n.clientX,t.distanceY=t.clientY-n.clientY,e.trigger(t),h=null):!(e=o.findControl(t.target))||(i=e.__storage)&&i.disabled||e.trigger(new l(t))}),t(a,"click",e),t(a,"dblclick",e),t(a,"mouseover",e),t(a,"mouseout",e),t(a,"keydown",i),t(a,"keypress",i),t(a,"keyup",i),t(a,"touchstart",r),t(a,"touchmove",r),t(a,"touchend",r),t(a,"touchcancel",r),t(a,"change",function(t){var e=o.findControl(t.target);if(e){var i=new o.Event(t.type);i.dom=t.target,e.trigger(i),"file"===i.dom.type&&(i.dom.value="")}}),t(a,"contextmenu",function(t){var e=o.findControl(t.target);if(e){var i=new o.Event(t.type);if(i.original_event=t,!1===e.trigger(i))return!1;var n,s=o.Menu;do{if((n=e.__storage)&&(n=n.contextmenu)&&("string"==typeof n&&(n=s.all[n]),n instanceof s))return n.showAt(t.clientX,t.clientY),!1}while(e=e.parent)}}),"onfocusin"in a?(t(a,"focusin",u),t(a,"focusout",d)):(t(a,"focus",u,!0),t(a,"blur",d,!0)),o.__dom_scroll=function(t){var e,i=o.findControl(this);if(i&&(!(e=i.__storage)||!e.disabled))if(!1!==i.trigger("scroll"))i.renderer.__do_scroll(i,i.scrollLeft=this.scrollLeft,i.scrollTop=this.scrollTop);else try{this.onscroll=null,this.scrollTop=i.scrollTop,this.scrollLeft=i.scrollLeft}finally{this.onscroll=o.__dom_scroll}},t(a,a.mozHidden?"DOMMouseScroll":"mousewheel",function(t){var e,i=o.findControl(t.target);!i||(e=i.__storage)&&e.disabled||i.trigger("mousewheel","original_event",t,"wheelDelta",t.wheelDelta||40*-t.detail||-120)})}(flyingon,document);